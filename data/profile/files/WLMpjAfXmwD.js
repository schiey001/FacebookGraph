/*!CK:1086699862!*//*1425879962,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["0d3wV"]); }

__d("leaflet",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();(function(g,h,i){var j=g.L,k={};k.version='0.7.2';if(typeof e==='object'&&typeof e.exports==='object'){e.exports=k;}else if(typeof define==='function'&&define.amd)define(k);k.noConflict=function(){g.L=j;return this;};g.L=k;k.Util={extend:function(n){var o=Array.prototype.slice.call(arguments,1),p,q,r,s;for(q=0,r=o.length;q<r;q++){s=o[q]||{};for(p in s)if(s.hasOwnProperty(p))n[p]=s[p];}return n;},bind:function(n,o){var p=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return n.apply(o,p||arguments);};},stamp:(function(){var n=0,o='_leaflet_id';return function(p){p[o]=p[o]||++n;return p[o];};}()),invokeEach:function(n,o,p){var q,r;if(typeof n==='object'){r=Array.prototype.slice.call(arguments,3);for(q in n)o.apply(p,[q,n[q]].concat(r));return true;}return false;},limitExecByInterval:function(n,o,p){var q,r;return function s(){var t=arguments;if(q){r=true;return;}q=true;setTimeout(function(){q=false;if(r){s.apply(p,t);r=false;}},o);n.apply(p,t);};},falseFn:function(){return false;},formatNum:function(n,o){var p=Math.pow(10,o||5);return Math.round(n*p)/p;},trim:function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,'');},splitWords:function(n){return k.Util.trim(n).split(/\s+/);},setOptions:function(n,o){n.options=k.extend({},n.options,o);return n.options;},getParamString:function(n,o,p){var q=[];for(var r in n)q.push(encodeURIComponent(p?r.toUpperCase():r)+'='+encodeURIComponent(n[r]));return ((!o||o.indexOf('?')===-1)?'?':'&')+q.join('&');},template:function(n,o){return n.replace(/\{ *([\w_]+) *\}/g,function(p,q){var r=o[q];if(r===i){throw new Error('No value provided for variable '+p);}else if(typeof r==='function')r=r(o);return r;});},isArray:Array.isArray||function(n){return (Object.prototype.toString.call(n)==='[object Array]');},emptyImageUrl:'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs='};(function(){function n(s){var t,u,v=['webkit','moz','o','ms'];for(t=0;t<v.length&&!u;t++)u=g[v[t]+s];return u;}var o=0;function p(s){var t=+new Date(),u=Math.max(0,16-(t-o));o=t+u;return g.setTimeout(s,u);}var q=g.requestAnimationFrame||n('RequestAnimationFrame')||p,r=g.cancelAnimationFrame||n('CancelAnimationFrame')||n('CancelRequestAnimationFrame')||function(s){g.clearTimeout(s);};k.Util.requestAnimFrame=function(s,t,u,v){s=k.bind(s,t);if(u&&q===p){s();}else return q.call(g,s,v);};k.Util.cancelAnimFrame=function(s){if(s)r.call(g,s);};}());k.extend=k.Util.extend;k.bind=k.Util.bind;k.stamp=k.Util.stamp;k.setOptions=k.Util.setOptions;k.Class=function(){};k.Class.extend=function(n){var o=function(){if(this.initialize)this.initialize.apply(this,arguments);if(this._initHooks)this.callInitHooks();},p=function(){};p.prototype=this.prototype;var q=new p();q.constructor=o;o.prototype=q;for(var r in this)if(this.hasOwnProperty(r)&&r!=='prototype')o[r]=this[r];if(n.statics){k.extend(o,n.statics);delete n.statics;}if(n.includes){k.Util.extend.apply(null,[q].concat(n.includes));delete n.includes;}if(n.options&&q.options)n.options=k.extend({},q.options,n.options);k.extend(q,n);q._initHooks=[];var s=this;o.__super__=s.prototype;q.callInitHooks=function(){if(this._initHooksCalled)return;if(s.prototype.callInitHooks)s.prototype.callInitHooks.call(this);this._initHooksCalled=true;for(var t=0,u=q._initHooks.length;t<u;t++)q._initHooks[t].call(this);};return o;};k.Class.include=function(n){k.extend(this.prototype,n);};k.Class.mergeOptions=function(n){k.extend(this.prototype.options,n);};k.Class.addInitHook=function(n){var o=Array.prototype.slice.call(arguments,1),p=typeof n==='function'?n:function(){this[n].apply(this,o);};this.prototype._initHooks=this.prototype._initHooks||[];this.prototype._initHooks.push(p);};var l='_leaflet_events';k.Mixin={};k.Mixin.Events={addEventListener:function(n,o,p){if(k.Util.invokeEach(n,this.addEventListener,this,o,p))return this;var q=this[l]=this[l]||{},r=p&&p!==this&&k.stamp(p),s,t,event,u,v,w,x;n=k.Util.splitWords(n);for(s=0,t=n.length;s<t;s++){event={action:o,context:p||this};u=n[s];if(r){v=u+'_idx';w=v+'_len';x=q[v]=q[v]||{};if(!x[r]){x[r]=[];q[w]=(q[w]||0)+1;}x[r].push(event);}else{q[u]=q[u]||[];q[u].push(event);}}return this;},hasEventListeners:function(n){var o=this[l];return !!o&&((n in o&&o[n].length>0)||(n+'_idx' in o&&o[n+'_idx_len']>0));},removeEventListener:function(n,o,p){if(!this[l])return this;if(!n)return this.clearAllEventListeners();if(k.Util.invokeEach(n,this.removeEventListener,this,o,p))return this;var q=this[l],r=p&&p!==this&&k.stamp(p),s,t,u,v,w,x,y,z,aa;n=k.Util.splitWords(n);for(s=0,t=n.length;s<t;s++){u=n[s];x=u+'_idx';y=x+'_len';z=q[x];if(!o){delete q[u];delete q[x];delete q[y];}else{v=r&&z?z[r]:q[u];if(v){for(w=v.length-1;w>=0;w--)if((v[w].action===o)&&(!p||(v[w].context===p))){aa=v.splice(w,1);aa[0].action=k.Util.falseFn;}if(p&&z&&(v.length===0)){delete z[r];q[y]--;}}}}return this;},clearAllEventListeners:function(){delete this[l];return this;},fireEvent:function(n,o){if(!this.hasEventListeners(n))return this;var event=k.Util.extend({},o,{type:n,target:this}),p=this[l],q,r,s,t,u;if(p[n]){q=p[n].slice();for(r=0,s=q.length;r<s;r++)q[r].action.call(q[r].context,event);}t=p[n+'_idx'];for(u in t){q=t[u].slice();if(q)for(r=0,s=q.length;r<s;r++)q[r].action.call(q[r].context,event);}return this;},addOneTimeEventListener:function(n,o,p){if(k.Util.invokeEach(n,this.addOneTimeEventListener,this,o,p))return this;var q=k.bind(function(){this.removeEventListener(n,o,p).removeEventListener(n,q,p);},this);return this.addEventListener(n,o,p).addEventListener(n,q,p);}};k.Mixin.Events.on=k.Mixin.Events.addEventListener;k.Mixin.Events.off=k.Mixin.Events.removeEventListener;k.Mixin.Events.once=k.Mixin.Events.addOneTimeEventListener;k.Mixin.Events.fire=k.Mixin.Events.fireEvent;(function(){var n='ActiveXObject' in g,o=n&&!h.addEventListener,p=navigator.userAgent.toLowerCase(),q=p.indexOf('webkit')!==-1,r=p.indexOf('chrome')!==-1,s=p.indexOf('phantom')!==-1,t=p.indexOf('android')!==-1,u=p.search('android [23]')!==-1,v=p.indexOf('gecko')!==-1,w=typeof orientation!==i+'',x=g.navigator&&g.navigator.msPointerEnabled&&g.navigator.msMaxTouchPoints&&!g.PointerEvent,y=(g.PointerEvent&&g.navigator.pointerEnabled&&g.navigator.maxTouchPoints)||x,z=('devicePixelRatio' in g&&g.devicePixelRatio>1)||('matchMedia' in g&&g.matchMedia('(min-resolution:144dpi)')&&g.matchMedia('(min-resolution:144dpi)').matches),aa=h.documentElement,ba=n&&('transition' in aa.style),ca=('WebKitCSSMatrix' in g)&&('m11' in new g.WebKitCSSMatrix())&&!u,da='MozPerspective' in aa.style,ea='OTransition' in aa.style,fa=!g.L_DISABLE_3D&&(ba||ca||da||ea)&&!s,ga=!g.L_NO_TOUCH&&!s&&(function(){var ha='ontouchstart';if(y||(ha in aa))return true;var ia=h.createElement('div'),ja=false;if(!ia.setAttribute)return false;ia.setAttribute(ha,'return;');if(typeof ia[ha]==='function')ja=true;ia.removeAttribute(ha);ia=null;return ja;}());k.Browser={ie:n,ielt9:o,webkit:q,gecko:v&&!q&&!g.opera&&!n,android:t,android23:u,chrome:r,ie3d:ba,webkit3d:ca,gecko3d:da,opera3d:ea,any3d:fa,mobile:w,mobileWebkit:w&&q,mobileWebkit3d:w&&ca,mobileOpera:w&&g.opera,touch:ga,msPointer:x,pointer:y,retina:z};}());k.Point=function(n,o,p){this.x=(p?Math.round(n):n);this.y=(p?Math.round(o):o);};k.Point.prototype={clone:function(){return new k.Point(this.x,this.y);},add:function(n){return this.clone()._add(k.point(n));},_add:function(n){this.x+=n.x;this.y+=n.y;return this;},subtract:function(n){return this.clone()._subtract(k.point(n));},_subtract:function(n){this.x-=n.x;this.y-=n.y;return this;},divideBy:function(n){return this.clone()._divideBy(n);},_divideBy:function(n){this.x/=n;this.y/=n;return this;},multiplyBy:function(n){return this.clone()._multiplyBy(n);},_multiplyBy:function(n){this.x*=n;this.y*=n;return this;},round:function(){return this.clone()._round();},_round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this;},floor:function(){return this.clone()._floor();},_floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this;},distanceTo:function(n){n=k.point(n);var o=n.x-this.x,p=n.y-this.y;return Math.sqrt(o*o+p*p);},equals:function(n){n=k.point(n);return n.x===this.x&&n.y===this.y;},contains:function(n){n=k.point(n);return Math.abs(n.x)<=Math.abs(this.x)&&Math.abs(n.y)<=Math.abs(this.y);},toString:function(){return 'Point('+k.Util.formatNum(this.x)+', '+k.Util.formatNum(this.y)+')';}};k.point=function(n,o,p){if(n instanceof k.Point)return n;if(k.Util.isArray(n))return new k.Point(n[0],n[1]);if(n===i||n===null)return n;return new k.Point(n,o,p);};k.Bounds=function(n,o){if(!n)return;var p=o?[n,o]:n;for(var q=0,r=p.length;q<r;q++)this.extend(p[q]);};k.Bounds.prototype={extend:function(n){n=k.point(n);if(!this.min&&!this.max){this.min=n.clone();this.max=n.clone();}else{this.min.x=Math.min(n.x,this.min.x);this.max.x=Math.max(n.x,this.max.x);this.min.y=Math.min(n.y,this.min.y);this.max.y=Math.max(n.y,this.max.y);}return this;},getCenter:function(n){return new k.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,n);},getBottomLeft:function(){return new k.Point(this.min.x,this.max.y);},getTopRight:function(){return new k.Point(this.max.x,this.min.y);},getSize:function(){return this.max.subtract(this.min);},contains:function(n){var o,p;if(typeof n[0]==='number'||n instanceof k.Point){n=k.point(n);}else n=k.bounds(n);if(n instanceof k.Bounds){o=n.min;p=n.max;}else o=p=n;return (o.x>=this.min.x)&&(p.x<=this.max.x)&&(o.y>=this.min.y)&&(p.y<=this.max.y);},intersects:function(n){n=k.bounds(n);var o=this.min,p=this.max,q=n.min,r=n.max,s=(r.x>=o.x)&&(q.x<=p.x),t=(r.y>=o.y)&&(q.y<=p.y);return s&&t;},isValid:function(){return !!(this.min&&this.max);}};k.bounds=function(n,o){if(!n||n instanceof k.Bounds)return n;return new k.Bounds(n,o);};k.Transformation=function(n,o,p,q){this._a=n;this._b=o;this._c=p;this._d=q;};k.Transformation.prototype={transform:function(n,o){return this._transform(n.clone(),o);},_transform:function(n,o){o=o||1;n.x=o*(this._a*n.x+this._b);n.y=o*(this._c*n.y+this._d);return n;},untransform:function(n,o){o=o||1;return new k.Point((n.x/o-this._b)/this._a,(n.y/o-this._d)/this._c);}};k.DomUtil={get:function(n){return (typeof n==='string'?h.getElementById(n):n);},getStyle:function(n,o){var p=n.style[o];if(!p&&n.currentStyle)p=n.currentStyle[o];if((!p||p==='auto')&&h.defaultView){var q=h.defaultView.getComputedStyle(n,null);p=q?q[o]:null;}return p==='auto'?null:p;},getViewportOffset:function(n){var o=0,p=0,q=n,r=h.body,s=h.documentElement,t;do{o+=q.offsetTop||0;p+=q.offsetLeft||0;o+=parseInt(k.DomUtil.getStyle(q,'borderTopWidth'),10)||0;p+=parseInt(k.DomUtil.getStyle(q,'borderLeftWidth'),10)||0;t=k.DomUtil.getStyle(q,'position');if(q.offsetParent===r&&t==='absolute')break;if(t==='fixed'){o+=r.scrollTop||s.scrollTop||0;p+=r.scrollLeft||s.scrollLeft||0;break;}if(t==='relative'&&!q.offsetLeft){var u=k.DomUtil.getStyle(q,'width'),v=k.DomUtil.getStyle(q,'max-width'),w=q.getBoundingClientRect();if(u!=='none'||v!=='none')p+=w.left+q.clientLeft;o+=w.top+(r.scrollTop||s.scrollTop||0);break;}q=q.offsetParent;}while(q);q=n;do{if(q===r)break;o-=q.scrollTop||0;p-=q.scrollLeft||0;q=q.parentNode;}while(q);return new k.Point(p,o);},documentIsLtr:function(){if(!k.DomUtil._docIsLtrCached){k.DomUtil._docIsLtrCached=true;k.DomUtil._docIsLtr=k.DomUtil.getStyle(h.body,'direction')==='ltr';}return k.DomUtil._docIsLtr;},create:function(n,o,p){var q=h.createElement(n);q.className=o;if(p)p.appendChild(q);return q;},hasClass:function(n,o){if(n.classList!==i)return n.classList.contains(o);var p=k.DomUtil._getClass(n);return p.length>0&&new RegExp('(^|\\s)'+o+'(\\s|$)').test(p);},addClass:function(n,o){if(n.classList!==i){var p=k.Util.splitWords(o);for(var q=0,r=p.length;q<r;q++)n.classList.add(p[q]);}else if(!k.DomUtil.hasClass(n,o)){var s=k.DomUtil._getClass(n);k.DomUtil._setClass(n,(s?s+' ':'')+o);}},removeClass:function(n,o){if(n.classList!==i){n.classList.remove(o);}else k.DomUtil._setClass(n,k.Util.trim((' '+k.DomUtil._getClass(n)+' ').replace(' '+o+' ',' ')));},_setClass:function(n,o){if(n.className.baseVal===i){n.className=o;}else n.className.baseVal=o;},_getClass:function(n){return n.className.baseVal===i?n.className:n.className.baseVal;},setOpacity:function(n,o){if('opacity' in n.style){n.style.opacity=o;}else if('filter' in n.style){var p=false,q='DXImageTransform.Microsoft.Alpha';try{p=n.filters.item(q);}catch(r){if(o===1)return;}o=Math.round(o*100);if(p){p.Enabled=(o!==100);p.Opacity=o;}else n.style.filter+=' progid:'+q+'(opacity='+o+')';}},testProp:function(n){var o=h.documentElement.style;for(var p=0;p<n.length;p++)if(n[p] in o)return n[p];return false;},getTranslateString:function(n){var o=k.Browser.webkit3d,p='translate'+(o?'3d':'')+'(',q=(o?',0':'')+')';return p+n.x+'px,'+n.y+'px'+q;},getScaleString:function(n,o){var p=k.DomUtil.getTranslateString(o.add(o.multiplyBy(-1*n))),q=' scale('+n+') ';return p+q;},setPosition:function(n,o,p){n._leaflet_pos=o;if(!p&&k.Browser.any3d){n.style[k.DomUtil.TRANSFORM]=k.DomUtil.getTranslateString(o);}else{n.style.left=o.x+'px';n.style.top=o.y+'px';}},getPosition:function(n){return n._leaflet_pos;}};k.DomUtil.TRANSFORM=k.DomUtil.testProp(['transform','WebkitTransform','OTransform','MozTransform','msTransform']);k.DomUtil.TRANSITION=k.DomUtil.testProp(['webkitTransition','transition','OTransition','MozTransition','msTransition']);k.DomUtil.TRANSITION_END=k.DomUtil.TRANSITION==='webkitTransition'||k.DomUtil.TRANSITION==='OTransition'?k.DomUtil.TRANSITION+'End':'transitionend';(function(){if('onselectstart' in h){k.extend(k.DomUtil,{disableTextSelection:function(){k.DomEvent.on(g,'selectstart',k.DomEvent.preventDefault);},enableTextSelection:function(){k.DomEvent.off(g,'selectstart',k.DomEvent.preventDefault);}});}else{var n=k.DomUtil.testProp(['userSelect','WebkitUserSelect','OUserSelect','MozUserSelect','msUserSelect']);k.extend(k.DomUtil,{disableTextSelection:function(){if(n){var o=h.documentElement.style;this._userSelect=o[n];o[n]='none';}},enableTextSelection:function(){if(n){h.documentElement.style[n]=this._userSelect;delete this._userSelect;}}});}k.extend(k.DomUtil,{disableImageDrag:function(){k.DomEvent.on(g,'dragstart',k.DomEvent.preventDefault);},enableImageDrag:function(){k.DomEvent.off(g,'dragstart',k.DomEvent.preventDefault);}});})();k.LatLng=function(n,o,p){n=parseFloat(n);o=parseFloat(o);if(isNaN(n)||isNaN(o))throw new Error('Invalid LatLng object: ('+n+', '+o+')');this.lat=n;this.lng=o;if(p!==i)this.alt=parseFloat(p);};k.extend(k.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-09});k.LatLng.prototype={equals:function(n){if(!n)return false;n=k.latLng(n);var o=Math.max(Math.abs(this.lat-n.lat),Math.abs(this.lng-n.lng));return o<=k.LatLng.MAX_MARGIN;},toString:function(n){return 'LatLng('+k.Util.formatNum(this.lat,n)+', '+k.Util.formatNum(this.lng,n)+')';},distanceTo:function(n){n=k.latLng(n);var o=6378137,p=k.LatLng.DEG_TO_RAD,q=(n.lat-this.lat)*p,r=(n.lng-this.lng)*p,s=this.lat*p,t=n.lat*p,u=Math.sin(q/2),v=Math.sin(r/2),w=u*u+v*v*Math.cos(s)*Math.cos(t);return o*2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));},wrap:function(n,o){var p=this.lng;n=n||-180;o=o||180;p=(p+o)%(o-n)+(p<n||p===o?o:n);return new k.LatLng(this.lat,p);}};k.latLng=function(n,o){if(n instanceof k.LatLng)return n;if(k.Util.isArray(n))if(typeof n[0]==='number'||typeof n[0]==='string'){return new k.LatLng(n[0],n[1],n[2]);}else return null;if(n===i||n===null)return n;if(typeof n==='object'&&'lat' in n)return new k.LatLng(n.lat,'lng' in n?n.lng:n.lon);if(o===i)return null;return new k.LatLng(n,o);};k.LatLngBounds=function(n,o){if(!n)return;var p=o?[n,o]:n;for(var q=0,r=p.length;q<r;q++)this.extend(p[q]);};k.LatLngBounds.prototype={extend:function(n){if(!n)return this;var o=k.latLng(n);if(o!==null){n=o;}else n=k.latLngBounds(n);if(n instanceof k.LatLng){if(!this._southWest&&!this._northEast){this._southWest=new k.LatLng(n.lat,n.lng);this._northEast=new k.LatLng(n.lat,n.lng);}else{this._southWest.lat=Math.min(n.lat,this._southWest.lat);this._southWest.lng=Math.min(n.lng,this._southWest.lng);this._northEast.lat=Math.max(n.lat,this._northEast.lat);this._northEast.lng=Math.max(n.lng,this._northEast.lng);}}else if(n instanceof k.LatLngBounds){this.extend(n._southWest);this.extend(n._northEast);}return this;},pad:function(n){var o=this._southWest,p=this._northEast,q=Math.abs(o.lat-p.lat)*n,r=Math.abs(o.lng-p.lng)*n;return new k.LatLngBounds(new k.LatLng(o.lat-q,o.lng-r),new k.LatLng(p.lat+q,p.lng+r));},getCenter:function(){return new k.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2);},getSouthWest:function(){return this._southWest;},getNorthEast:function(){return this._northEast;},getNorthWest:function(){return new k.LatLng(this.getNorth(),this.getWest());},getSouthEast:function(){return new k.LatLng(this.getSouth(),this.getEast());},getWest:function(){return this._southWest.lng;},getSouth:function(){return this._southWest.lat;},getEast:function(){return this._northEast.lng;},getNorth:function(){return this._northEast.lat;},contains:function(n){if(typeof n[0]==='number'||n instanceof k.LatLng){n=k.latLng(n);}else n=k.latLngBounds(n);var o=this._southWest,p=this._northEast,q,r;if(n instanceof k.LatLngBounds){q=n.getSouthWest();r=n.getNorthEast();}else q=r=n;return (q.lat>=o.lat)&&(r.lat<=p.lat)&&(q.lng>=o.lng)&&(r.lng<=p.lng);},intersects:function(n){n=k.latLngBounds(n);var o=this._southWest,p=this._northEast,q=n.getSouthWest(),r=n.getNorthEast(),s=(r.lat>=o.lat)&&(q.lat<=p.lat),t=(r.lng>=o.lng)&&(q.lng<=p.lng);return s&&t;},toBBoxString:function(){return [this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(',');},equals:function(n){if(!n)return false;n=k.latLngBounds(n);return this._southWest.equals(n.getSouthWest())&&this._northEast.equals(n.getNorthEast());},isValid:function(){return !!(this._southWest&&this._northEast);}};k.latLngBounds=function(n,o){if(!n||n instanceof k.LatLngBounds)return n;return new k.LatLngBounds(n,o);};k.Projection={};k.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(n){var o=k.LatLng.DEG_TO_RAD,p=this.MAX_LATITUDE,q=Math.max(Math.min(p,n.lat),-p),r=n.lng*o,s=q*o;s=Math.log(Math.tan((Math.PI/4)+(s/2)));return new k.Point(r,s);},unproject:function(n){var o=k.LatLng.RAD_TO_DEG,p=n.x*o,q=(2*Math.atan(Math.exp(n.y))-(Math.PI/2))*o;return new k.LatLng(q,p);}};k.Projection.LonLat={project:function(n){return new k.Point(n.lng,n.lat);},unproject:function(n){return new k.LatLng(n.y,n.x);}};k.CRS={latLngToPoint:function(n,o){var p=this.projection.project(n),q=this.scale(o);return this.transformation._transform(p,q);},pointToLatLng:function(n,o){var p=this.scale(o),q=this.transformation.untransform(n,p);return this.projection.unproject(q);},project:function(n){return this.projection.project(n);},scale:function(n){return 256*Math.pow(2,n);},getSize:function(n){var o=this.scale(n);return k.point(o,o);}};k.CRS.Simple=k.extend({},k.CRS,{projection:k.Projection.LonLat,transformation:new k.Transformation(1,0,-1,0),scale:function(n){return Math.pow(2,n);}});k.CRS.EPSG3857=k.extend({},k.CRS,{code:'EPSG:3857',projection:k.Projection.SphericalMercator,transformation:new k.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(n){var o=this.projection.project(n),p=6378137;return o.multiplyBy(p);}});k.CRS.EPSG900913=k.extend({},k.CRS.EPSG3857,{code:'EPSG:900913'});k.CRS.EPSG4326=k.extend({},k.CRS,{code:'EPSG:4326',projection:k.Projection.LonLat,transformation:new k.Transformation(1/360,.5,-1/360,.5)});k.Map=k.Class.extend({includes:k.Mixin.Events,options:{crs:k.CRS.EPSG3857,fadeAnimation:k.DomUtil.TRANSITION&&!k.Browser.android23,trackResize:true,markerZoomAnimation:k.DomUtil.TRANSITION&&k.Browser.any3d},initialize:function(n,o){o=k.setOptions(this,o);this._initContainer(n);this._initLayout();this._onResize=k.bind(this._onResize,this);this._initEvents();if(o.maxBounds)this.setMaxBounds(o.maxBounds);if(o.center&&o.zoom!==i)this.setView(k.latLng(o.center),o.zoom,{reset:true});this._handlers=[];this._layers={};this._zoomBoundLayers={};this._tileLayersNum=0;this.callInitHooks();this._addLayers(o.layers);},setView:function(n,o){o=o===i?this.getZoom():o;this._resetView(k.latLng(n),this._limitZoom(o));return this;},setZoom:function(n,o){if(!this._loaded){this._zoom=this._limitZoom(n);return this;}return this.setView(this.getCenter(),n,{zoom:o});},zoomIn:function(n,o){return this.setZoom(this._zoom+(n||1),o);},zoomOut:function(n,o){return this.setZoom(this._zoom-(n||1),o);},setZoomAround:function(n,o,p){var q=this.getZoomScale(o),r=this.getSize().divideBy(2),s=n instanceof k.Point?n:this.latLngToContainerPoint(n),t=s.subtract(r).multiplyBy(1-1/q),u=this.containerPointToLatLng(r.add(t));return this.setView(u,o,{zoom:p});},fitBounds:function(n,o){o=o||{};n=n.getBounds?n.getBounds():k.latLngBounds(n);var p=k.point(o.paddingTopLeft||o.padding||[0,0]),q=k.point(o.paddingBottomRight||o.padding||[0,0]),r=this.getBoundsZoom(n,false,p.add(q)),s=q.subtract(p).divideBy(2),t=this.project(n.getSouthWest(),r),u=this.project(n.getNorthEast(),r),v=this.unproject(t.add(u).divideBy(2).add(s),r);r=o&&o.maxZoom?Math.min(o.maxZoom,r):r;return this.setView(v,r,o);},fitWorld:function(n){return this.fitBounds([[-90,-180],[90,180]],n);},panTo:function(n,o){return this.setView(n,this._zoom,{pan:o});},panBy:function(n){this.fire('movestart');this._rawPanBy(k.point(n));this.fire('move');return this.fire('moveend');},setMaxBounds:function(n){n=k.latLngBounds(n);this.options.maxBounds=n;if(!n)return this.off('moveend',this._panInsideMaxBounds,this);if(this._loaded)this._panInsideMaxBounds();return this.on('moveend',this._panInsideMaxBounds,this);},panInsideBounds:function(n,o){var p=this.getCenter(),q=this._limitCenter(p,this._zoom,n);if(p.equals(q))return this;return this.panTo(q,o);},addLayer:function(n){var o=k.stamp(n);if(this._layers[o])return this;this._layers[o]=n;if(n.options&&(!isNaN(n.options.maxZoom)||!isNaN(n.options.minZoom))){this._zoomBoundLayers[o]=n;this._updateZoomLevels();}if(this.options.zoomAnimation&&k.TileLayer&&(n instanceof k.TileLayer)){this._tileLayersNum++;this._tileLayersToLoad++;n.on('load',this._onTileLayerLoad,this);}if(this._loaded)this._layerAdd(n);return this;},removeLayer:function(n){var o=k.stamp(n);if(!this._layers[o])return this;if(this._loaded)n.onRemove(this);delete this._layers[o];if(this._loaded)this.fire('layerremove',{layer:n});if(this._zoomBoundLayers[o]){delete this._zoomBoundLayers[o];this._updateZoomLevels();}if(this.options.zoomAnimation&&k.TileLayer&&(n instanceof k.TileLayer)){this._tileLayersNum--;this._tileLayersToLoad--;n.off('load',this._onTileLayerLoad,this);}return this;},hasLayer:function(n){if(!n)return false;return (k.stamp(n) in this._layers);},eachLayer:function(n,o){for(var p in this._layers)n.call(o,this._layers[p]);return this;},invalidateSize:function(n){if(!this._loaded)return this;n=k.extend({animate:false,pan:true},n===true?{animate:true}:n);var o=this.getSize();this._sizeChanged=true;this._initialCenter=null;var p=this.getSize(),q=o.divideBy(2).round(),r=p.divideBy(2).round(),s=q.subtract(r);if(!s.x&&!s.y)return this;if(n.animate&&n.pan){this.panBy(s);}else{if(n.pan)this._rawPanBy(s);this.fire('move');if(n.debounceMoveend){clearTimeout(this._sizeTimer);this._sizeTimer=setTimeout(k.bind(this.fire,this,'moveend'),200);}else this.fire('moveend');}return this.fire('resize',{oldSize:o,newSize:p});},addHandler:function(n,o){if(!o)return this;var p=this[n]=new o(this);this._handlers.push(p);if(this.options[n])p.enable();return this;},remove:function(){if(this._loaded)this.fire('unload');this._initEvents('off');try{delete this._container._leaflet;}catch(n){this._container._leaflet=i;}this._clearPanes();if(this._clearControlPos)this._clearControlPos();this._clearHandlers();return this;},getCenter:function(){this._checkIfLoaded();if(this._initialCenter&&!this._moved())return this._initialCenter;return this.layerPointToLatLng(this._getCenterLayerPoint());},getZoom:function(){return this._zoom;},getBounds:function(){var n=this.getPixelBounds(),o=this.unproject(n.getBottomLeft()),p=this.unproject(n.getTopRight());return new k.LatLngBounds(o,p);},getMinZoom:function(){return this.options.minZoom===i?(this._layersMinZoom===i?0:this._layersMinZoom):this.options.minZoom;},getMaxZoom:function(){return this.options.maxZoom===i?(this._layersMaxZoom===i?Infinity:this._layersMaxZoom):this.options.maxZoom;},getBoundsZoom:function(n,o,p){n=k.latLngBounds(n);var q=this.getMinZoom()-(o?1:0),r=this.getMaxZoom(),s=this.getSize(),t=n.getNorthWest(),u=n.getSouthEast(),v=true,w;p=k.point(p||[0,0]);do{q++;w=this.project(u,q).subtract(this.project(t,q)).add(p);v=!o?s.contains(w):w.x<s.x||w.y<s.y;}while(v&&q<=r);if(v&&o)return null;return o?q:q-1;},getSize:function(){if(!this._size||this._sizeChanged){this._size=new k.Point(this._container.clientWidth,this._container.clientHeight);this._sizeChanged=false;}return this._size.clone();},getPixelBounds:function(){var n=this._getTopLeftPoint();return new k.Bounds(n,n.add(this.getSize()));},getPixelOrigin:function(){this._checkIfLoaded();return this._initialTopLeftPoint;},getPanes:function(){return this._panes;},getContainer:function(){return this._container;},getZoomScale:function(n){var o=this.options.crs;return o.scale(n)/o.scale(this._zoom);},getScaleZoom:function(n){return this._zoom+(Math.log(n)/Math.LN2);},project:function(n,o){o=o===i?this._zoom:o;return this.options.crs.latLngToPoint(k.latLng(n),o);},unproject:function(n,o){o=o===i?this._zoom:o;return this.options.crs.pointToLatLng(k.point(n),o);},layerPointToLatLng:function(n){var o=k.point(n).add(this.getPixelOrigin());return this.unproject(o);},latLngToLayerPoint:function(n){var o=this.project(k.latLng(n))._round();return o._subtract(this.getPixelOrigin());},containerPointToLayerPoint:function(n){return k.point(n).subtract(this._getMapPanePos());},layerPointToContainerPoint:function(n){return k.point(n).add(this._getMapPanePos());},containerPointToLatLng:function(n){var o=this.containerPointToLayerPoint(k.point(n));return this.layerPointToLatLng(o);},latLngToContainerPoint:function(n){return this.layerPointToContainerPoint(this.latLngToLayerPoint(k.latLng(n)));},mouseEventToContainerPoint:function(n){return k.DomEvent.getMousePosition(n,this._container);},mouseEventToLayerPoint:function(n){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(n));},mouseEventToLatLng:function(n){return this.layerPointToLatLng(this.mouseEventToLayerPoint(n));},_initContainer:function(n){var o=this._container=k.DomUtil.get(n);if(!o){throw new Error('Map container not found.');}else if(o._leaflet)throw new Error('Map container is already initialized.');o._leaflet=true;},_initLayout:function(){var n=this._container;k.DomUtil.addClass(n,'leaflet-container'+(k.Browser.touch?' leaflet-touch':'')+(k.Browser.retina?' leaflet-retina':'')+(k.Browser.ielt9?' leaflet-oldie':'')+(this.options.fadeAnimation?' leaflet-fade-anim':''));var o=k.DomUtil.getStyle(n,'position');if(o!=='absolute'&&o!=='relative'&&o!=='fixed')n.style.position='relative';this._initPanes();if(this._initControlPos)this._initControlPos();},_initPanes:function(){var n=this._panes={};this._mapPane=n.mapPane=this._createPane('leaflet-map-pane',this._container);this._tilePane=n.tilePane=this._createPane('leaflet-tile-pane',this._mapPane);n.objectsPane=this._createPane('leaflet-objects-pane',this._mapPane);n.shadowPane=this._createPane('leaflet-shadow-pane');n.overlayPane=this._createPane('leaflet-overlay-pane');n.markerPane=this._createPane('leaflet-marker-pane');n.popupPane=this._createPane('leaflet-popup-pane');var o=' leaflet-zoom-hide';if(!this.options.markerZoomAnimation){k.DomUtil.addClass(n.markerPane,o);k.DomUtil.addClass(n.shadowPane,o);k.DomUtil.addClass(n.popupPane,o);}},_createPane:function(n,o){return k.DomUtil.create('div',n,o||this._panes.objectsPane);},_clearPanes:function(){this._container.removeChild(this._mapPane);},_addLayers:function(n){n=n?(k.Util.isArray(n)?n:[n]):[];for(var o=0,p=n.length;o<p;o++)this.addLayer(n[o]);},_resetView:function(n,o,p,q){var r=(this._zoom!==o);if(!q){this.fire('movestart');if(r)this.fire('zoomstart');}this._zoom=o;this._initialCenter=n;this._initialTopLeftPoint=this._getNewTopLeftPoint(n);if(!p){k.DomUtil.setPosition(this._mapPane,new k.Point(0,0));}else this._initialTopLeftPoint._add(this._getMapPanePos());this._tileLayersToLoad=this._tileLayersNum;var s=!this._loaded;this._loaded=true;if(s){this.fire('load');this.eachLayer(this._layerAdd,this);}this.fire('viewreset',{hard:!p});this.fire('move');if(r||q)this.fire('zoomend');this.fire('moveend',{hard:!p});},_rawPanBy:function(n){k.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(n));},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom();},_updateZoomLevels:function(){var n,o=Infinity,p=-Infinity,q=this._getZoomSpan();for(n in this._zoomBoundLayers){var r=this._zoomBoundLayers[n];if(!isNaN(r.options.minZoom))o=Math.min(o,r.options.minZoom);if(!isNaN(r.options.maxZoom))p=Math.max(p,r.options.maxZoom);}if(n===i){this._layersMaxZoom=this._layersMinZoom=i;}else{this._layersMaxZoom=p;this._layersMinZoom=o;}if(q!==this._getZoomSpan())this.fire('zoomlevelschange');},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds);},_checkIfLoaded:function(){if(!this._loaded)throw new Error('Set map center and zoom first.');},_initEvents:function(n){if(!k.DomEvent)return;n=n||'on';k.DomEvent[n](this._container,'click',this._onMouseClick,this);var o=['dblclick','mousedown','mouseup','mouseenter','mouseleave','mousemove','contextmenu'],p,q;for(p=0,q=o.length;p<q;p++)k.DomEvent[n](this._container,o[p],this._fireMouseEvent,this);if(this.options.trackResize)k.DomEvent[n](g,'resize',this._onResize,this);},_onResize:function(){k.Util.cancelAnimFrame(this._resizeRequest);this._resizeRequest=k.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:true});},this,false,this._container);},_onMouseClick:function(n){if(!this._loaded||(!n._simulated&&((this.dragging&&this.dragging.moved())||(this.boxZoom&&this.boxZoom.moved())))||k.DomEvent._skipped(n))return;this.fire('preclick');this._fireMouseEvent(n);},_fireMouseEvent:function(n){if(!this._loaded||k.DomEvent._skipped(n))return;var o=n.type;o=(o==='mouseenter'?'mouseover':(o==='mouseleave'?'mouseout':o));if(!this.hasEventListeners(o))return;if(o==='contextmenu')k.DomEvent.preventDefault(n);var p=this.mouseEventToContainerPoint(n),q=this.containerPointToLayerPoint(p),r=this.layerPointToLatLng(q);this.fire(o,{latlng:r,layerPoint:q,containerPoint:p,originalEvent:n});},_onTileLayerLoad:function(){this._tileLayersToLoad--;if(this._tileLayersNum&&!this._tileLayersToLoad)this.fire('tilelayersload');},_clearHandlers:function(){for(var n=0,o=this._handlers.length;n<o;n++)this._handlers[n].disable();},whenReady:function(n,o){if(this._loaded){n.call(o||this,this);}else this.on('load',n,o);return this;},_layerAdd:function(n){n.onAdd(this);this.fire('layeradd',{layer:n});},_getMapPanePos:function(){return k.DomUtil.getPosition(this._mapPane);},_moved:function(){var n=this._getMapPanePos();return n&&!n.equals([0,0]);},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos());},_getNewTopLeftPoint:function(n,o){var p=this.getSize()._divideBy(2);return this.project(n,o)._subtract(p)._round();},_latLngToNewLayerPoint:function(n,o,p){var q=this._getNewTopLeftPoint(p,o).add(this._getMapPanePos());return this.project(n,o)._subtract(q);},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2));},_getCenterOffset:function(n){return this.latLngToLayerPoint(n).subtract(this._getCenterLayerPoint());},_limitCenter:function(n,o,p){if(!p)return n;var q=this.project(n,o),r=this.getSize().divideBy(2),s=new k.Bounds(q.subtract(r),q.add(r)),t=this._getBoundsOffset(s,p,o);return this.unproject(q.add(t),o);},_limitOffset:function(n,o){if(!o)return n;var p=this.getPixelBounds(),q=new k.Bounds(p.min.add(n),p.max.add(n));return n.add(this._getBoundsOffset(q,o));},_getBoundsOffset:function(n,o,p){var q=this.project(o.getNorthWest(),p).subtract(n.min),r=this.project(o.getSouthEast(),p).subtract(n.max),s=this._rebound(q.x,-r.x),t=this._rebound(q.y,-r.y);return new k.Point(s,t);},_rebound:function(n,o){return n+o>0?Math.round(n-o)/2:Math.max(0,Math.ceil(n))-Math.max(0,Math.floor(o));},_limitZoom:function(n){var o=this.getMinZoom(),p=this.getMaxZoom();return Math.max(o,Math.min(p,n));}});k.map=function(n,o){return new k.Map(n,o);};k.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(n){var o=k.LatLng.DEG_TO_RAD,p=this.MAX_LATITUDE,q=Math.max(Math.min(p,n.lat),-p),r=this.R_MAJOR,s=this.R_MINOR,t=n.lng*o*r,u=q*o,v=s/r,w=Math.sqrt(1-v*v),x=w*Math.sin(u);x=Math.pow((1-x)/(1+x),w*.5);var y=Math.tan(.5*((Math.PI*.5)-u))/x;u=-r*Math.log(y);return new k.Point(t,u);},unproject:function(n){var o=k.LatLng.RAD_TO_DEG,p=this.R_MAJOR,q=this.R_MINOR,r=n.x*o/p,s=q/p,t=Math.sqrt(1-(s*s)),u=Math.exp(-n.y/p),v=(Math.PI/2)-2*Math.atan(u),w=15,x=1e-07,y=w,z=.1,aa;while((Math.abs(z)>x)&&(--y>0)){aa=t*Math.sin(v);z=(Math.PI/2)-2*Math.atan(u*Math.pow((1-aa)/(1+aa),.5*t))-v;v+=z;}return new k.LatLng(v*o,r);}};k.CRS.EPSG3395=k.extend({},k.CRS,{code:'EPSG:3395',projection:k.Projection.Mercator,transformation:(function(){var n=k.Projection.Mercator,o=n.R_MAJOR,p=.5/(Math.PI*o);return new k.Transformation(p,.5,-p,.5);}())});k.TileLayer=k.Class.extend({includes:k.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:'abc',errorTileUrl:'',attribution:'',zoomOffset:0,opacity:1,unloadInvisibleTiles:k.Browser.mobile,updateWhenIdle:k.Browser.mobile},initialize:function(n,o){o=k.setOptions(this,o);if(o.detectRetina&&k.Browser.retina&&o.maxZoom>0){o.tileSize=Math.floor(o.tileSize/2);o.zoomOffset++;if(o.minZoom>0)o.minZoom--;this.options.maxZoom--;}if(o.bounds)o.bounds=k.latLngBounds(o.bounds);this._url=n;var p=this.options.subdomains;if(typeof p==='string')this.options.subdomains=p.split('');},onAdd:function(n){this._map=n;this._animated=n._zoomAnimated;this._initContainer();n.on({viewreset:this._reset,moveend:this._update},this);if(this._animated)n.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this);if(!this.options.updateWhenIdle){this._limitedUpdate=k.Util.limitExecByInterval(this._update,150,this);n.on('move',this._limitedUpdate,this);}this._reset();this._update();},addTo:function(n){n.addLayer(this);return this;},onRemove:function(n){this._container.parentNode.removeChild(this._container);n.off({viewreset:this._reset,moveend:this._update},this);if(this._animated)n.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this);if(!this.options.updateWhenIdle)n.off('move',this._limitedUpdate,this);this._container=null;this._map=null;},bringToFront:function(){var n=this._map._panes.tilePane;if(this._container){n.appendChild(this._container);this._setAutoZIndex(n,Math.max);}return this;},bringToBack:function(){var n=this._map._panes.tilePane;if(this._container){n.insertBefore(this._container,n.firstChild);this._setAutoZIndex(n,Math.min);}return this;},getAttribution:function(){return this.options.attribution;},getContainer:function(){return this._container;},setOpacity:function(n){this.options.opacity=n;if(this._map)this._updateOpacity();return this;},setZIndex:function(n){this.options.zIndex=n;this._updateZIndex();return this;},setUrl:function(n,o){this._url=n;if(!o)this.redraw();return this;},redraw:function(){if(this._map){this._reset({hard:true});this._update();}return this;},_updateZIndex:function(){if(this._container&&this.options.zIndex!==i)this._container.style.zIndex=this.options.zIndex;},_setAutoZIndex:function(n,o){var p=n.children,q=-o(Infinity,-Infinity),r,s,t;for(s=0,t=p.length;s<t;s++)if(p[s]!==this._container){r=parseInt(p[s].style.zIndex,10);if(!isNaN(r))q=o(q,r);}this.options.zIndex=this._container.style.zIndex=(isFinite(q)?q:0)+o(1,-1);},_updateOpacity:function(){var n,o=this._tiles;if(k.Browser.ielt9){for(n in o)k.DomUtil.setOpacity(o[n],this.options.opacity);}else k.DomUtil.setOpacity(this._container,this.options.opacity);},_initContainer:function(){var n=this._map._panes.tilePane;if(!this._container){this._container=k.DomUtil.create('div','leaflet-layer');this._updateZIndex();if(this._animated){var o='leaflet-tile-container';this._bgBuffer=k.DomUtil.create('div',o,this._container);this._tileContainer=k.DomUtil.create('div',o,this._container);}else this._tileContainer=this._container;n.appendChild(this._container);if(this.options.opacity<1)this._updateOpacity();}},_reset:function(n){for(var o in this._tiles)this.fire('tileunload',{tile:this._tiles[o]});this._tiles={};this._tilesToLoad=0;if(this.options.reuseTiles)this._unusedTiles=[];this._tileContainer.innerHTML='';if(this._animated&&n&&n.hard)this._clearBgBuffer();this._initContainer();},_getTileSize:function(){var n=this._map,o=n.getZoom()+this.options.zoomOffset,p=this.options.maxNativeZoom,q=this.options.tileSize;if(p&&o>p)q=Math.round(n.getZoomScale(o)/n.getZoomScale(p)*q);return q;},_update:function(){if(!this._map)return;var n=this._map,o=n.getPixelBounds(),p=n.getZoom(),q=this._getTileSize();if(p>this.options.maxZoom||p<this.options.minZoom)return;var r=k.bounds(o.min.divideBy(q)._floor(),o.max.divideBy(q)._floor());this._addTilesFromCenterOut(r);if(this.options.unloadInvisibleTiles||this.options.reuseTiles)this._removeOtherTiles(r);},_addTilesFromCenterOut:function(n){var o=[],p=n.getCenter(),q,r,s;for(q=n.min.y;q<=n.max.y;q++)for(r=n.min.x;r<=n.max.x;r++){s=new k.Point(r,q);if(this._tileShouldBeLoaded(s))o.push(s);}var t=o.length;if(t===0)return;o.sort(function(v,w){return v.distanceTo(p)-w.distanceTo(p);});var u=h.createDocumentFragment();if(!this._tilesToLoad)this.fire('loading');this._tilesToLoad+=t;for(r=0;r<t;r++)this._addTile(o[r],u);this._tileContainer.appendChild(u);},_tileShouldBeLoaded:function(n){if((n.x+':'+n.y) in this._tiles)return false;var o=this.options;if(!o.continuousWorld){var p=this._getWrapTileNum();if((o.noWrap&&(n.x<0||n.x>=p.x))||n.y<0||n.y>=p.y)return false;}if(o.bounds){var q=o.tileSize,r=n.multiplyBy(q),s=r.add([q,q]),t=this._map.unproject(r),u=this._map.unproject(s);if(!o.continuousWorld&&!o.noWrap){t=t.wrap();u=u.wrap();}if(!o.bounds.intersects([t,u]))return false;}return true;},_removeOtherTiles:function(n){var o,p,q,r;for(r in this._tiles){o=r.split(':');p=parseInt(o[0],10);q=parseInt(o[1],10);if(p<n.min.x||p>n.max.x||q<n.min.y||q>n.max.y)this._removeTile(r);}},_removeTile:function(n){var o=this._tiles[n];this.fire('tileunload',{tile:o,url:o.src});if(this.options.reuseTiles){k.DomUtil.removeClass(o,'leaflet-tile-loaded');this._unusedTiles.push(o);}else if(o.parentNode===this._tileContainer)this._tileContainer.removeChild(o);if(!k.Browser.android){o.onload=null;o.src=k.Util.emptyImageUrl;}delete this._tiles[n];},_addTile:function(n,o){var p=this._getTilePos(n),q=this._getTile();k.DomUtil.setPosition(q,p,k.Browser.chrome);this._tiles[n.x+':'+n.y]=q;this._loadTile(q,n);if(q.parentNode!==this._tileContainer)o.appendChild(q);},_getZoomForUrl:function(){var n=this.options,o=this._map.getZoom();if(n.zoomReverse)o=n.maxZoom-o;o+=n.zoomOffset;return n.maxNativeZoom?Math.min(o,n.maxNativeZoom):o;},_getTilePos:function(n){var o=this._map.getPixelOrigin(),p=this._getTileSize();return n.multiplyBy(p).subtract(o);},getTileUrl:function(n){return k.Util.template(this._url,k.extend({s:this._getSubdomain(n),z:n.z,x:n.x,y:n.y},this.options));},_getWrapTileNum:function(){var n=this._map.options.crs,o=n.getSize(this._map.getZoom());return o.divideBy(this._getTileSize())._floor();},_adjustTilePoint:function(n){var o=this._getWrapTileNum();if(!this.options.continuousWorld&&!this.options.noWrap)n.x=((n.x%o.x)+o.x)%o.x;if(this.options.tms)n.y=o.y-n.y-1;n.z=this._getZoomForUrl();},_getSubdomain:function(n){var o=Math.abs(n.x+n.y)%this.options.subdomains.length;return this.options.subdomains[o];},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var n=this._unusedTiles.pop();this._resetTile(n);return n;}return this._createTile();},_resetTile:function(){},_createTile:function(){var n=k.DomUtil.create('img','leaflet-tile');n.style.width=n.style.height=this._getTileSize()+'px';n.galleryimg='no';n.onselectstart=n.onmousemove=k.Util.falseFn;if(k.Browser.ielt9&&this.options.opacity!==i)k.DomUtil.setOpacity(n,this.options.opacity);if(k.Browser.mobileWebkit3d)n.style.WebkitBackfaceVisibility='hidden';return n;},_loadTile:function(n,o){n._layer=this;n.onload=this._tileOnLoad;n.onerror=this._tileOnError;this._adjustTilePoint(o);n.src=this.getTileUrl(o);this.fire('tileloadstart',{tile:n,url:n.src});},_tileLoaded:function(){this._tilesToLoad--;if(this._animated)k.DomUtil.addClass(this._tileContainer,'leaflet-zoom-animated');if(!this._tilesToLoad){this.fire('load');if(this._animated){clearTimeout(this._clearBgBufferTimer);this._clearBgBufferTimer=setTimeout(k.bind(this._clearBgBuffer,this),500);}}},_tileOnLoad:function(){var n=this._layer;if(this.src!==k.Util.emptyImageUrl){k.DomUtil.addClass(this,'leaflet-tile-loaded');n.fire('tileload',{tile:this,url:this.src});}n._tileLoaded();},_tileOnError:function(){var n=this._layer;n.fire('tileerror',{tile:this,url:this.src});var o=n.options.errorTileUrl;if(o)this.src=o;n._tileLoaded();}});k.tileLayer=function(n,o){return new k.TileLayer(n,o);};k.TileLayer.WMS=k.TileLayer.extend({defaultWmsParams:{service:'WMS',request:'GetMap',version:'1.1.1',layers:'',styles:'',format:'image/jpeg',transparent:false},initialize:function(n,o){this._url=n;var p=k.extend({},this.defaultWmsParams),q=o.tileSize||this.options.tileSize;if(o.detectRetina&&k.Browser.retina){p.width=p.height=q*2;}else p.width=p.height=q;for(var r in o)if(!this.options.hasOwnProperty(r)&&r!=='crs')p[r]=o[r];this.wmsParams=p;k.setOptions(this,o);},onAdd:function(n){this._crs=this.options.crs||n.options.crs;this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?'crs':'srs';this.wmsParams[o]=this._crs.code;k.TileLayer.prototype.onAdd.call(this,n);},getTileUrl:function(n){var o=this._map,p=this.options.tileSize,q=n.multiplyBy(p),r=q.add([p,p]),s=this._crs.project(o.unproject(q,n.z)),t=this._crs.project(o.unproject(r,n.z)),u=this._wmsVersion>=1.3&&this._crs===k.CRS.EPSG4326?[t.y,s.x,s.y,t.x].join(','):[s.x,t.y,t.x,s.y].join(','),v=k.Util.template(this._url,{s:this._getSubdomain(n)});return v+k.Util.getParamString(this.wmsParams,v,true)+'&BBOX='+u;},setParams:function(n,o){k.extend(this.wmsParams,n);if(!o)this.redraw();return this;}});k.tileLayer.wms=function(n,o){return new k.TileLayer.WMS(n,o);};k.TileLayer.Canvas=k.TileLayer.extend({options:{async:false},initialize:function(n){k.setOptions(this,n);},redraw:function(){if(this._map){this._reset({hard:true});this._update();}for(var n in this._tiles)this._redrawTile(this._tiles[n]);return this;},_redrawTile:function(n){this.drawTile(n,n._tilePoint,this._map._zoom);},_createTile:function(){var n=k.DomUtil.create('canvas','leaflet-tile');n.width=n.height=this.options.tileSize;n.onselectstart=n.onmousemove=k.Util.falseFn;return n;},_loadTile:function(n,o){n._layer=this;n._tilePoint=o;this._redrawTile(n);if(!this.options.async)this.tileDrawn(n);},drawTile:function(){},tileDrawn:function(n){this._tileOnLoad.call(n);}});k.tileLayer.canvas=function(n){return new k.TileLayer.Canvas(n);};k.ImageOverlay=k.Class.extend({includes:k.Mixin.Events,options:{opacity:1},initialize:function(n,o,p){this._url=n;this._bounds=k.latLngBounds(o);k.setOptions(this,p);},onAdd:function(n){this._map=n;if(!this._image)this._initImage();n._panes.overlayPane.appendChild(this._image);n.on('viewreset',this._reset,this);if(n.options.zoomAnimation&&k.Browser.any3d)n.on('zoomanim',this._animateZoom,this);this._reset();},onRemove:function(n){n.getPanes().overlayPane.removeChild(this._image);n.off('viewreset',this._reset,this);if(n.options.zoomAnimation)n.off('zoomanim',this._animateZoom,this);},addTo:function(n){n.addLayer(this);return this;},setOpacity:function(n){this.options.opacity=n;this._updateOpacity();return this;},bringToFront:function(){if(this._image)this._map._panes.overlayPane.appendChild(this._image);return this;},bringToBack:function(){var n=this._map._panes.overlayPane;if(this._image)n.insertBefore(this._image,n.firstChild);return this;},setUrl:function(n){this._url=n;this._image.src=this._url;},getAttribution:function(){return this.options.attribution;},_initImage:function(){this._image=k.DomUtil.create('img','leaflet-image-layer');if(this._map.options.zoomAnimation&&k.Browser.any3d){k.DomUtil.addClass(this._image,'leaflet-zoom-animated');}else k.DomUtil.addClass(this._image,'leaflet-zoom-hide');this._updateOpacity();k.extend(this._image,{galleryimg:'no',onselectstart:k.Util.falseFn,onmousemove:k.Util.falseFn,onload:k.bind(this._onImageLoad,this),src:this._url});},_animateZoom:function(n){var o=this._map,p=this._image,q=o.getZoomScale(n.zoom),r=this._bounds.getNorthWest(),s=this._bounds.getSouthEast(),t=o._latLngToNewLayerPoint(r,n.zoom,n.center),u=o._latLngToNewLayerPoint(s,n.zoom,n.center)._subtract(t),v=t._add(u._multiplyBy((1/2)*(1-1/q)));p.style[k.DomUtil.TRANSFORM]=k.DomUtil.getTranslateString(v)+' scale('+q+') ';},_reset:function(){var n=this._image,o=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),p=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(o);k.DomUtil.setPosition(n,o);n.style.width=p.x+'px';n.style.height=p.y+'px';},_onImageLoad:function(){this.fire('load');},_updateOpacity:function(){k.DomUtil.setOpacity(this._image,this.options.opacity);}});k.imageOverlay=function(n,o,p){return new k.ImageOverlay(n,o,p);};k.Icon=k.Class.extend({options:{className:''},initialize:function(n){k.setOptions(this,n);},createIcon:function(n){return this._createIcon('icon',n);},createShadow:function(n){return this._createIcon('shadow',n);},_createIcon:function(n,o){var p=this._getIconUrl(n);if(!p){if(n==='icon')throw new Error('iconUrl not set in Icon options (see the docs).');return null;}var q;if(!o||o.tagName!=='IMG'){q=this._createImg(p);}else q=this._createImg(p,o);this._setIconStyles(q,n);return q;},_setIconStyles:function(n,o){var p=this.options,q=k.point(p[o+'Size']),r;if(o==='shadow'){r=k.point(p.shadowAnchor||p.iconAnchor);}else r=k.point(p.iconAnchor);if(!r&&q)r=q.divideBy(2,true);n.className='leaflet-marker-'+o+' '+p.className;if(r){n.style.marginLeft=(-r.x)+'px';n.style.marginTop=(-r.y)+'px';}if(q){n.style.width=q.x+'px';n.style.height=q.y+'px';}},_createImg:function(n,o){o=o||h.createElement('img');o.src=n;return o;},_getIconUrl:function(n){if(k.Browser.retina&&this.options[n+'RetinaUrl'])return this.options[n+'RetinaUrl'];return this.options[n+'Url'];}});k.icon=function(n){return new k.Icon(n);};k.Icon.Default=k.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(n){var o=n+'Url';if(this.options[o])return this.options[o];if(k.Browser.retina&&n==='icon')n+='-2x';var p=k.Icon.Default.imagePath;if(!p)throw new Error('Couldn\'t autodetect L.Icon.Default.imagePath, set it manually.');return p+'/marker-'+n+'.png';}});k.Icon.Default.imagePath=(function(){var n=h.getElementsByTagName('script'),o=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/,p,q,r,s,t;for(p=0,q=n.length;p<q;p++){r=n[p].src;s=r.match(o);if(s){t=r.split(o)[0];return (t?t+'/':'')+'images';}}}());k.Marker=k.Class.extend({includes:k.Mixin.Events,options:{icon:new k.Icon.Default(),title:'',alt:'',clickable:true,draggable:false,keyboard:true,zIndexOffset:0,opacity:1,riseOnHover:false,riseOffset:250},initialize:function(n,o){k.setOptions(this,o);this._latlng=k.latLng(n);},onAdd:function(n){this._map=n;n.on('viewreset',this.update,this);this._initIcon();this.update();this.fire('add');if(n.options.zoomAnimation&&n.options.markerZoomAnimation)n.on('zoomanim',this._animateZoom,this);},addTo:function(n){n.addLayer(this);return this;},onRemove:function(n){if(this.dragging)this.dragging.disable();this._removeIcon();this._removeShadow();this.fire('remove');n.off({viewreset:this.update,zoomanim:this._animateZoom},this);this._map=null;},getLatLng:function(){return this._latlng;},setLatLng:function(n){this._latlng=k.latLng(n);this.update();return this.fire('move',{latlng:this._latlng});},setZIndexOffset:function(n){this.options.zIndexOffset=n;this.update();return this;},setIcon:function(n){this.options.icon=n;if(this._map){this._initIcon();this.update();}if(this._popup)this.bindPopup(this._popup);return this;},update:function(){if(this._icon){var n=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(n);}return this;},_initIcon:function(){var n=this.options,o=this._map,p=(o.options.zoomAnimation&&o.options.markerZoomAnimation),q=p?'leaflet-zoom-animated':'leaflet-zoom-hide',r=n.icon.createIcon(this._icon),s=false;if(r!==this._icon){if(this._icon)this._removeIcon();s=true;if(n.title)r.title=n.title;if(n.alt)r.alt=n.alt;}k.DomUtil.addClass(r,q);if(n.keyboard)r.tabIndex='0';this._icon=r;this._initInteraction();if(n.riseOnHover)k.DomEvent.on(r,'mouseover',this._bringToFront,this).on(r,'mouseout',this._resetZIndex,this);var t=n.icon.createShadow(this._shadow),u=false;if(t!==this._shadow){this._removeShadow();u=true;}if(t)k.DomUtil.addClass(t,q);this._shadow=t;if(n.opacity<1)this._updateOpacity();var v=this._map._panes;if(s)v.markerPane.appendChild(this._icon);if(t&&u)v.shadowPane.appendChild(this._shadow);},_removeIcon:function(){if(this.options.riseOnHover)k.DomEvent.off(this._icon,'mouseover',this._bringToFront).off(this._icon,'mouseout',this._resetZIndex);this._map._panes.markerPane.removeChild(this._icon);this._icon=null;},_removeShadow:function(){if(this._shadow)this._map._panes.shadowPane.removeChild(this._shadow);this._shadow=null;},_setPos:function(n){k.DomUtil.setPosition(this._icon,n);if(this._shadow)k.DomUtil.setPosition(this._shadow,n);this._zIndex=n.y+this.options.zIndexOffset;this._resetZIndex();},_updateZIndex:function(n){this._icon.style.zIndex=this._zIndex+n;},_animateZoom:function(n){var o=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center).round();this._setPos(o);},_initInteraction:function(){if(!this.options.clickable)return;var n=this._icon,o=['dblclick','mousedown','mouseover','mouseout','contextmenu'];k.DomUtil.addClass(n,'leaflet-clickable');k.DomEvent.on(n,'click',this._onMouseClick,this);k.DomEvent.on(n,'keypress',this._onKeyPress,this);for(var p=0;p<o.length;p++)k.DomEvent.on(n,o[p],this._fireMouseEvent,this);if(k.Handler.MarkerDrag){this.dragging=new k.Handler.MarkerDrag(this);if(this.options.draggable)this.dragging.enable();}},_onMouseClick:function(n){var o=this.dragging&&this.dragging.moved();if(this.hasEventListeners(n.type)||o)k.DomEvent.stopPropagation(n);if(o)return;if((!this.dragging||!this.dragging._enabled)&&this._map.dragging&&this._map.dragging.moved())return;this.fire(n.type,{originalEvent:n,latlng:this._latlng});},_onKeyPress:function(n){if(n.keyCode===13)this.fire('click',{originalEvent:n,latlng:this._latlng});},_fireMouseEvent:function(n){this.fire(n.type,{originalEvent:n,latlng:this._latlng});if(n.type==='contextmenu'&&this.hasEventListeners(n.type))k.DomEvent.preventDefault(n);if(n.type!=='mousedown'){k.DomEvent.stopPropagation(n);}else k.DomEvent.preventDefault(n);},setOpacity:function(n){this.options.opacity=n;if(this._map)this._updateOpacity();return this;},_updateOpacity:function(){k.DomUtil.setOpacity(this._icon,this.options.opacity);if(this._shadow)k.DomUtil.setOpacity(this._shadow,this.options.opacity);},_bringToFront:function(){this._updateZIndex(this.options.riseOffset);},_resetZIndex:function(){this._updateZIndex(0);}});k.marker=function(n,o){return new k.Marker(n,o);};k.DivIcon=k.Icon.extend({options:{iconSize:[12,12],className:'leaflet-div-icon',html:false},createIcon:function(n){var o=(n&&n.tagName==='DIV')?n:h.createElement('div'),p=this.options;if(p.html!==false){o.innerHTML=p.html;}else o.innerHTML='';if(p.bgPos)o.style.backgroundPosition=(-p.bgPos.x)+'px '+(-p.bgPos.y)+'px';this._setIconStyles(o,'icon');return o;},createShadow:function(){return null;}});k.divIcon=function(n){return new k.DivIcon(n);};k.Map.mergeOptions({closePopupOnClick:true});k.Popup=k.Class.extend({includes:k.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:true,closeButton:true,offset:[0,7],autoPanPadding:[5,5],keepInView:false,className:'',zoomAnimation:true},initialize:function(n,o){k.setOptions(this,n);this._source=o;this._animated=k.Browser.any3d&&this.options.zoomAnimation;this._isOpen=false;},onAdd:function(n){this._map=n;if(!this._container)this._initLayout();var o=n.options.fadeAnimation;if(o)k.DomUtil.setOpacity(this._container,0);n._panes.popupPane.appendChild(this._container);n.on(this._getEvents(),this);this.update();if(o)k.DomUtil.setOpacity(this._container,1);this.fire('open');n.fire('popupopen',{popup:this});if(this._source)this._source.fire('popupopen',{popup:this});},addTo:function(n){n.addLayer(this);return this;},openOn:function(n){n.openPopup(this);return this;},onRemove:function(n){n._panes.popupPane.removeChild(this._container);k.Util.falseFn(this._container.offsetWidth);n.off(this._getEvents(),this);if(n.options.fadeAnimation)k.DomUtil.setOpacity(this._container,0);this._map=null;this.fire('close');n.fire('popupclose',{popup:this});if(this._source)this._source.fire('popupclose',{popup:this});},getLatLng:function(){return this._latlng;},setLatLng:function(n){this._latlng=k.latLng(n);if(this._map){this._updatePosition();this._adjustPan();}return this;},getContent:function(){return this._content;},setContent:function(n){this._content=n;this.update();return this;},update:function(){if(!this._map)return;this._container.style.visibility='hidden';this._updateContent();this._updateLayout();this._updatePosition();this._container.style.visibility='';this._adjustPan();},_getEvents:function(){var n={viewreset:this._updatePosition};if(this._animated)n.zoomanim=this._zoomAnimation;if('closeOnClick' in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)n.preclick=this._close;if(this.options.keepInView)n.moveend=this._adjustPan;return n;},_close:function(){if(this._map)this._map.closePopup(this);},_initLayout:function(){var n='leaflet-popup',o=n+' '+this.options.className+' leaflet-zoom-'+(this._animated?'animated':'hide'),p=this._container=k.DomUtil.create('div',o),q;if(this.options.closeButton){q=this._closeButton=k.DomUtil.create('a',n+'-close-button',p);q.href='#close';q.innerHTML='&#215;';k.DomEvent.disableClickPropagation(q);k.DomEvent.on(q,'click',this._onCloseButtonClick,this);}var r=this._wrapper=k.DomUtil.create('div',n+'-content-wrapper',p);k.DomEvent.disableClickPropagation(r);this._contentNode=k.DomUtil.create('div',n+'-content',r);k.DomEvent.disableScrollPropagation(this._contentNode);k.DomEvent.on(r,'contextmenu',k.DomEvent.stopPropagation);this._tipContainer=k.DomUtil.create('div',n+'-tip-container',p);this._tip=k.DomUtil.create('div',n+'-tip',this._tipContainer);},_updateContent:function(){if(!this._content)return;if(typeof this._content==='string'){this._contentNode.innerHTML=this._content;}else{while(this._contentNode.hasChildNodes())this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content);}this.fire('contentupdate');},_updateLayout:function(){var n=this._contentNode,o=n.style;o.width='';o.whiteSpace='nowrap';var p=n.offsetWidth;p=Math.min(p,this.options.maxWidth);p=Math.max(p,this.options.minWidth);o.width=(p+1)+'px';o.whiteSpace='';o.height='';var q=n.offsetHeight,r=this.options.maxHeight,s='leaflet-popup-scrolled';if(r&&q>r){o.height=r+'px';k.DomUtil.addClass(n,s);}else k.DomUtil.removeClass(n,s);this._containerWidth=this._container.offsetWidth;},_updatePosition:function(){if(!this._map)return;var n=this._map.latLngToLayerPoint(this._latlng),o=this._animated,p=k.point(this.options.offset);if(o)k.DomUtil.setPosition(this._container,n);this._containerBottom=-p.y-(o?0:n.y);this._containerLeft=-Math.round(this._containerWidth/2)+p.x+(o?0:n.x);this._container.style.bottom=this._containerBottom+'px';this._container.style.left=this._containerLeft+'px';},_zoomAnimation:function(n){var o=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center);k.DomUtil.setPosition(this._container,o);},_adjustPan:function(){if(!this.options.autoPan)return;var n=this._map,o=this._container.offsetHeight,p=this._containerWidth,q=new k.Point(this._containerLeft,-o-this._containerBottom);if(this._animated)q._add(k.DomUtil.getPosition(this._container));var r=n.layerPointToContainerPoint(q),s=k.point(this.options.autoPanPadding),t=k.point(this.options.autoPanPaddingTopLeft||s),u=k.point(this.options.autoPanPaddingBottomRight||s),v=n.getSize(),w=0,x=0;if(r.x+p+u.x>v.x)w=r.x+p-v.x+u.x;if(r.x-w-t.x<0)w=r.x-t.x;if(r.y+o+u.y>v.y)x=r.y+o-v.y+u.y;if(r.y-x-t.y<0)x=r.y-t.y;if(w||x)n.fire('autopanstart').panBy([w,x]);},_onCloseButtonClick:function(n){this._close();k.DomEvent.stop(n);}});k.popup=function(n,o){return new k.Popup(n,o);};k.Map.include({openPopup:function(n,o,p){this.closePopup();if(!(n instanceof k.Popup)){var q=n;n=new k.Popup(p).setLatLng(o).setContent(q);}n._isOpen=true;this._popup=n;return this.addLayer(n);},closePopup:function(n){if(!n||n===this._popup){n=this._popup;this._popup=null;}if(n){this.removeLayer(n);n._isOpen=false;}return this;}});k.Marker.include({openPopup:function(){if(this._popup&&this._map&&!this._map.hasLayer(this._popup)){this._popup.setLatLng(this._latlng);this._map.openPopup(this._popup);}return this;},closePopup:function(){if(this._popup)this._popup._close();return this;},togglePopup:function(){if(this._popup)if(this._popup._isOpen){this.closePopup();}else this.openPopup();return this;},bindPopup:function(n,o){var p=k.point(this.options.icon.options.popupAnchor||[0,0]);p=p.add(k.Popup.prototype.options.offset);if(o&&o.offset)p=p.add(o.offset);o=k.extend({offset:p},o);if(!this._popupHandlersAdded){this.on('click',this.togglePopup,this).on('remove',this.closePopup,this).on('move',this._movePopup,this);this._popupHandlersAdded=true;}if(n instanceof k.Popup){k.setOptions(n,o);this._popup=n;}else this._popup=new k.Popup(o,this).setContent(n);return this;},setPopupContent:function(n){if(this._popup)this._popup.setContent(n);return this;},unbindPopup:function(){if(this._popup){this._popup=null;this.off('click',this.togglePopup,this).off('remove',this.closePopup,this).off('move',this._movePopup,this);this._popupHandlersAdded=false;}return this;},getPopup:function(){return this._popup;},_movePopup:function(n){this._popup.setLatLng(n.latlng);}});k.LayerGroup=k.Class.extend({initialize:function(n){this._layers={};var o,p;if(n)for(o=0,p=n.length;o<p;o++)this.addLayer(n[o]);},addLayer:function(n){var o=this.getLayerId(n);this._layers[o]=n;if(this._map)this._map.addLayer(n);return this;},removeLayer:function(n){var o=n in this._layers?n:this.getLayerId(n);if(this._map&&this._layers[o])this._map.removeLayer(this._layers[o]);delete this._layers[o];return this;},hasLayer:function(n){if(!n)return false;return (n in this._layers||this.getLayerId(n) in this._layers);},clearLayers:function(){this.eachLayer(this.removeLayer,this);return this;},invoke:function(n){var o=Array.prototype.slice.call(arguments,1),p,q;for(p in this._layers){q=this._layers[p];if(q[n])q[n].apply(q,o);}return this;},onAdd:function(n){this._map=n;this.eachLayer(n.addLayer,n);},onRemove:function(n){this.eachLayer(n.removeLayer,n);this._map=null;},addTo:function(n){n.addLayer(this);return this;},eachLayer:function(n,o){for(var p in this._layers)n.call(o,this._layers[p]);return this;},getLayer:function(n){return this._layers[n];},getLayers:function(){var n=[];for(var o in this._layers)n.push(this._layers[o]);return n;},setZIndex:function(n){return this.invoke('setZIndex',n);},getLayerId:function(n){return k.stamp(n);}});k.layerGroup=function(n){return new k.LayerGroup(n);};k.FeatureGroup=k.LayerGroup.extend({includes:k.Mixin.Events,statics:{EVENTS:'click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose'},addLayer:function(n){if(this.hasLayer(n))return this;if('on' in n)n.on(k.FeatureGroup.EVENTS,this._propagateEvent,this);k.LayerGroup.prototype.addLayer.call(this,n);if(this._popupContent&&n.bindPopup)n.bindPopup(this._popupContent,this._popupOptions);return this.fire('layeradd',{layer:n});},removeLayer:function(n){if(!this.hasLayer(n))return this;if(n in this._layers)n=this._layers[n];n.off(k.FeatureGroup.EVENTS,this._propagateEvent,this);k.LayerGroup.prototype.removeLayer.call(this,n);if(this._popupContent)this.invoke('unbindPopup');return this.fire('layerremove',{layer:n});},bindPopup:function(n,o){this._popupContent=n;this._popupOptions=o;return this.invoke('bindPopup',n,o);},openPopup:function(n){for(var o in this._layers){this._layers[o].openPopup(n);break;}return this;},setStyle:function(n){return this.invoke('setStyle',n);},bringToFront:function(){return this.invoke('bringToFront');},bringToBack:function(){return this.invoke('bringToBack');},getBounds:function(){var n=new k.LatLngBounds();this.eachLayer(function(o){n.extend(o instanceof k.Marker?o.getLatLng():o.getBounds());});return n;},_propagateEvent:function(n){n=k.extend({layer:n.target,target:this},n);this.fire(n.type,n);}});k.featureGroup=function(n){return new k.FeatureGroup(n);};k.Path=k.Class.extend({includes:[k.Mixin.Events],statics:{CLIP_PADDING:(function(){var n=k.Browser.mobile?1280:2000,o=(n/Math.max(g.outerWidth,g.outerHeight)-1)/2;return Math.max(0,Math.min(.5,o));})()},options:{stroke:true,color:'#0033ff',dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:false,fillColor:null,fillOpacity:.2,clickable:true},initialize:function(n){k.setOptions(this,n);},onAdd:function(n){this._map=n;if(!this._container){this._initElements();this._initEvents();}this.projectLatlngs();this._updatePath();if(this._container)this._map._pathRoot.appendChild(this._container);this.fire('add');n.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this);},addTo:function(n){n.addLayer(this);return this;},onRemove:function(n){n._pathRoot.removeChild(this._container);this.fire('remove');this._map=null;if(k.Browser.vml){this._container=null;this._stroke=null;this._fill=null;}n.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this);},projectLatlngs:function(){},setStyle:function(n){k.setOptions(this,n);if(this._container)this._updateStyle();return this;},redraw:function(){if(this._map){this.projectLatlngs();this._updatePath();}return this;}});k.Map.include({_updatePathViewport:function(){var n=k.Path.CLIP_PADDING,o=this.getSize(),p=k.DomUtil.getPosition(this._mapPane),q=p.multiplyBy(-1)._subtract(o.multiplyBy(n)._round()),r=q.add(o.multiplyBy(1+n*2)._round());this._pathViewport=new k.Bounds(q,r);}});k.Path.SVG_NS='http://www.w3.org/2000/svg';k.Browser.svg=!!(h.createElementNS&&h.createElementNS(k.Path.SVG_NS,'svg').createSVGRect);k.Path=k.Path.extend({statics:{SVG:k.Browser.svg},bringToFront:function(){var n=this._map._pathRoot,o=this._container;if(o&&n.lastChild!==o)n.appendChild(o);return this;},bringToBack:function(){var n=this._map._pathRoot,o=this._container,p=n.firstChild;if(o&&p!==o)n.insertBefore(o,p);return this;},getPathString:function(){},_createElement:function(n){return h.createElementNS(k.Path.SVG_NS,n);},_initElements:function(){this._map._initPathRoot();this._initPath();this._initStyle();},_initPath:function(){this._container=this._createElement('g');this._path=this._createElement('path');if(this.options.className)k.DomUtil.addClass(this._path,this.options.className);this._container.appendChild(this._path);},_initStyle:function(){if(this.options.stroke){this._path.setAttribute('stroke-linejoin','round');this._path.setAttribute('stroke-linecap','round');}if(this.options.fill)this._path.setAttribute('fill-rule','evenodd');if(this.options.pointerEvents)this._path.setAttribute('pointer-events',this.options.pointerEvents);if(!this.options.clickable&&!this.options.pointerEvents)this._path.setAttribute('pointer-events','none');this._updateStyle();},_updateStyle:function(){if(this.options.stroke){this._path.setAttribute('stroke',this.options.color);this._path.setAttribute('stroke-opacity',this.options.opacity);this._path.setAttribute('stroke-width',this.options.weight);if(this.options.dashArray){this._path.setAttribute('stroke-dasharray',this.options.dashArray);}else this._path.removeAttribute('stroke-dasharray');if(this.options.lineCap)this._path.setAttribute('stroke-linecap',this.options.lineCap);if(this.options.lineJoin)this._path.setAttribute('stroke-linejoin',this.options.lineJoin);}else this._path.setAttribute('stroke','none');if(this.options.fill){this._path.setAttribute('fill',this.options.fillColor||this.options.color);this._path.setAttribute('fill-opacity',this.options.fillOpacity);}else this._path.setAttribute('fill','none');},_updatePath:function(){var n=this.getPathString();if(!n)n='M0 0';this._path.setAttribute('d',n);},_initEvents:function(){if(this.options.clickable){if(k.Browser.svg||!k.Browser.vml)k.DomUtil.addClass(this._path,'leaflet-clickable');k.DomEvent.on(this._container,'click',this._onMouseClick,this);var n=['dblclick','mousedown','mouseover','mouseout','mousemove','contextmenu'];for(var o=0;o<n.length;o++)k.DomEvent.on(this._container,n[o],this._fireMouseEvent,this);}},_onMouseClick:function(n){if(this._map.dragging&&this._map.dragging.moved())return;this._fireMouseEvent(n);},_fireMouseEvent:function(n){if(!this.hasEventListeners(n.type))return;var o=this._map,p=o.mouseEventToContainerPoint(n),q=o.containerPointToLayerPoint(p),r=o.layerPointToLatLng(q);this.fire(n.type,{latlng:r,layerPoint:q,containerPoint:p,originalEvent:n});if(n.type==='contextmenu')k.DomEvent.preventDefault(n);if(n.type!=='mousemove')k.DomEvent.stopPropagation(n);}});k.Map.include({_initPathRoot:function(){if(!this._pathRoot){this._pathRoot=k.Path.prototype._createElement('svg');this._panes.overlayPane.appendChild(this._pathRoot);if(this.options.zoomAnimation&&k.Browser.any3d){k.DomUtil.addClass(this._pathRoot,'leaflet-zoom-animated');this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom});}else k.DomUtil.addClass(this._pathRoot,'leaflet-zoom-hide');this.on('moveend',this._updateSvgViewport);this._updateSvgViewport();}},_animatePathZoom:function(n){var o=this.getZoomScale(n.zoom),p=this._getCenterOffset(n.center)._multiplyBy(-o)._add(this._pathViewport.min);this._pathRoot.style[k.DomUtil.TRANSFORM]=k.DomUtil.getTranslateString(p)+' scale('+o+') ';this._pathZooming=true;},_endPathZoom:function(){this._pathZooming=false;},_updateSvgViewport:function(){if(this._pathZooming)return;this._updatePathViewport();var n=this._pathViewport,o=n.min,p=n.max,q=p.x-o.x,r=p.y-o.y,s=this._pathRoot,t=this._panes.overlayPane;if(k.Browser.mobileWebkit)t.removeChild(s);k.DomUtil.setPosition(s,o);s.setAttribute('width',q);s.setAttribute('height',r);s.setAttribute('viewBox',[o.x,o.y,q,r].join(' '));if(k.Browser.mobileWebkit)t.appendChild(s);}});k.Path.include({bindPopup:function(n,o){if(n instanceof k.Popup){this._popup=n;}else{if(!this._popup||o)this._popup=new k.Popup(o,this);this._popup.setContent(n);}if(!this._popupHandlersAdded){this.on('click',this._openPopup,this).on('remove',this.closePopup,this);this._popupHandlersAdded=true;}return this;},unbindPopup:function(){if(this._popup){this._popup=null;this.off('click',this._openPopup).off('remove',this.closePopup);this._popupHandlersAdded=false;}return this;},openPopup:function(n){if(this._popup){n=n||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)];this._openPopup({latlng:n});}return this;},closePopup:function(){if(this._popup)this._popup._close();return this;},_openPopup:function(n){this._popup.setLatLng(n.latlng);this._map.openPopup(this._popup);}});k.Browser.vml=!k.Browser.svg&&(function(){try{var o=h.createElement('div');o.innerHTML='<v:shape adj="1"/>';var p=o.firstChild;p.style.behavior='url(#default#VML)';return p&&(typeof p.adj==='object');}catch(n){return false;}}());k.Path=k.Browser.svg||!k.Browser.vml?k.Path:k.Path.extend({statics:{VML:true,CLIP_PADDING:.02},_createElement:(function(){try{h.namespaces.add('lvml','urn:schemas-microsoft-com:vml');return function(o){return h.createElement('<lvml:'+o+' class="lvml">');};}catch(n){return function(o){return h.createElement('<'+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">');};}}()),_initPath:function(){var n=this._container=this._createElement('shape');k.DomUtil.addClass(n,'leaflet-vml-shape'+(this.options.className?' '+this.options.className:''));if(this.options.clickable)k.DomUtil.addClass(n,'leaflet-clickable');n.coordsize='1 1';this._path=this._createElement('path');n.appendChild(this._path);this._map._pathRoot.appendChild(n);},_initStyle:function(){this._updateStyle();},_updateStyle:function(){var n=this._stroke,o=this._fill,p=this.options,q=this._container;q.stroked=p.stroke;q.filled=p.fill;if(p.stroke){if(!n){n=this._stroke=this._createElement('stroke');n.endcap='round';q.appendChild(n);}n.weight=p.weight+'px';n.color=p.color;n.opacity=p.opacity;if(p.dashArray){n.dashStyle=k.Util.isArray(p.dashArray)?p.dashArray.join(' '):p.dashArray.replace(/( *, *)/g,' ');}else n.dashStyle='';if(p.lineCap)n.endcap=p.lineCap.replace('butt','flat');if(p.lineJoin)n.joinstyle=p.lineJoin;}else if(n){q.removeChild(n);this._stroke=null;}if(p.fill){if(!o){o=this._fill=this._createElement('fill');q.appendChild(o);}o.color=p.fillColor||p.color;o.opacity=p.fillOpacity;}else if(o){q.removeChild(o);this._fill=null;}},_updatePath:function(){var n=this._container.style;n.display='none';this._path.v=this.getPathString()+' ';n.display='';}});k.Map.include(k.Browser.svg||!k.Browser.vml?{}:{_initPathRoot:function(){if(this._pathRoot)return;var n=this._pathRoot=h.createElement('div');n.className='leaflet-vml-container';this._panes.overlayPane.appendChild(n);this.on('moveend',this._updatePathViewport);this._updatePathViewport();}});k.Browser.canvas=(function(){return !!h.createElement('canvas').getContext;}());k.Path=(k.Path.SVG&&!g.L_PREFER_CANVAS)||!k.Browser.canvas?k.Path:k.Path.extend({statics:{CANVAS:true,SVG:false},redraw:function(){if(this._map){this.projectLatlngs();this._requestUpdate();}return this;},setStyle:function(n){k.setOptions(this,n);if(this._map){this._updateStyle();this._requestUpdate();}return this;},onRemove:function(n){n.off('viewreset',this.projectLatlngs,this).off('moveend',this._updatePath,this);if(this.options.clickable){this._map.off('click',this._onClick,this);this._map.off('mousemove',this._onMouseMove,this);}this._requestUpdate();this._map=null;},_requestUpdate:function(){if(this._map&&!k.Path._updateRequest)k.Path._updateRequest=k.Util.requestAnimFrame(this._fireMapMoveEnd,this._map);},_fireMapMoveEnd:function(){k.Path._updateRequest=null;this.fire('moveend');},_initElements:function(){this._map._initPathRoot();this._ctx=this._map._canvasCtx;},_updateStyle:function(){var n=this.options;if(n.stroke){this._ctx.lineWidth=n.weight;this._ctx.strokeStyle=n.color;}if(n.fill)this._ctx.fillStyle=n.fillColor||n.color;},_drawPath:function(){var n,o,p,q,r,s;this._ctx.beginPath();for(n=0,p=this._parts.length;n<p;n++){for(o=0,q=this._parts[n].length;o<q;o++){r=this._parts[n][o];s=(o===0?'move':'line')+'To';this._ctx[s](r.x,r.y);}if(this instanceof k.Polygon)this._ctx.closePath();}},_checkIfEmpty:function(){return !this._parts.length;},_updatePath:function(){if(this._checkIfEmpty())return;var n=this._ctx,o=this.options;this._drawPath();n.save();this._updateStyle();if(o.fill){n.globalAlpha=o.fillOpacity;n.fill();}if(o.stroke){n.globalAlpha=o.opacity;n.stroke();}n.restore();},_initEvents:function(){if(this.options.clickable){this._map.on('mousemove',this._onMouseMove,this);this._map.on('click',this._onClick,this);}},_onClick:function(n){if(this._containsPoint(n.layerPoint))this.fire('click',n);},_onMouseMove:function(n){if(!this._map||this._map._animatingZoom)return;if(this._containsPoint(n.layerPoint)){this._ctx.canvas.style.cursor='pointer';this._mouseInside=true;this.fire('mouseover',n);}else if(this._mouseInside){this._ctx.canvas.style.cursor='';this._mouseInside=false;this.fire('mouseout',n);}}});k.Map.include((k.Path.SVG&&!g.L_PREFER_CANVAS)||!k.Browser.canvas?{}:{_initPathRoot:function(){var n=this._pathRoot,o;if(!n){n=this._pathRoot=h.createElement('canvas');n.style.position='absolute';o=this._canvasCtx=n.getContext('2d');o.lineCap='round';o.lineJoin='round';this._panes.overlayPane.appendChild(n);if(this.options.zoomAnimation){this._pathRoot.className='leaflet-zoom-animated';this.on('zoomanim',this._animatePathZoom);this.on('zoomend',this._endPathZoom);}this.on('moveend',this._updateCanvasViewport);this._updateCanvasViewport();}},_updateCanvasViewport:function(){if(this._pathZooming)return;this._updatePathViewport();var n=this._pathViewport,o=n.min,p=n.max.subtract(o),q=this._pathRoot;k.DomUtil.setPosition(q,o);q.width=p.x;q.height=p.y;q.getContext('2d').translate(-o.x,-o.y);}});k.LineUtil={simplify:function(n,o){if(!o||!n.length)return n.slice();var p=o*o;n=this._reducePoints(n,p);n=this._simplifyDP(n,p);return n;},pointToSegmentDistance:function(n,o,p){return Math.sqrt(this._sqClosestPointOnSegment(n,o,p,true));},closestPointOnSegment:function(n,o,p){return this._sqClosestPointOnSegment(n,o,p);},_simplifyDP:function(n,o){var p=n.length,q=typeof Uint8Array!==i+''?Uint8Array:Array,r=new q(p);r[0]=r[p-1]=1;this._simplifyDPStep(n,r,o,0,p-1);var s,t=[];for(s=0;s<p;s++)if(r[s])t.push(n[s]);return t;},_simplifyDPStep:function(n,o,p,q,r){var s=0,t,u,v;for(u=q+1;u<=r-1;u++){v=this._sqClosestPointOnSegment(n[u],n[q],n[r],true);if(v>s){t=u;s=v;}}if(s>p){o[t]=1;this._simplifyDPStep(n,o,p,q,t);this._simplifyDPStep(n,o,p,t,r);}},_reducePoints:function(n,o){var p=[n[0]];for(var q=1,r=0,s=n.length;q<s;q++)if(this._sqDist(n[q],n[r])>o){p.push(n[q]);r=q;}if(r<s-1)p.push(n[s-1]);return p;},clipSegment:function(n,o,p,q){var r=q?this._lastCode:this._getBitCode(n,p),s=this._getBitCode(o,p),t,u,v;this._lastCode=s;while(true)if(!(r|s)){return [n,o];}else if(r&s){return false;}else{t=r||s;u=this._getEdgeIntersection(n,o,t,p);v=this._getBitCode(u,p);if(t===r){n=u;r=v;}else{o=u;s=v;}}},_getEdgeIntersection:function(n,o,p,q){var r=o.x-n.x,s=o.y-n.y,t=q.min,u=q.max;if(p&8){return new k.Point(n.x+r*(u.y-n.y)/s,u.y);}else if(p&4){return new k.Point(n.x+r*(t.y-n.y)/s,t.y);}else if(p&2){return new k.Point(u.x,n.y+s*(u.x-n.x)/r);}else if(p&1)return new k.Point(t.x,n.y+s*(t.x-n.x)/r);},_getBitCode:function(n,o){var p=0;if(n.x<o.min.x){p|=1;}else if(n.x>o.max.x)p|=2;if(n.y<o.min.y){p|=4;}else if(n.y>o.max.y)p|=8;return p;},_sqDist:function(n,o){var p=o.x-n.x,q=o.y-n.y;return p*p+q*q;},_sqClosestPointOnSegment:function(n,o,p,q){var r=o.x,s=o.y,t=p.x-r,u=p.y-s,v=t*t+u*u,w;if(v>0){w=((n.x-r)*t+(n.y-s)*u)/v;if(w>1){r=p.x;s=p.y;}else if(w>0){r+=t*w;s+=u*w;}}t=n.x-r;u=n.y-s;return q?t*t+u*u:new k.Point(r,s);}};k.Polyline=k.Path.extend({initialize:function(n,o){k.Path.prototype.initialize.call(this,o);this._latlngs=this._convertLatLngs(n);},options:{smoothFactor:1,noClip:false},projectLatlngs:function(){this._originalPoints=[];for(var n=0,o=this._latlngs.length;n<o;n++)this._originalPoints[n]=this._map.latLngToLayerPoint(this._latlngs[n]);},getPathString:function(){for(var n=0,o=this._parts.length,p='';n<o;n++)p+=this._getPathPartStr(this._parts[n]);return p;},getLatLngs:function(){return this._latlngs;},setLatLngs:function(n){this._latlngs=this._convertLatLngs(n);return this.redraw();},addLatLng:function(n){this._latlngs.push(k.latLng(n));return this.redraw();},spliceLatLngs:function(){var n=[].splice.apply(this._latlngs,arguments);this._convertLatLngs(this._latlngs,true);this.redraw();return n;},closestLayerPoint:function(n){var o=Infinity,p=this._parts,q,r,s=null;for(var t=0,u=p.length;t<u;t++){var v=p[t];for(var w=1,x=v.length;w<x;w++){q=v[w-1];r=v[w];var y=k.LineUtil._sqClosestPointOnSegment(n,q,r,true);if(y<o){o=y;s=k.LineUtil._sqClosestPointOnSegment(n,q,r);}}}if(s)s.distance=Math.sqrt(o);return s;},getBounds:function(){return new k.LatLngBounds(this.getLatLngs());},_convertLatLngs:function(n,o){var p,q,r=o?n:[];for(p=0,q=n.length;p<q;p++){if(k.Util.isArray(n[p])&&typeof n[p][0]!=='number')return;r[p]=k.latLng(n[p]);}return r;},_initEvents:function(){k.Path.prototype._initEvents.call(this);},_getPathPartStr:function(n){var o=k.Path.VML;for(var p=0,q=n.length,r='',s;p<q;p++){s=n[p];if(o)s._round();r+=(p?'L':'M')+s.x+' '+s.y;}return r;},_clipPoints:function(){var n=this._originalPoints,o=n.length,p,q,r;if(this.options.noClip){this._parts=[n];return;}this._parts=[];var s=this._parts,t=this._map._pathViewport,u=k.LineUtil;for(p=0,q=0;p<o-1;p++){r=u.clipSegment(n[p],n[p+1],t,p);if(!r)continue;s[q]=s[q]||[];s[q].push(r[0]);if((r[1]!==n[p+1])||(p===o-2)){s[q].push(r[1]);q++;}}},_simplifyPoints:function(){var n=this._parts,o=k.LineUtil;for(var p=0,q=n.length;p<q;p++)n[p]=o.simplify(n[p],this.options.smoothFactor);},_updatePath:function(){if(!this._map)return;this._clipPoints();this._simplifyPoints();k.Path.prototype._updatePath.call(this);}});k.polyline=function(n,o){return new k.Polyline(n,o);};k.PolyUtil={};k.PolyUtil.clipPolygon=function(n,o){var p,q=[1,4,2,8],r,s,t,u,v,w,x,y,z=k.LineUtil;for(r=0,w=n.length;r<w;r++)n[r]._code=z._getBitCode(n[r],o);for(t=0;t<4;t++){x=q[t];p=[];for(r=0,w=n.length,s=w-1;r<w;s=r++){u=n[r];v=n[s];if(!(u._code&x)){if(v._code&x){y=z._getEdgeIntersection(v,u,x,o);y._code=z._getBitCode(y,o);p.push(y);}p.push(u);}else if(!(v._code&x)){y=z._getEdgeIntersection(v,u,x,o);y._code=z._getBitCode(y,o);p.push(y);}}n=p;}return n;};k.Polygon=k.Polyline.extend({options:{fill:true},initialize:function(n,o){k.Polyline.prototype.initialize.call(this,n,o);this._initWithHoles(n);},_initWithHoles:function(n){var o,p,q;if(n&&k.Util.isArray(n[0])&&(typeof n[0][0]!=='number')){this._latlngs=this._convertLatLngs(n[0]);this._holes=n.slice(1);for(o=0,p=this._holes.length;o<p;o++){q=this._holes[o]=this._convertLatLngs(this._holes[o]);if(q[0].equals(q[q.length-1]))q.pop();}}n=this._latlngs;if(n.length>=2&&n[0].equals(n[n.length-1]))n.pop();},projectLatlngs:function(){k.Polyline.prototype.projectLatlngs.call(this);this._holePoints=[];if(!this._holes)return;var n,o,p,q;for(n=0,p=this._holes.length;n<p;n++){this._holePoints[n]=[];for(o=0,q=this._holes[n].length;o<q;o++)this._holePoints[n][o]=this._map.latLngToLayerPoint(this._holes[n][o]);}},setLatLngs:function(n){if(n&&k.Util.isArray(n[0])&&(typeof n[0][0]!=='number')){this._initWithHoles(n);return this.redraw();}else return k.Polyline.prototype.setLatLngs.call(this,n);},_clipPoints:function(){var n=this._originalPoints,o=[];this._parts=[n].concat(this._holePoints);if(this.options.noClip)return;for(var p=0,q=this._parts.length;p<q;p++){var r=k.PolyUtil.clipPolygon(this._parts[p],this._map._pathViewport);if(r.length)o.push(r);}this._parts=o;},_getPathPartStr:function(n){var o=k.Polyline.prototype._getPathPartStr.call(this,n);return o+(k.Browser.svg?'z':'x');}});k.polygon=function(n,o){return new k.Polygon(n,o);};(function(){function n(o){return k.FeatureGroup.extend({initialize:function(p,q){this._layers={};this._options=q;this.setLatLngs(p);},setLatLngs:function(p){var q=0,r=p.length;this.eachLayer(function(s){if(q<r){s.setLatLngs(p[q++]);}else this.removeLayer(s);},this);while(q<r)this.addLayer(new o(p[q++],this._options));return this;},getLatLngs:function(){var p=[];this.eachLayer(function(q){p.push(q.getLatLngs());});return p;}});}k.MultiPolyline=n(k.Polyline);k.MultiPolygon=n(k.Polygon);k.multiPolyline=function(o,p){return new k.MultiPolyline(o,p);};k.multiPolygon=function(o,p){return new k.MultiPolygon(o,p);};}());k.Rectangle=k.Polygon.extend({initialize:function(n,o){k.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(n),o);},setBounds:function(n){this.setLatLngs(this._boundsToLatLngs(n));},_boundsToLatLngs:function(n){n=k.latLngBounds(n);return [n.getSouthWest(),n.getNorthWest(),n.getNorthEast(),n.getSouthEast()];}});k.rectangle=function(n,o){return new k.Rectangle(n,o);};k.Circle=k.Path.extend({initialize:function(n,o,p){k.Path.prototype.initialize.call(this,p);this._latlng=k.latLng(n);this._mRadius=o;},options:{fill:true},setLatLng:function(n){this._latlng=k.latLng(n);return this.redraw();},setRadius:function(n){this._mRadius=n;return this.redraw();},projectLatlngs:function(){var n=this._getLngRadius(),o=this._latlng,p=this._map.latLngToLayerPoint([o.lat,o.lng-n]);this._point=this._map.latLngToLayerPoint(o);this._radius=Math.max(this._point.x-p.x,1);},getBounds:function(){var n=this._getLngRadius(),o=(this._mRadius/40075017)*360,p=this._latlng;return new k.LatLngBounds([p.lat-o,p.lng-n],[p.lat+o,p.lng+n]);},getLatLng:function(){return this._latlng;},getPathString:function(){var n=this._point,o=this._radius;if(this._checkIfEmpty())return '';if(k.Browser.svg){return 'M'+n.x+','+(n.y-o)+'A'+o+','+o+',0,1,1,'+(n.x-.1)+','+(n.y-o)+' z';}else{n._round();o=Math.round(o);return 'AL '+n.x+','+n.y+' '+o+','+o+' 0,'+(65535*360);}},getRadius:function(){return this._mRadius;},_getLatRadius:function(){return (this._mRadius/40075017)*360;},_getLngRadius:function(){return this._getLatRadius()/Math.cos(k.LatLng.DEG_TO_RAD*this._latlng.lat);},_checkIfEmpty:function(){if(!this._map)return false;var n=this._map._pathViewport,o=this._radius,p=this._point;return p.x-o>n.max.x||p.y-o>n.max.y||p.x+o<n.min.x||p.y+o<n.min.y;}});k.circle=function(n,o,p){return new k.Circle(n,o,p);};k.CircleMarker=k.Circle.extend({options:{radius:10,weight:2},initialize:function(n,o){k.Circle.prototype.initialize.call(this,n,null,o);this._radius=this.options.radius;},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng);},_updateStyle:function(){k.Circle.prototype._updateStyle.call(this);this.setRadius(this.options.radius);},setLatLng:function(n){k.Circle.prototype.setLatLng.call(this,n);if(this._popup&&this._popup._isOpen)this._popup.setLatLng(n);return this;},setRadius:function(n){this.options.radius=this._radius=n;return this.redraw();},getRadius:function(){return this._radius;}});k.circleMarker=function(n,o){return new k.CircleMarker(n,o);};k.Polyline.include(!k.Path.CANVAS?{}:{_containsPoint:function(n,o){var p,q,r,s,t,u,v,w=this.options.weight/2;if(k.Browser.touch)w+=10;for(p=0,s=this._parts.length;p<s;p++){v=this._parts[p];for(q=0,t=v.length,r=t-1;q<t;r=q++){if(!o&&(q===0))continue;u=k.LineUtil.pointToSegmentDistance(n,v[r],v[q]);if(u<=w)return true;}}return false;}});k.Polygon.include(!k.Path.CANVAS?{}:{_containsPoint:function(n){var o=false,p,q,r,s,t,u,v,w;if(k.Polyline.prototype._containsPoint.call(this,n,true))return true;for(s=0,v=this._parts.length;s<v;s++){p=this._parts[s];for(t=0,w=p.length,u=w-1;t<w;u=t++){q=p[t];r=p[u];if(((q.y>n.y)!==(r.y>n.y))&&(n.x<(r.x-q.x)*(n.y-q.y)/(r.y-q.y)+q.x))o=!o;}}return o;}});k.Circle.include(!k.Path.CANVAS?{}:{_drawPath:function(){var n=this._point;this._ctx.beginPath();this._ctx.arc(n.x,n.y,this._radius,0,Math.PI*2,false);},_containsPoint:function(n){var o=this._point,p=this.options.stroke?this.options.weight/2:0;return (n.distanceTo(o)<=this._radius+p);}});k.CircleMarker.include(!k.Path.CANVAS?{}:{_updateStyle:function(){k.Path.prototype._updateStyle.call(this);}});k.GeoJSON=k.FeatureGroup.extend({initialize:function(n,o){k.setOptions(this,o);this._layers={};if(n)this.addData(n);},addData:function(n){var o=k.Util.isArray(n)?n:n.features,p,q,r;if(o){for(p=0,q=o.length;p<q;p++){r=o[p];if(r.geometries||r.geometry||r.features||r.coordinates)this.addData(o[p]);}return this;}var s=this.options;if(s.filter&&!s.filter(n))return;var t=k.GeoJSON.geometryToLayer(n,s.pointToLayer,s.coordsToLatLng,s);t.feature=k.GeoJSON.asFeature(n);t.defaultOptions=t.options;this.resetStyle(t);if(s.onEachFeature)s.onEachFeature(n,t);return this.addLayer(t);},resetStyle:function(n){var o=this.options.style;if(o){k.Util.extend(n.options,n.defaultOptions);this._setLayerStyle(n,o);}},setStyle:function(n){this.eachLayer(function(o){this._setLayerStyle(o,n);},this);},_setLayerStyle:function(n,o){if(typeof o==='function')o=o(n.feature);if(n.setStyle)n.setStyle(o);}});k.extend(k.GeoJSON,{geometryToLayer:function(n,o,p,q){var r=n.type==='Feature'?n.geometry:n,s=r.coordinates,t=[],u,v,w,x;p=p||this.coordsToLatLng;switch(r.type){case 'Point':u=p(s);return o?o(n,u):new k.Marker(u);case 'MultiPoint':for(w=0,x=s.length;w<x;w++){u=p(s[w]);t.push(o?o(n,u):new k.Marker(u));}return new k.FeatureGroup(t);case 'LineString':v=this.coordsToLatLngs(s,0,p);return new k.Polyline(v,q);case 'Polygon':if(s.length===2&&!s[1].length)throw new Error('Invalid GeoJSON object.');v=this.coordsToLatLngs(s,1,p);return new k.Polygon(v,q);case 'MultiLineString':v=this.coordsToLatLngs(s,1,p);return new k.MultiPolyline(v,q);case 'MultiPolygon':v=this.coordsToLatLngs(s,2,p);return new k.MultiPolygon(v,q);case 'GeometryCollection':for(w=0,x=r.geometries.length;w<x;w++)t.push(this.geometryToLayer({geometry:r.geometries[w],type:'Feature',properties:n.properties},o,p,q));return new k.FeatureGroup(t);default:throw new Error('Invalid GeoJSON object.');}},coordsToLatLng:function(n){return new k.LatLng(n[1],n[0],n[2]);},coordsToLatLngs:function(n,o,p){var q,r,s,t=[];for(r=0,s=n.length;r<s;r++){q=o?this.coordsToLatLngs(n[r],o-1,p):(p||this.coordsToLatLng)(n[r]);t.push(q);}return t;},latLngToCoords:function(n){var o=[n.lng,n.lat];if(n.alt!==i)o.push(n.alt);return o;},latLngsToCoords:function(n){var o=[];for(var p=0,q=n.length;p<q;p++)o.push(k.GeoJSON.latLngToCoords(n[p]));return o;},getFeature:function(n,o){return n.feature?k.extend({},n.feature,{geometry:o}):k.GeoJSON.asFeature(o);},asFeature:function(n){if(n.type==='Feature')return n;return {type:'Feature',properties:{},geometry:n};}});var m={toGeoJSON:function(){return k.GeoJSON.getFeature(this,{type:'Point',coordinates:k.GeoJSON.latLngToCoords(this.getLatLng())});}};k.Marker.include(m);k.Circle.include(m);k.CircleMarker.include(m);k.Polyline.include({toGeoJSON:function(){return k.GeoJSON.getFeature(this,{type:'LineString',coordinates:k.GeoJSON.latLngsToCoords(this.getLatLngs())});}});k.Polygon.include({toGeoJSON:function(){var n=[k.GeoJSON.latLngsToCoords(this.getLatLngs())],o,p,q;n[0].push(n[0][0]);if(this._holes)for(o=0,p=this._holes.length;o<p;o++){q=k.GeoJSON.latLngsToCoords(this._holes[o]);q.push(q[0]);n.push(q);}return k.GeoJSON.getFeature(this,{type:'Polygon',coordinates:n});}});(function(){function n(o){return function(){var p=[];this.eachLayer(function(q){p.push(q.toGeoJSON().geometry.coordinates);});return k.GeoJSON.getFeature(this,{type:o,coordinates:p});};}k.MultiPolyline.include({toGeoJSON:n('MultiLineString')});k.MultiPolygon.include({toGeoJSON:n('MultiPolygon')});k.LayerGroup.include({toGeoJSON:function(){var o=this.feature&&this.feature.geometry,p=[],q;if(o&&o.type==='MultiPoint')return n('MultiPoint').call(this);var r=o&&o.type==='GeometryCollection';this.eachLayer(function(s){if(s.toGeoJSON){q=s.toGeoJSON();p.push(r?q.geometry:k.GeoJSON.asFeature(q));}});if(r)return k.GeoJSON.getFeature(this,{geometries:p,type:'GeometryCollection'});return {type:'FeatureCollection',features:p};}});}());k.geoJson=function(n,o){return new k.GeoJSON(n,o);};k.DomEvent={addListener:function(n,o,p,q){var r=k.stamp(p),s='_leaflet_'+o+r,t,u,v;if(n[s])return this;t=function(w){return p.call(q||n,w||k.DomEvent._getEvent());};if(k.Browser.pointer&&o.indexOf('touch')===0)return this.addPointerListener(n,o,t,r);if(k.Browser.touch&&(o==='dblclick')&&this.addDoubleTapListener)this.addDoubleTapListener(n,t,r);if('addEventListener' in n){if(o==='mousewheel'){n.addEventListener('DOMMouseScroll',t,false);n.addEventListener(o,t,false);}else if((o==='mouseenter')||(o==='mouseleave')){u=t;v=(o==='mouseenter'?'mouseover':'mouseout');t=function(w){if(!k.DomEvent._checkMouse(n,w))return;return u(w);};n.addEventListener(v,t,false);}else if(o==='click'&&k.Browser.android){u=t;t=function(w){return k.DomEvent._filterClick(w,u);};n.addEventListener(o,t,false);}else n.addEventListener(o,t,false);}else if('attachEvent' in n)n.attachEvent('on'+o,t);n[s]=t;return this;},removeListener:function(n,o,p){var q=k.stamp(p),r='_leaflet_'+o+q,s=n[r];if(!s)return this;if(k.Browser.pointer&&o.indexOf('touch')===0){this.removePointerListener(n,o,q);}else if(k.Browser.touch&&(o==='dblclick')&&this.removeDoubleTapListener){this.removeDoubleTapListener(n,q);}else if('removeEventListener' in n){if(o==='mousewheel'){n.removeEventListener('DOMMouseScroll',s,false);n.removeEventListener(o,s,false);}else if((o==='mouseenter')||(o==='mouseleave')){n.removeEventListener((o==='mouseenter'?'mouseover':'mouseout'),s,false);}else n.removeEventListener(o,s,false);}else if('detachEvent' in n)n.detachEvent('on'+o,s);n[r]=null;return this;},stopPropagation:function(n){if(n.stopPropagation){n.stopPropagation();}else n.cancelBubble=true;k.DomEvent._skipped(n);return this;},disableScrollPropagation:function(n){var o=k.DomEvent.stopPropagation;return k.DomEvent.on(n,'mousewheel',o).on(n,'MozMousePixelScroll',o);},disableClickPropagation:function(n){var o=k.DomEvent.stopPropagation;for(var p=k.Draggable.START.length-1;p>=0;p--)k.DomEvent.on(n,k.Draggable.START[p],o);return k.DomEvent.on(n,'click',k.DomEvent._fakeStop).on(n,'dblclick',o);},preventDefault:function(n){if(n.preventDefault){n.preventDefault();}else n.returnValue=false;return this;},stop:function(n){return k.DomEvent.preventDefault(n).stopPropagation(n);},getMousePosition:function(n,o){if(!o)return new k.Point(n.clientX,n.clientY);var p=o.getBoundingClientRect();return new k.Point(n.clientX-p.left-o.clientLeft,n.clientY-p.top-o.clientTop);},getWheelDelta:function(n){var o=0;if(n.wheelDelta)o=n.wheelDelta/120;if(n.detail)o=-n.detail/3;return o;},_skipEvents:{},_fakeStop:function(n){k.DomEvent._skipEvents[n.type]=true;},_skipped:function(n){var o=this._skipEvents[n.type];this._skipEvents[n.type]=false;return o;},_checkMouse:function(n,o){var p=o.relatedTarget;if(!p)return true;try{while(p&&(p!==n))p=p.parentNode;}catch(q){return false;}return (p!==n);},_getEvent:function(){var n=g.event;if(!n){var o=arguments.callee.caller;while(o){n=o.arguments[0];if(n&&g.Event===n.constructor)break;o=o.caller;}}return n;},_filterClick:function(n,o){var p=(n.timeStamp||n.originalEvent.timeStamp),q=k.DomEvent._lastClick&&(p-k.DomEvent._lastClick);if((q&&q>100&&q<1000)||(n.target._simulatedClick&&!n._simulated)){k.DomEvent.stop(n);return;}k.DomEvent._lastClick=p;return o(n);}};k.DomEvent.on=k.DomEvent.addListener;k.DomEvent.off=k.DomEvent.removeListener;k.Draggable=k.Class.extend({includes:k.Mixin.Events,statics:{START:k.Browser.touch?['touchstart','mousedown']:['mousedown'],END:{mousedown:'mouseup',touchstart:'touchend',pointerdown:'touchend',MSPointerDown:'touchend'},MOVE:{mousedown:'mousemove',touchstart:'touchmove',pointerdown:'touchmove',MSPointerDown:'touchmove'}},initialize:function(n,o){this._element=n;this._dragStartTarget=o||n;},enable:function(){if(this._enabled)return;for(var n=k.Draggable.START.length-1;n>=0;n--)k.DomEvent.on(this._dragStartTarget,k.Draggable.START[n],this._onDown,this);this._enabled=true;},disable:function(){if(!this._enabled)return;for(var n=k.Draggable.START.length-1;n>=0;n--)k.DomEvent.off(this._dragStartTarget,k.Draggable.START[n],this._onDown,this);this._enabled=false;this._moved=false;},_onDown:function(n){this._moved=false;if(n.shiftKey||((n.which!==1)&&(n.button!==1)&&!n.touches))return;k.DomEvent.stopPropagation(n);if(k.Draggable._disabled)return;k.DomUtil.disableImageDrag();k.DomUtil.disableTextSelection();if(this._moving)return;var o=n.touches?n.touches[0]:n;this._startPoint=new k.Point(o.clientX,o.clientY);this._startPos=this._newPos=k.DomUtil.getPosition(this._element);k.DomEvent.on(h,k.Draggable.MOVE[n.type],this._onMove,this).on(h,k.Draggable.END[n.type],this._onUp,this);},_onMove:function(n){if(n.touches&&n.touches.length>1){this._moved=true;return;}var o=(n.touches&&n.touches.length===1?n.touches[0]:n),p=new k.Point(o.clientX,o.clientY),q=p.subtract(this._startPoint);if(!q.x&&!q.y)return;k.DomEvent.preventDefault(n);if(!this._moved){this.fire('dragstart');this._moved=true;this._startPos=k.DomUtil.getPosition(this._element).subtract(q);k.DomUtil.addClass(h.body,'leaflet-dragging');k.DomUtil.addClass((n.target||n.srcElement),'leaflet-drag-target');}this._newPos=this._startPos.add(q);this._moving=true;k.Util.cancelAnimFrame(this._animRequest);this._animRequest=k.Util.requestAnimFrame(this._updatePosition,this,true,this._dragStartTarget);},_updatePosition:function(){this.fire('predrag');k.DomUtil.setPosition(this._element,this._newPos);this.fire('drag');},_onUp:function(n){k.DomUtil.removeClass(h.body,'leaflet-dragging');k.DomUtil.removeClass((n.target||n.srcElement),'leaflet-drag-target');for(var o in k.Draggable.MOVE)k.DomEvent.off(h,k.Draggable.MOVE[o],this._onMove).off(h,k.Draggable.END[o],this._onUp);k.DomUtil.enableImageDrag();k.DomUtil.enableTextSelection();if(this._moved&&this._moving){k.Util.cancelAnimFrame(this._animRequest);this.fire('dragend',{distance:this._newPos.distanceTo(this._startPos)});}this._moving=false;}});k.Handler=k.Class.extend({initialize:function(n){this._map=n;},enable:function(){if(this._enabled)return;this._enabled=true;this.addHooks();},disable:function(){if(!this._enabled)return;this._enabled=false;this.removeHooks();},enabled:function(){return !!this._enabled;}});k.Map.mergeOptions({dragging:true,inertia:!k.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:Infinity,inertiaThreshold:k.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:false});k.Map.Drag=k.Handler.extend({addHooks:function(){if(!this._draggable){var n=this._map;this._draggable=new k.Draggable(n._mapPane,n._container);this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this);if(n.options.worldCopyJump){this._draggable.on('predrag',this._onPreDrag,this);n.on('viewreset',this._onViewReset,this);n.whenReady(this._onViewReset,this);}}this._draggable.enable();},removeHooks:function(){this._draggable.disable();},moved:function(){return this._draggable&&this._draggable._moved;},_onDragStart:function(){var n=this._map;if(n._panAnim)n._panAnim.stop();n.fire('movestart').fire('dragstart');if(n.options.inertia){this._positions=[];this._times=[];}},_onDrag:function(){if(this._map.options.inertia){var n=this._lastTime=+new Date(),o=this._lastPos=this._draggable._newPos;this._positions.push(o);this._times.push(n);if(n-this._times[0]>200){this._positions.shift();this._times.shift();}}this._map.fire('move').fire('drag');},_onViewReset:function(){var n=this._map.getSize()._divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(n).x;this._worldWidth=this._map.project([0,180]).x;},_onPreDrag:function(){var n=this._worldWidth,o=Math.round(n/2),p=this._initialWorldOffset,q=this._draggable._newPos.x,r=(q-o+p)%n+o-p,s=(q+o+p)%n-o-p,t=Math.abs(r+p)<Math.abs(s+p)?r:s;this._draggable._newPos.x=t;},_onDragEnd:function(n){var o=this._map,p=o.options,q=+new Date()-this._lastTime,r=!p.inertia||q>p.inertiaThreshold||!this._positions[0];o.fire('dragend',n);if(r){o.fire('moveend');}else{var s=this._lastPos.subtract(this._positions[0]),t=(this._lastTime+q-this._times[0])/1000,u=p.easeLinearity,v=s.multiplyBy(u/t),w=v.distanceTo([0,0]),x=Math.min(p.inertiaMaxSpeed,w),y=v.multiplyBy(x/w),z=x/(p.inertiaDeceleration*u),aa=y.multiplyBy(-z/2).round();if(!aa.x||!aa.y){o.fire('moveend');}else{aa=o._limitOffset(aa,o.options.maxBounds);k.Util.requestAnimFrame(function(){o.panBy(aa,{duration:z,easeLinearity:u,noMoveStart:true});});}}}});k.Map.addInitHook('addHandler','dragging',k.Map.Drag);k.Map.mergeOptions({doubleClickZoom:true});k.Map.DoubleClickZoom=k.Handler.extend({addHooks:function(){this._map.on('dblclick',this._onDoubleClick,this);},removeHooks:function(){this._map.off('dblclick',this._onDoubleClick,this);},_onDoubleClick:function(n){var o=this._map,p=o.getZoom()+(n.originalEvent.shiftKey?-1:1);if(o.options.doubleClickZoom==='center'){o.setZoom(p);}else o.setZoomAround(n.containerPoint,p);}});k.Map.addInitHook('addHandler','doubleClickZoom',k.Map.DoubleClickZoom);k.Map.mergeOptions({scrollWheelZoom:true});k.Map.ScrollWheelZoom=k.Handler.extend({addHooks:function(){k.DomEvent.on(this._map._container,'mousewheel',this._onWheelScroll,this);k.DomEvent.on(this._map._container,'MozMousePixelScroll',k.DomEvent.preventDefault);this._delta=0;},removeHooks:function(){k.DomEvent.off(this._map._container,'mousewheel',this._onWheelScroll);k.DomEvent.off(this._map._container,'MozMousePixelScroll',k.DomEvent.preventDefault);},_onWheelScroll:function(n){var o=k.DomEvent.getWheelDelta(n);this._delta+=o;this._lastMousePos=this._map.mouseEventToContainerPoint(n);if(!this._startTime)this._startTime=+new Date();var p=Math.max(40-(+new Date()-this._startTime),0);clearTimeout(this._timer);this._timer=setTimeout(k.bind(this._performZoom,this),p);k.DomEvent.preventDefault(n);k.DomEvent.stopPropagation(n);},_performZoom:function(){var n=this._map,o=this._delta,p=n.getZoom();o=o>0?Math.ceil(o):Math.floor(o);o=Math.max(Math.min(o,4),-4);o=n._limitZoom(p+o)-p;this._delta=0;this._startTime=null;if(!o)return;if(n.options.scrollWheelZoom==='center'){n.setZoom(p+o);}else n.setZoomAround(this._lastMousePos,p+o);}});k.Map.addInitHook('addHandler','scrollWheelZoom',k.Map.ScrollWheelZoom);k.extend(k.DomEvent,{_touchstart:k.Browser.msPointer?'MSPointerDown':k.Browser.pointer?'pointerdown':'touchstart',_touchend:k.Browser.msPointer?'MSPointerUp':k.Browser.pointer?'pointerup':'touchend',addDoubleTapListener:function(n,o,p){var q,r=false,s=250,t,u='_leaflet_',v=this._touchstart,w=this._touchend,x=[];function y(ba){var ca;if(k.Browser.pointer){x.push(ba.pointerId);ca=x.length;}else ca=ba.touches.length;if(ca>1)return;var da=Date.now(),ea=da-(q||da);t=ba.touches?ba.touches[0]:ba;r=(ea>0&&ea<=s);q=da;}function z(ba){if(k.Browser.pointer){var ca=x.indexOf(ba.pointerId);if(ca===-1)return;x.splice(ca,1);}if(r){if(k.Browser.pointer){var da={},ea;for(var fa in t){ea=t[fa];if(typeof ea==='function'){da[fa]=ea.bind(t);}else da[fa]=ea;}t=da;}t.type='dblclick';o(t);q=null;}}n[u+v+p]=y;n[u+w+p]=z;var aa=k.Browser.pointer?h.documentElement:n;n.addEventListener(v,y,false);aa.addEventListener(w,z,false);if(k.Browser.pointer)aa.addEventListener(k.DomEvent.POINTER_CANCEL,z,false);return this;},removeDoubleTapListener:function(n,o){var p='_leaflet_';n.removeEventListener(this._touchstart,n[p+this._touchstart+o],false);(k.Browser.pointer?h.documentElement:n).removeEventListener(this._touchend,n[p+this._touchend+o],false);if(k.Browser.pointer)h.documentElement.removeEventListener(k.DomEvent.POINTER_CANCEL,n[p+this._touchend+o],false);return this;}});k.extend(k.DomEvent,{POINTER_DOWN:k.Browser.msPointer?'MSPointerDown':'pointerdown',POINTER_MOVE:k.Browser.msPointer?'MSPointerMove':'pointermove',POINTER_UP:k.Browser.msPointer?'MSPointerUp':'pointerup',POINTER_CANCEL:k.Browser.msPointer?'MSPointerCancel':'pointercancel',_pointers:[],_pointerDocumentListener:false,addPointerListener:function(n,o,p,q){switch(o){case 'touchstart':return this.addPointerListenerStart(n,o,p,q);case 'touchend':return this.addPointerListenerEnd(n,o,p,q);case 'touchmove':return this.addPointerListenerMove(n,o,p,q);default:throw 'Unknown touch event type';}},addPointerListenerStart:function(n,o,p,q){var r='_leaflet_',s=this._pointers,t=function(v){k.DomEvent.preventDefault(v);var w=false;for(var x=0;x<s.length;x++)if(s[x].pointerId===v.pointerId){w=true;break;}if(!w)s.push(v);v.touches=s.slice();v.changedTouches=[v];p(v);};n[r+'touchstart'+q]=t;n.addEventListener(this.POINTER_DOWN,t,false);if(!this._pointerDocumentListener){var u=function(v){for(var w=0;w<s.length;w++)if(s[w].pointerId===v.pointerId){s.splice(w,1);break;}};h.documentElement.addEventListener(this.POINTER_UP,u,false);h.documentElement.addEventListener(this.POINTER_CANCEL,u,false);this._pointerDocumentListener=true;}return this;},addPointerListenerMove:function(n,o,p,q){var r='_leaflet_',s=this._pointers;function t(u){if((u.pointerType===u.MSPOINTER_TYPE_MOUSE||u.pointerType==='mouse')&&u.buttons===0)return;for(var v=0;v<s.length;v++)if(s[v].pointerId===u.pointerId){s[v]=u;break;}u.touches=s.slice();u.changedTouches=[u];p(u);}n[r+'touchmove'+q]=t;n.addEventListener(this.POINTER_MOVE,t,false);return this;},addPointerListenerEnd:function(n,o,p,q){var r='_leaflet_',s=this._pointers,t=function(u){for(var v=0;v<s.length;v++)if(s[v].pointerId===u.pointerId){s.splice(v,1);break;}u.touches=s.slice();u.changedTouches=[u];p(u);};n[r+'touchend'+q]=t;n.addEventListener(this.POINTER_UP,t,false);n.addEventListener(this.POINTER_CANCEL,t,false);return this;},removePointerListener:function(n,o,p){var q='_leaflet_',r=n[q+o+p];switch(o){case 'touchstart':n.removeEventListener(this.POINTER_DOWN,r,false);break;case 'touchmove':n.removeEventListener(this.POINTER_MOVE,r,false);break;case 'touchend':n.removeEventListener(this.POINTER_UP,r,false);n.removeEventListener(this.POINTER_CANCEL,r,false);break;}return this;}});k.Map.mergeOptions({touchZoom:k.Browser.touch&&!k.Browser.android23,bounceAtZoomLimits:true});k.Map.TouchZoom=k.Handler.extend({addHooks:function(){k.DomEvent.on(this._map._container,'touchstart',this._onTouchStart,this);},removeHooks:function(){k.DomEvent.off(this._map._container,'touchstart',this._onTouchStart,this);},_onTouchStart:function(n){var o=this._map;if(!n.touches||n.touches.length!==2||o._animatingZoom||this._zooming)return;var p=o.mouseEventToLayerPoint(n.touches[0]),q=o.mouseEventToLayerPoint(n.touches[1]),r=o._getCenterLayerPoint();this._startCenter=p.add(q)._divideBy(2);this._startDist=p.distanceTo(q);this._moved=false;this._zooming=true;this._centerOffset=r.subtract(this._startCenter);if(o._panAnim)o._panAnim.stop();k.DomEvent.on(h,'touchmove',this._onTouchMove,this).on(h,'touchend',this._onTouchEnd,this);k.DomEvent.preventDefault(n);},_onTouchMove:function(n){var o=this._map;if(!n.touches||n.touches.length!==2||!this._zooming)return;var p=o.mouseEventToLayerPoint(n.touches[0]),q=o.mouseEventToLayerPoint(n.touches[1]);this._scale=p.distanceTo(q)/this._startDist;this._delta=p._add(q)._divideBy(2)._subtract(this._startCenter);if(this._scale===1)return;if(!o.options.bounceAtZoomLimits)if((o.getZoom()===o.getMinZoom()&&this._scale<1)||(o.getZoom()===o.getMaxZoom()&&this._scale>1))return;if(!this._moved){k.DomUtil.addClass(o._mapPane,'leaflet-touching');o.fire('movestart').fire('zoomstart');this._moved=true;}k.Util.cancelAnimFrame(this._animRequest);this._animRequest=k.Util.requestAnimFrame(this._updateOnMove,this,true,this._map._container);k.DomEvent.preventDefault(n);},_updateOnMove:function(){var n=this._map,o=this._getScaleOrigin(),p=n.layerPointToLatLng(o),q=n.getScaleZoom(this._scale);n._animateZoom(p,q,this._startCenter,this._scale,this._delta);},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=false;return;}var n=this._map;this._zooming=false;k.DomUtil.removeClass(n._mapPane,'leaflet-touching');k.Util.cancelAnimFrame(this._animRequest);k.DomEvent.off(h,'touchmove',this._onTouchMove).off(h,'touchend',this._onTouchEnd);var o=this._getScaleOrigin(),p=n.layerPointToLatLng(o),q=n.getZoom(),r=n.getScaleZoom(this._scale)-q,s=(r>0?Math.ceil(r):Math.floor(r)),t=n._limitZoom(q+s),u=n.getZoomScale(t)/this._scale;n._animateZoom(p,t,o,u);},_getScaleOrigin:function(){var n=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(n);}});k.Map.addInitHook('addHandler','touchZoom',k.Map.TouchZoom);k.Map.mergeOptions({tap:true,tapTolerance:15});k.Map.Tap=k.Handler.extend({addHooks:function(){k.DomEvent.on(this._map._container,'touchstart',this._onDown,this);},removeHooks:function(){k.DomEvent.off(this._map._container,'touchstart',this._onDown,this);},_onDown:function(n){if(!n.touches)return;k.DomEvent.preventDefault(n);this._fireClick=true;if(n.touches.length>1){this._fireClick=false;clearTimeout(this._holdTimeout);return;}var o=n.touches[0],p=o.target;this._startPos=this._newPos=new k.Point(o.clientX,o.clientY);if(p.tagName&&p.tagName.toLowerCase()==='a')k.DomUtil.addClass(p,'leaflet-active');this._holdTimeout=setTimeout(k.bind(function(){if(this._isTapValid()){this._fireClick=false;this._onUp();this._simulateEvent('contextmenu',o);}},this),1000);k.DomEvent.on(h,'touchmove',this._onMove,this).on(h,'touchend',this._onUp,this);},_onUp:function(n){clearTimeout(this._holdTimeout);k.DomEvent.off(h,'touchmove',this._onMove,this).off(h,'touchend',this._onUp,this);if(this._fireClick&&n&&n.changedTouches){var o=n.changedTouches[0],p=o.target;if(p&&p.tagName&&p.tagName.toLowerCase()==='a')k.DomUtil.removeClass(p,'leaflet-active');if(this._isTapValid())this._simulateEvent('click',o);}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance;},_onMove:function(n){var o=n.touches[0];this._newPos=new k.Point(o.clientX,o.clientY);},_simulateEvent:function(n,o){var p=h.createEvent('MouseEvents');p._simulated=true;o.target._simulatedClick=true;p.initMouseEvent(n,true,true,g,1,o.screenX,o.screenY,o.clientX,o.clientY,false,false,false,false,0,null);o.target.dispatchEvent(p);}});if(k.Browser.touch&&!k.Browser.pointer)k.Map.addInitHook('addHandler','tap',k.Map.Tap);k.Map.mergeOptions({boxZoom:true});k.Map.BoxZoom=k.Handler.extend({initialize:function(n){this._map=n;this._container=n._container;this._pane=n._panes.overlayPane;this._moved=false;},addHooks:function(){k.DomEvent.on(this._container,'mousedown',this._onMouseDown,this);},removeHooks:function(){k.DomEvent.off(this._container,'mousedown',this._onMouseDown);this._moved=false;},moved:function(){return this._moved;},_onMouseDown:function(n){this._moved=false;if(!n.shiftKey||((n.which!==1)&&(n.button!==1)))return false;k.DomUtil.disableTextSelection();k.DomUtil.disableImageDrag();this._startLayerPoint=this._map.mouseEventToLayerPoint(n);k.DomEvent.on(h,'mousemove',this._onMouseMove,this).on(h,'mouseup',this._onMouseUp,this).on(h,'keydown',this._onKeyDown,this);},_onMouseMove:function(n){if(!this._moved){this._box=k.DomUtil.create('div','leaflet-zoom-box',this._pane);k.DomUtil.setPosition(this._box,this._startLayerPoint);this._container.style.cursor='crosshair';this._map.fire('boxzoomstart');}var o=this._startLayerPoint,p=this._box,q=this._map.mouseEventToLayerPoint(n),r=q.subtract(o),s=new k.Point(Math.min(q.x,o.x),Math.min(q.y,o.y));k.DomUtil.setPosition(p,s);this._moved=true;p.style.width=(Math.max(0,Math.abs(r.x)-4))+'px';p.style.height=(Math.max(0,Math.abs(r.y)-4))+'px';},_finish:function(){if(this._moved){this._pane.removeChild(this._box);this._container.style.cursor='';}k.DomUtil.enableTextSelection();k.DomUtil.enableImageDrag();k.DomEvent.off(h,'mousemove',this._onMouseMove).off(h,'mouseup',this._onMouseUp).off(h,'keydown',this._onKeyDown);},_onMouseUp:function(n){this._finish();var o=this._map,p=o.mouseEventToLayerPoint(n);if(this._startLayerPoint.equals(p))return;var q=new k.LatLngBounds(o.layerPointToLatLng(this._startLayerPoint),o.layerPointToLatLng(p));o.fitBounds(q);o.fire('boxzoomend',{boxZoomBounds:q});},_onKeyDown:function(n){if(n.keyCode===27)this._finish();}});k.Map.addInitHook('addHandler','boxZoom',k.Map.BoxZoom);k.Map.mergeOptions({keyboard:true,keyboardPanOffset:80,keyboardZoomOffset:1});k.Map.Keyboard=k.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(n){this._map=n;this._setPanOffset(n.options.keyboardPanOffset);this._setZoomOffset(n.options.keyboardZoomOffset);},addHooks:function(){var n=this._map._container;if(n.tabIndex===-1)n.tabIndex='0';k.DomEvent.on(n,'focus',this._onFocus,this).on(n,'blur',this._onBlur,this).on(n,'mousedown',this._onMouseDown,this);this._map.on('focus',this._addHooks,this).on('blur',this._removeHooks,this);},removeHooks:function(){this._removeHooks();var n=this._map._container;k.DomEvent.off(n,'focus',this._onFocus,this).off(n,'blur',this._onBlur,this).off(n,'mousedown',this._onMouseDown,this);this._map.off('focus',this._addHooks,this).off('blur',this._removeHooks,this);},_onMouseDown:function(){if(this._focused)return;var n=h.body,o=h.documentElement,p=n.scrollTop||o.scrollTop,q=n.scrollLeft||o.scrollLeft;this._map._container.focus();g.scrollTo(q,p);},_onFocus:function(){this._focused=true;this._map.fire('focus');},_onBlur:function(){this._focused=false;this._map.fire('blur');},_setPanOffset:function(n){var o=this._panKeys={},p=this.keyCodes,q,r;for(q=0,r=p.left.length;q<r;q++)o[p.left[q]]=[-1*n,0];for(q=0,r=p.right.length;q<r;q++)o[p.right[q]]=[n,0];for(q=0,r=p.down.length;q<r;q++)o[p.down[q]]=[0,n];for(q=0,r=p.up.length;q<r;q++)o[p.up[q]]=[0,-1*n];},_setZoomOffset:function(n){var o=this._zoomKeys={},p=this.keyCodes,q,r;for(q=0,r=p.zoomIn.length;q<r;q++)o[p.zoomIn[q]]=n;for(q=0,r=p.zoomOut.length;q<r;q++)o[p.zoomOut[q]]=-n;},_addHooks:function(){k.DomEvent.on(h,'keydown',this._onKeyDown,this);},_removeHooks:function(){k.DomEvent.off(h,'keydown',this._onKeyDown,this);},_onKeyDown:function(n){var o=n.keyCode,p=this._map;if(o in this._panKeys){if(p._panAnim&&p._panAnim._inProgress)return;p.panBy(this._panKeys[o]);if(p.options.maxBounds)p.panInsideBounds(p.options.maxBounds);}else if(o in this._zoomKeys){p.setZoom(p.getZoom()+this._zoomKeys[o]);}else return;k.DomEvent.stop(n);}});k.Map.addInitHook('addHandler','keyboard',k.Map.Keyboard);k.Handler.MarkerDrag=k.Handler.extend({initialize:function(n){this._marker=n;},addHooks:function(){var n=this._marker._icon;if(!this._draggable)this._draggable=new k.Draggable(n,n);this._draggable.on('dragstart',this._onDragStart,this).on('drag',this._onDrag,this).on('dragend',this._onDragEnd,this);this._draggable.enable();k.DomUtil.addClass(this._marker._icon,'leaflet-marker-draggable');},removeHooks:function(){this._draggable.off('dragstart',this._onDragStart,this).off('drag',this._onDrag,this).off('dragend',this._onDragEnd,this);this._draggable.disable();k.DomUtil.removeClass(this._marker._icon,'leaflet-marker-draggable');},moved:function(){return this._draggable&&this._draggable._moved;},_onDragStart:function(){this._marker.closePopup().fire('movestart').fire('dragstart');},_onDrag:function(){var n=this._marker,o=n._shadow,p=k.DomUtil.getPosition(n._icon),q=n._map.layerPointToLatLng(p);if(o)k.DomUtil.setPosition(o,p);n._latlng=q;n.fire('move',{latlng:q}).fire('drag');},_onDragEnd:function(n){this._marker.fire('moveend').fire('dragend',n);}});k.Control=k.Class.extend({options:{position:'topright'},initialize:function(n){k.setOptions(this,n);},getPosition:function(){return this.options.position;},setPosition:function(n){var o=this._map;if(o)o.removeControl(this);this.options.position=n;if(o)o.addControl(this);return this;},getContainer:function(){return this._container;},addTo:function(n){this._map=n;var o=this._container=this.onAdd(n),p=this.getPosition(),q=n._controlCorners[p];k.DomUtil.addClass(o,'leaflet-control');if(p.indexOf('bottom')!==-1){q.insertBefore(o,q.firstChild);}else q.appendChild(o);return this;},removeFrom:function(n){var o=this.getPosition(),p=n._controlCorners[o];p.removeChild(this._container);this._map=null;if(this.onRemove)this.onRemove(n);return this;},_refocusOnMap:function(){if(this._map)this._map.getContainer().focus();}});k.control=function(n){return new k.Control(n);};k.Map.include({addControl:function(n){n.addTo(this);return this;},removeControl:function(n){n.removeFrom(this);return this;},_initControlPos:function(){var n=this._controlCorners={},o='leaflet-',p=this._controlContainer=k.DomUtil.create('div',o+'control-container',this._container);function q(r,s){var t=o+r+' '+o+s;n[r+s]=k.DomUtil.create('div',t,p);}q('top','left');q('top','right');q('bottom','left');q('bottom','right');},_clearControlPos:function(){this._container.removeChild(this._controlContainer);}});k.Control.Zoom=k.Control.extend({options:{position:'topleft',zoomInText:'+',zoomInTitle:'Zoom in',zoomOutText:'-',zoomOutTitle:'Zoom out'},onAdd:function(n){var o='leaflet-control-zoom',p=k.DomUtil.create('div',o+' leaflet-bar');this._map=n;this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,o+'-in',p,this._zoomIn,this);this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,o+'-out',p,this._zoomOut,this);this._updateDisabled();n.on('zoomend zoomlevelschange',this._updateDisabled,this);return p;},onRemove:function(n){n.off('zoomend zoomlevelschange',this._updateDisabled,this);},_zoomIn:function(n){this._map.zoomIn(n.shiftKey?3:1);},_zoomOut:function(n){this._map.zoomOut(n.shiftKey?3:1);},_createButton:function(n,o,p,q,r,s){var t=k.DomUtil.create('a',p,q);t.innerHTML=n;t.href='#';t.title=o;var u=k.DomEvent.stopPropagation;k.DomEvent.on(t,'click',u).on(t,'mousedown',u).on(t,'dblclick',u).on(t,'click',k.DomEvent.preventDefault).on(t,'click',r,s).on(t,'click',this._refocusOnMap,s);return t;},_updateDisabled:function(){var n=this._map,o='leaflet-disabled';k.DomUtil.removeClass(this._zoomInButton,o);k.DomUtil.removeClass(this._zoomOutButton,o);if(n._zoom===n.getMinZoom())k.DomUtil.addClass(this._zoomOutButton,o);if(n._zoom===n.getMaxZoom())k.DomUtil.addClass(this._zoomInButton,o);}});k.Map.mergeOptions({zoomControl:true});k.Map.addInitHook(function(){if(this.options.zoomControl){this.zoomControl=new k.Control.Zoom();this.addControl(this.zoomControl);}});k.control.zoom=function(n){return new k.Control.Zoom(n);};k.Control.Attribution=k.Control.extend({options:{position:'bottomright',prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(n){k.setOptions(this,n);this._attributions={};},onAdd:function(n){this._container=k.DomUtil.create('div','leaflet-control-attribution');k.DomEvent.disableClickPropagation(this._container);for(var o in n._layers)if(n._layers[o].getAttribution)this.addAttribution(n._layers[o].getAttribution());n.on('layeradd',this._onLayerAdd,this).on('layerremove',this._onLayerRemove,this);this._update();return this._container;},onRemove:function(n){n.off('layeradd',this._onLayerAdd).off('layerremove',this._onLayerRemove);},setPrefix:function(n){this.options.prefix=n;this._update();return this;},addAttribution:function(n){if(!n)return;if(!this._attributions[n])this._attributions[n]=0;this._attributions[n]++;this._update();return this;},removeAttribution:function(n){if(!n)return;if(this._attributions[n]){this._attributions[n]--;this._update();}return this;},_update:function(){if(!this._map)return;var n=[];for(var o in this._attributions)if(this._attributions[o])n.push(o);var p=[];if(this.options.prefix)p.push(this.options.prefix);if(n.length)p.push(n.join(', '));this._container.innerHTML=p.join(' | ');},_onLayerAdd:function(n){if(n.layer.getAttribution)this.addAttribution(n.layer.getAttribution());},_onLayerRemove:function(n){if(n.layer.getAttribution)this.removeAttribution(n.layer.getAttribution());}});k.Map.mergeOptions({attributionControl:true});k.Map.addInitHook(function(){if(this.options.attributionControl)this.attributionControl=(new k.Control.Attribution()).addTo(this);});k.control.attribution=function(n){return new k.Control.Attribution(n);};k.Control.Scale=k.Control.extend({options:{position:'bottomleft',maxWidth:100,metric:true,imperial:true,updateWhenIdle:false},onAdd:function(n){this._map=n;var o='leaflet-control-scale',p=k.DomUtil.create('div',o),q=this.options;this._addScales(q,o,p);n.on(q.updateWhenIdle?'moveend':'move',this._update,this);n.whenReady(this._update,this);return p;},onRemove:function(n){n.off(this.options.updateWhenIdle?'moveend':'move',this._update,this);},_addScales:function(n,o,p){if(n.metric)this._mScale=k.DomUtil.create('div',o+'-line',p);if(n.imperial)this._iScale=k.DomUtil.create('div',o+'-line',p);},_update:function(){var n=this._map.getBounds(),o=n.getCenter().lat,p=6378137*Math.PI*Math.cos(o*Math.PI/180),q=p*(n.getNorthEast().lng-n.getSouthWest().lng)/180,r=this._map.getSize(),s=this.options,t=0;if(r.x>0)t=q*(s.maxWidth/r.x);this._updateScales(s,t);},_updateScales:function(n,o){if(n.metric&&o)this._updateMetric(o);if(n.imperial&&o)this._updateImperial(o);},_updateMetric:function(n){var o=this._getRoundNum(n);this._mScale.style.width=this._getScaleWidth(o/n)+'px';this._mScale.innerHTML=o<1000?o+' m':(o/1000)+' km';},_updateImperial:function(n){var o=n*3.2808399,p=this._iScale,q,r,s;if(o>5280){q=o/5280;r=this._getRoundNum(q);p.style.width=this._getScaleWidth(r/q)+'px';p.innerHTML=r+' mi';}else{s=this._getRoundNum(o);p.style.width=this._getScaleWidth(s/o)+'px';p.innerHTML=s+' ft';}},_getScaleWidth:function(n){return Math.round(this.options.maxWidth*n)-10;},_getRoundNum:function(n){var o=Math.pow(10,(Math.floor(n)+'').length-1),p=n/o;p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1;return o*p;}});k.control.scale=function(n){return new k.Control.Scale(n);};k.Control.Layers=k.Control.extend({options:{collapsed:true,position:'topright',autoZIndex:true},initialize:function(n,o,p){k.setOptions(this,p);this._layers={};this._lastZIndex=0;this._handlingClick=false;for(var q in n)this._addLayer(n[q],q);for(q in o)this._addLayer(o[q],q,true);},onAdd:function(n){this._initLayout();this._update();n.on('layeradd',this._onLayerChange,this).on('layerremove',this._onLayerChange,this);return this._container;},onRemove:function(n){n.off('layeradd',this._onLayerChange).off('layerremove',this._onLayerChange);},addBaseLayer:function(n,o){this._addLayer(n,o);this._update();return this;},addOverlay:function(n,o){this._addLayer(n,o,true);this._update();return this;},removeLayer:function(n){var o=k.stamp(n);delete this._layers[o];this._update();return this;},_initLayout:function(){var n='leaflet-control-layers',o=this._container=k.DomUtil.create('div',n);o.setAttribute('aria-haspopup',true);if(!k.Browser.touch){k.DomEvent.disableClickPropagation(o).disableScrollPropagation(o);}else k.DomEvent.on(o,'click',k.DomEvent.stopPropagation);var p=this._form=k.DomUtil.create('form',n+'-list');if(this.options.collapsed){if(!k.Browser.android)k.DomEvent.on(o,'mouseover',this._expand,this).on(o,'mouseout',this._collapse,this);var q=this._layersLink=k.DomUtil.create('a',n+'-toggle',o);q.href='#';q.title='Layers';if(k.Browser.touch){k.DomEvent.on(q,'click',k.DomEvent.stop).on(q,'click',this._expand,this);}else k.DomEvent.on(q,'focus',this._expand,this);k.DomEvent.on(p,'click',function(){setTimeout(k.bind(this._onInputClick,this),0);},this);this._map.on('click',this._collapse,this);}else this._expand();this._baseLayersList=k.DomUtil.create('div',n+'-base',p);this._separator=k.DomUtil.create('div',n+'-separator',p);this._overlaysList=k.DomUtil.create('div',n+'-overlays',p);o.appendChild(p);},_addLayer:function(n,o,p){var q=k.stamp(n);this._layers[q]={layer:n,name:o,overlay:p};if(this.options.autoZIndex&&n.setZIndex){this._lastZIndex++;n.setZIndex(this._lastZIndex);}},_update:function(){if(!this._container)return;this._baseLayersList.innerHTML='';this._overlaysList.innerHTML='';var n=false,o=false,p,q;for(p in this._layers){q=this._layers[p];this._addItem(q);o=o||q.overlay;n=n||!q.overlay;}this._separator.style.display=o&&n?'':'none';},_onLayerChange:function(n){var o=this._layers[k.stamp(n.layer)];if(!o)return;if(!this._handlingClick)this._update();var p=o.overlay?(n.type==='layeradd'?'overlayadd':'overlayremove'):(n.type==='layeradd'?'baselayerchange':null);if(p)this._map.fire(p,o);},_createRadioElement:function(n,o){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+n+'"';if(o)p+=' checked="checked"';p+='/>';var q=h.createElement('div');q.innerHTML=p;return q.firstChild;},_addItem:function(n){var o=h.createElement('label'),p,q=this._map.hasLayer(n.layer);if(n.overlay){p=h.createElement('input');p.type='checkbox';p.className='leaflet-control-layers-selector';p.defaultChecked=q;}else p=this._createRadioElement('leaflet-base-layers',q);p.layerId=k.stamp(n.layer);k.DomEvent.on(p,'click',this._onInputClick,this);var r=h.createElement('span');r.innerHTML=' '+n.name;o.appendChild(p);o.appendChild(r);var s=n.overlay?this._overlaysList:this._baseLayersList;s.appendChild(o);return o;},_onInputClick:function(){var n,o,p,q=this._form.getElementsByTagName('input'),r=q.length;this._handlingClick=true;for(n=0;n<r;n++){o=q[n];p=this._layers[o.layerId];if(o.checked&&!this._map.hasLayer(p.layer)){this._map.addLayer(p.layer);}else if(!o.checked&&this._map.hasLayer(p.layer))this._map.removeLayer(p.layer);}this._handlingClick=false;this._refocusOnMap();},_expand:function(){k.DomUtil.addClass(this._container,'leaflet-control-layers-expanded');},_collapse:function(){this._container.className=this._container.className.replace(' leaflet-control-layers-expanded','');}});k.control.layers=function(n,o,p){return new k.Control.Layers(n,o,p);};k.PosAnimation=k.Class.extend({includes:k.Mixin.Events,run:function(n,o,p,q){this.stop();this._el=n;this._inProgress=true;this._newPos=o;this.fire('start');n.style[k.DomUtil.TRANSITION]='all '+(p||.25)+'s cubic-bezier(0,0,'+(q||.5)+',1)';k.DomEvent.on(n,k.DomUtil.TRANSITION_END,this._onTransitionEnd,this);k.DomUtil.setPosition(n,o);k.Util.falseFn(n.offsetWidth);this._stepTimer=setInterval(k.bind(this._onStep,this),50);},stop:function(){if(!this._inProgress)return;k.DomUtil.setPosition(this._el,this._getPos());this._onTransitionEnd();k.Util.falseFn(this._el.offsetWidth);},_onStep:function(){var n=this._getPos();if(!n){this._onTransitionEnd();return;}this._el._leaflet_pos=n;this.fire('step');},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var n,o,p,q=this._el,r=g.getComputedStyle(q);if(k.Browser.any3d){p=r[k.DomUtil.TRANSFORM].match(this._transformRe);if(!p)return;n=parseFloat(p[1]);o=parseFloat(p[2]);}else{n=parseFloat(r.left);o=parseFloat(r.top);}return new k.Point(n,o,true);},_onTransitionEnd:function(){k.DomEvent.off(this._el,k.DomUtil.TRANSITION_END,this._onTransitionEnd,this);if(!this._inProgress)return;this._inProgress=false;this._el.style[k.DomUtil.TRANSITION]='';this._el._leaflet_pos=this._newPos;clearInterval(this._stepTimer);this.fire('step').fire('end');}});k.Map.include({setView:function(n,o,p){o=o===i?this._zoom:this._limitZoom(o);n=this._limitCenter(k.latLng(n),o,this.options.maxBounds);p=p||{};if(this._panAnim)this._panAnim.stop();if(this._loaded&&!p.reset&&p!==true){if(p.animate!==i){p.zoom=k.extend({animate:p.animate},p.zoom);p.pan=k.extend({animate:p.animate},p.pan);}var q=(this._zoom!==o)?this._tryAnimatedZoom&&this._tryAnimatedZoom(n,o,p.zoom):this._tryAnimatedPan(n,p.pan);if(q){clearTimeout(this._sizeTimer);return this;}}this._resetView(n,o);return this;},panBy:function(n,o){n=k.point(n).round();o=o||{};if(!n.x&&!n.y)return this;if(!this._panAnim){this._panAnim=new k.PosAnimation();this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this);}if(!o.noMoveStart)this.fire('movestart');if(o.animate!==false){k.DomUtil.addClass(this._mapPane,'leaflet-pan-anim');var p=this._getMapPanePos().subtract(n);this._panAnim.run(this._mapPane,p,o.duration||.25,o.easeLinearity);}else{this._rawPanBy(n);this.fire('move').fire('moveend');}return this;},_onPanTransitionStep:function(){this.fire('move');},_onPanTransitionEnd:function(){k.DomUtil.removeClass(this._mapPane,'leaflet-pan-anim');this.fire('moveend');},_tryAnimatedPan:function(n,o){var p=this._getCenterOffset(n)._floor();if((o&&o.animate)!==true&&!this.getSize().contains(p))return false;this.panBy(p,o);return true;}});k.PosAnimation=k.DomUtil.TRANSITION?k.PosAnimation:k.PosAnimation.extend({run:function(n,o,p,q){this.stop();this._el=n;this._inProgress=true;this._duration=p||.25;this._easeOutPower=1/Math.max(q||.5,.2);this._startPos=k.DomUtil.getPosition(n);this._offset=o.subtract(this._startPos);this._startTime=+new Date();this.fire('start');this._animate();},stop:function(){if(!this._inProgress)return;this._step();this._complete();},_animate:function(){this._animId=k.Util.requestAnimFrame(this._animate,this);this._step();},_step:function(){var n=(+new Date())-this._startTime,o=this._duration*1000;if(n<o){this._runFrame(this._easeOut(n/o));}else{this._runFrame(1);this._complete();}},_runFrame:function(n){var o=this._startPos.add(this._offset.multiplyBy(n));k.DomUtil.setPosition(this._el,o);this.fire('step');},_complete:function(){k.Util.cancelAnimFrame(this._animId);this._inProgress=false;this.fire('end');},_easeOut:function(n){return 1-Math.pow(1-n,this._easeOutPower);}});k.Map.mergeOptions({zoomAnimation:true,zoomAnimationThreshold:4});if(k.DomUtil.TRANSITION)k.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&k.DomUtil.TRANSITION&&k.Browser.any3d&&!k.Browser.android23&&!k.Browser.mobileOpera;if(this._zoomAnimated)k.DomEvent.on(this._mapPane,k.DomUtil.TRANSITION_END,this._catchTransitionEnd,this);});k.Map.include(!k.DomUtil.TRANSITION?{}:{_catchTransitionEnd:function(n){if(this._animatingZoom&&n.propertyName.indexOf('transform')>=0)this._onZoomTransitionEnd();},_nothingToAnimate:function(){return !this._container.getElementsByClassName('leaflet-zoom-animated').length;},_tryAnimatedZoom:function(n,o,p){if(this._animatingZoom)return true;p=p||{};if(!this._zoomAnimated||p.animate===false||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return false;var q=this.getZoomScale(o),r=this._getCenterOffset(n)._divideBy(1-1/q),s=this._getCenterLayerPoint()._add(r);if(p.animate!==true&&!this.getSize().contains(r))return false;this.fire('movestart').fire('zoomstart');this._animateZoom(n,o,s,q,null,true);return true;},_animateZoom:function(n,o,p,q,r,s){this._animatingZoom=true;k.DomUtil.addClass(this._mapPane,'leaflet-zoom-anim');this._animateToCenter=n;this._animateToZoom=o;if(k.Draggable)k.Draggable._disabled=true;this.fire('zoomanim',{center:n,zoom:o,origin:p,scale:q,delta:r,backwards:s});},_onZoomTransitionEnd:function(){this._animatingZoom=false;k.DomUtil.removeClass(this._mapPane,'leaflet-zoom-anim');this._resetView(this._animateToCenter,this._animateToZoom,true,true);if(k.Draggable)k.Draggable._disabled=false;}});k.TileLayer.include({_animateZoom:function(n){if(!this._animating){this._animating=true;this._prepareBgBuffer();}var o=this._bgBuffer,p=k.DomUtil.TRANSFORM,q=n.delta?k.DomUtil.getTranslateString(n.delta):o.style[p],r=k.DomUtil.getScaleString(n.scale,n.origin);o.style[p]=n.backwards?r+' '+q:q+' '+r;},_endZoomAnim:function(){var n=this._tileContainer,o=this._bgBuffer;n.style.visibility='';n.parentNode.appendChild(n);k.Util.falseFn(o.offsetWidth);this._animating=false;},_clearBgBuffer:function(){var n=this._map;if(n&&!n._animatingZoom&&!n.touchZoom._zooming){this._bgBuffer.innerHTML='';this._bgBuffer.style[k.DomUtil.TRANSFORM]='';}},_prepareBgBuffer:function(){var n=this._tileContainer,o=this._bgBuffer,p=this._getLoadedTilesPercentage(o),q=this._getLoadedTilesPercentage(n);if(o&&p>.5&&q<.5){n.style.visibility='hidden';this._stopLoadingImages(n);return;}o.style.visibility='hidden';o.style[k.DomUtil.TRANSFORM]='';this._tileContainer=o;o=this._bgBuffer=n;this._stopLoadingImages(o);clearTimeout(this._clearBgBufferTimer);},_getLoadedTilesPercentage:function(n){var o=n.getElementsByTagName('img'),p,q,r=0;for(p=0,q=o.length;p<q;p++)if(o[p].complete)r++;return r/q;},_stopLoadingImages:function(n){var o=Array.prototype.slice.call(n.getElementsByTagName('img')),p,q,r;for(p=0,q=o.length;p<q;p++){r=o[p];if(!r.complete){r.onload=k.Util.falseFn;r.onerror=k.Util.falseFn;r.src=k.Util.emptyImageUrl;r.parentNode.removeChild(r);}}}});k.Map.include({_defaultLocateOptions:{watch:false,setView:false,maxZoom:Infinity,timeout:10000,maximumAge:0,enableHighAccuracy:false},locate:function(n){n=this._locateOptions=k.extend(this._defaultLocateOptions,n);if(!navigator.geolocation){this._handleGeolocationError({code:0,message:'Geolocation not supported.'});return this;}var o=k.bind(this._handleGeolocationResponse,this),p=k.bind(this._handleGeolocationError,this);if(n.watch){this._locationWatchId=navigator.geolocation.watchPosition(o,p,n);}else navigator.geolocation.getCurrentPosition(o,p,n);return this;},stopLocate:function(){if(navigator.geolocation)navigator.geolocation.clearWatch(this._locationWatchId);if(this._locateOptions)this._locateOptions.setView=false;return this;},_handleGeolocationError:function(n){var o=n.code,p=n.message||(o===1?'permission denied':(o===2?'position unavailable':'timeout'));if(this._locateOptions.setView&&!this._loaded)this.fitWorld();this.fire('locationerror',{code:o,message:'Geolocation error: '+p+'.'});},_handleGeolocationResponse:function(n){var o=n.coords.latitude,p=n.coords.longitude,q=new k.LatLng(o,p),r=180*n.coords.accuracy/40075017,s=r/Math.cos(k.LatLng.DEG_TO_RAD*o),t=k.latLngBounds([o-r,p-s],[o+r,p+s]),u=this._locateOptions;if(u.setView){var v=Math.min(this.getBoundsZoom(t),u.maxZoom);this.setView(q,v);}var w={latlng:q,bounds:t,timestamp:n.timestamp};for(var x in n.coords)if(typeof n.coords[x]==='number')w[x]=n.coords[x];this.fire('locationfound',w);}});}(window,document));},null);