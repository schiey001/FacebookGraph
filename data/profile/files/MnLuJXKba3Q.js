/*!CK:977563786!*//*1430431054,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["fedAP"]); }

__d("CreditCardTypeEnum",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={VISA:86,MASTERCARD:77,DISCOVER:68,AMERICANEXPRESS:65,DINERSCLUB:64,JCB:74};},null);
__d("MNCommerceBubbleType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={FB_RETAIL_RECEIPT:1,FB_RETAIL_CANCELLATION:2,FB_RETAIL_SHIPMENT:3,FB_RETAIL_SHIPMENT_TRACKING_EVENT_ETA:4,FB_RETAIL_SHIPMENT_TRACKING_EVENT_IN_TRANSIT:5,FB_RETAIL_SHIPMENT_TRACKING_EVENT_OUT_FOR_DELIVERY:6,FB_RETAIL_SHIPMENT_TRACKING_EVENT_DELAYED:7,FB_RETAIL_SHIPMENT_TRACKING_EVENT_DELIVERED:8,FB_RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER:9};},null);
__d("P2PChannelType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={TRANSFER_STATUS_CHANGED:"P2P\/TransferStatusChanged"};},null);
__d("P2PPasswordProtectionParam",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={STATUS:"status"};},null);
__d("P2PPasswordProtectionStatusTypes",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={NOT_SET:0,DISABLED:1,ENABLED:2};},null);
__d("P2PPaymentCreditCardsTypes",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={SENDING:1,RECEIVING:2};},null);
__d("P2PPaymentLoggerEvent",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={ACTN_ADD_CREDIT_CARD:"Actn_AddCreditCard",ACTN_UPDATE_CREDIT_CARD:"Actn_UpdateCreditCard",ACTN_REMOVE_CREDIT_CARD:"Actn_RemoveCreditCard",ACTN_UNLOCK_CREDIT_CARD:"Actn_UnlockCreditCard",ACTN_VALIDATE_CARD:"Actn_ValidateCard",ACTN_TRANSFER_MONEY:"Actn_TransferMoney",ACTN_ACCEPT_MONEY:"Actn_AcceptMoney",ACTN_DECLINE_MONEY:"Actn_DeclineMoney",ACTN_SET_PRIMARY:"Actn_SetPrimary",ACTN_WITHDRAW_MONEY:"Actn_WithdrawMoney",ACTN_SEND_TRANSFER_MESSAGE:"Actn_SendTransferMessage",ACTN_SEND_TRANSFER_EMAIL:"Actn_SendTransferEmail",ACTN_CREATE_PAYMENT_REQUEST:"Actn_CreatePaymentRequest",ACTN_ACCEPT_PAYMENT_REQUEST:"Actn_AcceptPaymentRequest",ACTN_DECLINE_PAYMENT_REQUEST:"Actn_DeclinePaymentRequest",ACTN_AUTH_FOR_SENDER_REVIEW:"Actn_AuthForSenderReview",ACTN_COMPLETE_SENDER_REVIEW:"Actn_CompleteSenderReview",ACTN_COMPLETE_RECEIVER_REVIEW:"Actn_CompleteReceiverReview",ACTN_COMPLETE_SENDER_VERIFICATION:"Actn_CompleteSenderVerification",ACTN_COMPLETE_RECEIVER_VERIFICATION:"Actn_CancelReceiverVerification",ACTN_CANCEL_SENDER_VERIFICATION:"Actn_CancelSenderVerification",ACTN_CANCEL_RECEIVER_VERIFICATION:"Actn_CancelReceiverVerification",ACTN_CANCEL_SENDER_RISK:"Actn_CancelSenderRisk",ACTN_CANCEL_EXPIRE:"Actn_CancelExpire",ACTN_CANCEL_FOR_SAME_CARD:"Actn_CancelForSameCard",ACTN_CANCEL_BY_CUSTOMER_SERVICE:"Actn_CancelByCustomerService",ACTN_CANCEL_RECEIVER_REVIEW:"Actn_CancelReceiverReview",ACTN_CANCEL_SENDER_REVIEW:"Actn_CancelSenderReview",ACTN_CANCEL_ALL_PENDING_TRANSFERS:"Actn_CancelAllPendingTransfers",ACTN_ADD_PIN:"Actn_AddPIN",ACTN_UPDATE_PIN:"Actn_UpdatePIN",ACTN_REMOVE_PIN:"Actn_RemovePIN",ACTN_RESET_PIN:"Actn_ResetPIN",ACTN_ENABLE_TOUCH_ID:"Actn_EnableTouchID",ACTN_VERIFY_TOUCH_ID:"Actn_VerifyTouchID",ACTN_DISABLE_TOUCH_ID:"Actn_DisableTouchID",UI_ACTN_INITIATE_SEND:"UI_Actn_Initiate_Send",UI_ACTN_CANCEL_SEND:"UI_Actn_Send_Money_Cancelled",UI_ACTN_INITIATE_ADD_CARD:"UI_Actn_Initiate_Add_Card",UI_ACTN_CANCEL_ADD_CARD:"UI_Actn_Cancel_Add_Card",UI_ACTN_CONFIRM_CARD_DETAILS:"UI_Actn_Confirm_Card_Details",UI_ACTN_ACCEPT_WITH_CARD:"UI_Actn_Accept_With_Card",UI_ACTN_ADD_CARD_SUCCESS:"UI_Actn_Add_Card_Success",UI_ACTN_ADD_CARD_FAIL:"UI_Actn_Add_Card_Fail",UI_ACTN_CONFIRM_SEND:"UI_Actn_Confirm_Send",UI_ACTN_SEND_SUCCESS:"UI_Actn_Send_Success",UI_ACTN_SEND_MONEY_CANCELLED:"UI_Actn_Send_Money_Cancelled",UI_ACTN_SEND_FAIL:"UI_Actn_Send_Fail",UI_ACTN_INITIATE_EDIT_CARD:"UI_Actn_Initiate_Edit_Card",UI_ACTN_CANCEL_EDIT_CARD:"UI_Actn_Cancel_Edit_Card",UI_ACTN_CONFIRM_EDIT_CARD_DETAILS:"UI_Actn_Confirm_Edit_Card_Details",UI_ACTN_EDIT_CARD_SUCCESS:"UI_Actn_Edit_Card_Success",UI_ACTN_EDIT_CARD_FAIL:"UI_Actn_Edit_Card_Fail",UI_ACTN_INITIATE_REMOVE_CARD:"UI_Actn_Initiate_Remove_Card",UI_ACTN_CONFIRM_REMOVE_CARD:"UI_Actn_Confirm_Remove_Card",UI_ACTN_REMOVE_CARD_SUCCESS:"UI_Actn_Remove_Card_Success",UI_ACTN_REMOVE_CARD_FAIL:"UI_Actn_Remove_Card_Fail",UI_ACTN_INITIATE_PASSWORD_PROTECTION_NUX:"UI_Actn_Initiate_Password_Protection_NUX",UI_ACTN_OPT_IN_PASSWORD_PROTECTION_NUX:"UI_Actn_Opt_In_Password_Protection_NUX",UI_ACTN_OPT_OUT_PASSWORD_PROTECTION_NUX:"UI_Actn_Opt_Out_Password_Protection_NUX",UI_ACTN_ENABLED_PASSWORD_PROTECTION_SETTING:"UI_Actn_Enabled_Password_Protection_Setting",UI_ACTN_DISABLED_PASSWORD_PROTECTION_SETTING:"UI_Actn_Disabled_Password_Protection_Setting",UI_ACTN_SEND_CLICKED:"UI_Actn_Send_Clicked",UI_ACTN_VERIFY_CSC:"UI_Actn_Verify_CSC",UI_ACTN_CONFIRM_AMOUNT:"UI_Actn_Confirm_Amount",UI_ACTN_EDIT_CARD:"UI_Actn_Edit_Card"};},null);
__d("P2PPaymentLoggerEventFlow",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={UI_FLOW_P2P_SEND:"UI_Flow_P2P_Send",UI_FLOW_P2P_RECEIVE:"UI_Flow_P2P_Receive",UI_FLOW_P2P_SETTINGS:"UI_Flow_P2P_Settings"};},null);
__d("P2PTransferParam",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={TRANSFER_ID:"transfer_id",STATUS:"status",RISK_RESULT:"risk_result"};},null);
__d("MercuryAttachmentConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={SIDE_LENGTH:9};e.exports=g;},null);
__d("LeafletMarker.react",["GeoCoordinates","leaflet","LeafletUtils","React","areEqual"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=j,m=l.PropTypes,n=j.createClass({displayName:"LeafletMarker",propTypes:{options:m.object,coordinates:m.instanceOf(g).isRequired},statics:{mutate:function(o,p,q){var r=q.options||{},s=r.opacity,t=r.zIndex,u=(function(z,aa){var ba={},ca=Object.prototype.hasOwnProperty;if(z==null)throw new TypeError();for(var da in z)if(ca.call(z,da)&&!ca.call(aa,da))ba[da]=z[da];return ba;})(r,{opacity:1,zIndex:1}),v=p.options||{},w=v.opacity,x=v.zIndex,y=(function(z,aa){var ba={},ca=Object.prototype.hasOwnProperty;if(z==null)throw new TypeError();for(var da in z)if(ca.call(z,da)&&!ca.call(aa,da))ba[da]=z[da];return ba;})(v,{opacity:1,zIndex:1});if(!k(y,u))return false;if(w!==s)o.setOpacity(w);if(x!==t)o.setZIndex(x);if(p.coordinates!==q.coordinates)o.setLatLng(i.toLatLng(p.coordinates));return true;},toLayer:function(o){return h.marker(i.toLatLng(o.coordinates),o.options);}},render:function(){return null;}});e.exports=n;},null);
__d("LeafletPolyline.react",["leaflet","LeafletPath","LeafletUtils","immutable","React","nearlyEqualNumbers"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=k,n=m.PropTypes,o=k.createClass({displayName:"LeafletPolyline",propTypes:{options:n.object,coordinates:n.instanceOf(j.List).isRequired},statics:{coordinatesToLatLngs:function(p){return p.toSeq().map(i.toLatLng).toArray();},mutate:function(p,q,r){if(!o.mutateOptions(p,q.options,r.options))return false;if(!j.is(q.coordinates,r.coordinates))p.setLatLngs(o.coordinatesToLatLngs(q.coordinates));return true;},toLayer:function(p){return g.polyline(o.coordinatesToLatLngs(p.coordinates),p.options);},mutateOptions:function(p,q,r){var s=q||{},t=s.smoothFactor,u=s.noClip,v=(function(aa,ba){var ca={},da=Object.prototype.hasOwnProperty;if(aa==null)throw new TypeError();for(var ea in aa)if(da.call(aa,ea)&&!da.call(ba,ea))ca[ea]=aa[ea];return ca;})(s,{smoothFactor:1,noClip:1}),w=r||{},x=w.smoothFactor,y=w.noClip,z=(function(aa,ba){var ca={},da=Object.prototype.hasOwnProperty;if(aa==null)throw new TypeError();for(var ea in aa)if(da.call(aa,ea)&&!da.call(ba,ea))ca[ea]=aa[ea];return ca;})(w,{smoothFactor:1,noClip:1});if(!h.mutateOptions(p,z,v))return false;if(!l(x,t)||y!==u)return false;return true;}},render:function(){return null;}});e.exports=o;},null);
__d("MercuryAttachmentSnippetType",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g({PHOTO:null,GIF:null,VIDEO:null,AUDIO_CLIP:null,STICKER:null,ORION:null,SHARE:null,ERROR:null,MIXED:null});e.exports=h;},null);
__d("ChatImageWithArrow.react",["BackgroundImage.react","ChatImageArrowDirection","Link.react","MercuryAttachmentConstants","React","XUISpinner.react","cx","getVendorPrefixedName","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=k,q=p.PropTypes,r=30,s=15,t=k.createClass({displayName:"ChatImageWithArrow",propTypes:{arrowDirection:q.oneOf(Object.keys(h)),onClick:q.func,height:q.number.isRequired,isLoading:q.bool,rootClassName:q.string,sideLength:q.number,source:q.string,width:q.number.isRequired},getDefaultProps:function(){return {sideLength:j.SIDE_LENGTH,isLoading:false};},render:function(){this._arrowWidth=this.props.sideLength/Math.sqrt(2);this._extendedPhotoWidth=Math.ceil(this._getWidth()+this._arrowWidth);if(this.props.isLoading)return this._renderUploadingBubble();var u=o((("_4yp6")+(this.props.arrowDirection!==h.BOTH?' '+"_2nlo":'')),this.props.rootClassName),v,w;switch(this.props.arrowDirection){case h.BOTH:v=[this._renderArrowWithBorder(h.LEFT),this._renderArrowWithBorder(h.RIGHT)];w=[this._renderArrowWithNoBorder(h.LEFT),this._renderArrowWithNoBorder(h.RIGHT)];break;case h.LEFT:case h.RIGHT:v=this._renderArrowWithBorder(this.props.arrowDirection);w=this._renderArrowWithNoBorder(this.props.arrowDirection);break;}return this._renderLink(k.createElement("div",{className:u},v,k.createElement("div",{className:"_52kr",style:{width:this._getWidth(),height:this._getHeight()}},k.createElement("div",{className:"_4yp9",style:{backgroundImage:'url('+this.props.source+')',width:this._extendedPhotoWidth,height:this._getHeight()}})),w));},_getWidth:function(){return Math.max(this.props.width,s);},_getHeight:function(){return Math.max(this.props.height,r);},_renderLink:function(u){if(this.props.onClick)return (k.createElement(i,{onClick:this.props.onClick},u));return u;},_calculateArrowTransform:function(u,v,w,x){if(v===h.LEFT){return 'translate('+w+'px, '+x+'px)'+'rotate(45deg)';}else return 'translate('+(u-w)+'px, '+x+'px)'+'rotate(45deg)';},_calculateArrowImageTransform:function(u,v,w,x){if(v===h.LEFT){return 'rotate(-45deg)'+'translate(-'+(this._arrowWidth+w)+'px,'+'-'+x+'px)';}else return 'rotate(-45deg)'+'translate(-'+(u-w)+'px, -'+x+'px)';},_renderUploadingBubble:function(){var u={width:this.props.sideLength,height:this.props.sideLength},v={width:this.props.sideLength,height:this.props.sideLength},w=n('transform');if(w){u[w]=this._calculateArrowTransform(this._getWidth(),this.props.arrowDirection,0,this.props.sideLength);v[w]=this._calculateArrowTransform(this._getWidth(),this.props.arrowDirection,0,Math.floor(this.props.sideLength-this._getHeight()));}return (k.createElement("div",{className:"_4yp6"},k.createElement("div",{className:"_4ypa",style:u}),k.createElement("div",{className:"_4ypb",style:{width:this._getWidth(),height:this._getHeight()}},k.createElement(l,{size:"small"})),k.createElement("div",{className:"_4ype",style:v})));},_renderArrowWithBorder:function(u){var v={width:this.props.sideLength,height:this.props.sideLength},w={},x=n('transform');if(x){v[x]=this._calculateArrowTransform(this._getWidth(),u,0,this.props.sideLength);w[x]=this._calculateArrowImageTransform(this._getWidth(),u,0,this.props.sideLength);return (k.createElement("div",{className:(("_4ypf")+(u===h.LEFT?' '+"_2nlp":'')+(u===h.RIGHT?' '+"_2nlq":'')),key:'border:'+u,style:v},k.createElement(g,{backgroundSize:"cover",className:"_4ypg",height:this._getHeight(),src:this.props.source,style:w,width:this._extendedPhotoWidth})));}},_renderArrowWithNoBorder:function(u){var v={width:this.props.sideLength,height:this.props.sideLength},w={},x=1,y=n('transform');if(y){v[y]=this._calculateArrowTransform(this._getWidth(),u,x,this.props.sideLength-this._getHeight());w[y]=this._calculateArrowImageTransform(this._getWidth(),u,x,this.props.sideLength);}return (k.createElement("div",{className:(("_4yph")+(u===h.LEFT?' '+"_2nlp":'')+(u===h.RIGHT?' '+"_2nlq":'')),key:'noBorder:'+u,style:v},k.createElement(g,{backgroundSize:"cover",className:"_4ypg",height:this._getHeight(),src:this.props.source,style:w,width:this._extendedPhotoWidth})));}});e.exports=t;},null);
__d("MessengerDispatcher",["Dispatcher"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';e.exports=new g();},null);
__d("MNCommerceActionTypes",["keyMirrorRecursive"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g({RECEIPT:{LOADED:null,LOAD_ERROR:null},SHIPMENT:{LOADED:null,LOAD_ERROR:null},DIALOG:{SHOW:null,HIDE:null}});e.exports=h;},null);
__d("MNCommerceDialogStateActions",["MessengerDispatcher","MNCommerceActionTypes"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i={showDialog:function(j,k){g.dispatch({type:h.DIALOG.SHOW,dialogContainer:j,state:k});},hideDialog:function(){g.dispatch({type:h.DIALOG.HIDE});}};e.exports=i;},null);
__d("MNCommerceReceiptActions",["MessengerDispatcher","MNCommerceActionTypes"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i={receiptLoaded:function(j){g.dispatch({type:h.RECEIPT.LOADED,receipt:j});},receiptLoadError:function(j){g.dispatch({type:h.RECEIPT.LOAD_ERROR,receiptID:j});}};e.exports=i;},null);
__d("MNCommerceShipmentActions",["MessengerDispatcher","MNCommerceActionTypes"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i={shipmentLoaded:function(j){g.dispatch({type:h.SHIPMENT.LOADED,shipment:j});},shipmentLoadError:function(j){g.dispatch({type:h.SHIPMENT.LOAD_ERROR,shipmentID:j});}};e.exports=i;},null);
__d("MessengerAttachmentImageBlock.react",["React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g,k=j.PropTypes,l=g.createClass({displayName:"MessengerAttachmentImageBlock",propTypes:{attachment:k.object.isRequired},render:function(){return (g.createElement("div",{className:i(this.props.className,this._computeClass())},this._renderImage(),g.createElement("div",{className:"_5swm"},this.props.children)));},_renderImage:function(){if(!this.props.attachment.media||!this.props.attachment.media.image)return null;var n=this._getDimensions(),o=n.height,p=n.width,q=o>p,r=m(o,p),s=o&&p?o/p*100:100,t=(q||r)?.2:1,u=(q||r)?s:52;return (g.createElement("div",{className:"_3xn1",style:{backgroundImage:'url('+this.props.attachment.media.image+')',paddingBottom:q&&s>150?'136px':u*t+'%'}}));},_computeClass:function(){if(!this.props.attachment.media||!this.props.attachment.media.image)return "_3xn3 _5swn";var n=this._getDimensions(),o=n.height,p=n.width,q=o>p;return (("_3xn3")+(m(o,p)&&!q?' '+"_3xn5":'')+(q?' '+"_3xn6":'')+(p>=o?' '+"_3xn7":''));},_getDimensions:function(){var n=this.props.attachment.properties||{},o=n.height,p=n.width;if(o&&p){o=parseInt(o,10);p=parseInt(p,10);return {height:o,width:p};}return {height:0,width:0};}});function m(n,o){return n<=300&&o<=300;}e.exports=l;},null);
__d("MessengerDialog.react",["LayerFadeOnHide","LayerHideOnEscape","React","XUIDialog.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=i,n=m.PropTypes,o=i.createClass({displayName:"MessengerDialog",propTypes:{onToggle:n.func.isRequired,repositionOnUpdate:n.bool,shown:n.bool,type:n.oneOf(['alert','default']),width:n.number},getDefaultProps:function(){return {repositionOnUpdate:false,shown:true,type:'alert',width:400};},componentDidUpdate:function(){if(this.props.repositionOnUpdate)setTimeout(function(){if(this.isMounted()&&this.refs.dialog&&this.refs.dialog.layer)this.refs.dialog.layer.updatePosition();}.bind(this));},render:function(){return (i.createElement(j,i.__spread({behaviors:{LayerFadeOnHide:g,LayerHideOnEscape:h}},this.props,{className:l("_4ebx",this.props.className),ref:"dialog"}),i.createElement("div",{className:(("_4eby")+(this.props.type==='alert'?' '+"_2c9g":'')+(this.props.type==='default'?' '+"_2c9i":''))},this.props.children)));}});e.exports=o;},null);
__d("MessengerDialogBody.react",["React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g.createClass({displayName:"MessengerDialogBody",render:function(){return (g.createElement("div",{className:i("_4eb-",this.props.className)},this.props.children));}});e.exports=j;},null);
__d("MessengerDialogButton.react",["MessengerButton.react","ReactComponentWithPureRenderMixin","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=i,m=l.PropTypes,n=i.createClass({displayName:"MessengerDialogButton",mixins:[h],propTypes:{action:m.oneOf(['button','cancel','confirm'])},render:function(){var o=this.props,p=o.action,q=o.className,r=(function(s,t){var u={},v=Object.prototype.hasOwnProperty;if(s==null)throw new TypeError();for(var w in s)if(v.call(s,w)&&!v.call(t,w))u[w]=s[w];return u;})(o,{action:1,className:1});return (i.createElement(g,i.__spread({className:k(q,(("_5ixy")+(p==='button'?' '+"layerButton":'')+(p==='cancel'?' '+"layerCancel":'')+(p==='confirm'?' '+"layerConfirm":'')))},r)));}});e.exports=n;},null);
__d("MessengerDialogFooter.react",["LeftRight.react","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=h,l=k.PropTypes,m=h.createClass({displayName:"MessengerDialogFooter",propTypes:{leftContent:l.object},render:function(){return (h.createElement("div",{className:j("_4eb_",this.props.className)},h.createElement(g,null,h.createElement("div",{className:"_2_d1"},this.props.leftContent),h.createElement("div",null,this.props.children))));}});e.exports=m;},null);
__d("MessengerText.react",["ReactComponentWithPureRenderMixin","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=h,l=k.PropTypes,m=h.createClass({displayName:"MessengerText",mixins:[g],propTypes:{type:l.oneOf(['primary','secondary']).isRequired,size:l.oneOf(['small'])},render:function(){return (h.createElement("div",h.__spread({},this.props,{className:j((("_39r5")+(this.props.type==='primary'?' '+"_39r6":'')+(this.props.type==='secondary'?' '+"_39r7":'')+(this.props.size==='small'?' '+"_39r8":'')),this.props.className)}),this.props.children));}});e.exports=m;},null);
__d("MNCommerceAddress.react",["React"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g,i=h.PropTypes,j=g.createClass({displayName:"MNCommerceAddress",propTypes:{name:i.string,rawAddress:i.string,address:i.shape({street_1:i.string,street_2:i.string,city:i.string,state:i.string,postal_code:i.string})},render:function(){if(this.props.rawAddress)return this._renderFallbackAddress();return this._renderProperAddress();},_renderProperAddress:function(){if(!this.props.address)return null;return (g.createElement("div",null,this._renderName(),g.createElement("div",null,this.props.address.street_1),g.createElement("div",null,this.props.address.street_2),g.createElement("div",null,this._getCityStateZip())));},_getCityStateZip:function(){var k=null;if(this.props.address.city)k=this.props.address.city;if(this.props.address.state){k+=k?', ':'';k+=this.props.address.state;}if(this.props.address.postal_code){k+=k?' ':'';k+=this.props.address.postal_code;}return k;},_renderFallbackAddress:function(){return (g.createElement("div",null,this._renderName(),g.createElement("div",null,this.props.rawAddress)));},_renderName:function(){if(this.props.name)return (g.createElement("div",null,this.props.name));}});e.exports=j;},null);
__d("MNCommerceHeaderLabels",["fbt"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={CANCELED:{plural:(g._("Canceled Items")),single:(g._("Canceled Item"))},RETURNED:{plural:(g._("Returned Items")),single:(g._("Returned Item"))}};e.exports=h;},null);
__d("MNCommerceItemText.react",["MNCommerceOrderStatus","React","cx","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.PropTypes,n=h.createClass({displayName:"MNCommerceItemText",propTypes:{metalines:m.shape({metaline_1:m.string,metaline_2:m.string,metaline_3:m.string}),title:m.string,width:m.number,size:m.oneOf(['large','small']),status:m.string},getDefaultProps:function(){return {size:'small'};},render:function(){var o={width:this.props.width},p=this.props,q=p.className,r=(function(t,u){var v={},w=Object.prototype.hasOwnProperty;if(t==null)throw new TypeError();for(var x in t)if(w.call(t,x)&&!w.call(u,x))v[x]=t[x];return v;})(p,{className:1}),s=(("_swr")+(r.size==='small'?' '+"_sws":''));return (h.createElement("div",h.__spread({className:k(q,s)},r),h.createElement("div",{className:"_51fw",style:o},this.props.title),h.createElement("div",{className:"_2y0f",style:o},this._renderMetaData())));},_renderMetaData:function(){if(this.props.metalines)return (h.createElement("div",null,this._renderMetaDataSection(this.props.metalines.metaline_1),this._renderMetaDataSection(this.props.metalines.metaline_2),this._renderPriceMetaDataSection()));},_renderMetaDataSection:function(o){if(o)return (h.createElement("div",null,o));},_renderPriceMetaDataSection:function(){if(this.props.size!=='large')return null;if(this.props.status===g.CANCELED)return (h.createElement("div",null,h.createElement("span",{className:"__hz"},j._("Canceled"),' \u00b7 '),this.props.metalines.metaline_3));return (h.createElement("div",null,this.props.metalines.metaline_3));}});e.exports=n;},null);
__d("MNCommerceSingleListItem.react",["Image.react","MNCommerceItemText.react","React","cx","merge"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=i,m=l.PropTypes,n=6,o=i.createClass({displayName:"MNCommerceSingleListItem",propTypes:{description:m.string,thumbURL:m.string,imageDimension:m.number.isRequired,status:m.string},render:function(){var p=this.props.width-n-this.props.imageDimension,q=k(this.props,{width:p});return (i.createElement("div",{className:this.props.className},i.createElement("div",{className:"_1fld",style:{marginRight:n}},this._renderImage()),i.createElement(h,i.__spread({className:"_1flf",style:{height:this.props.imageDimension},size:this.props.size,status:this.props.status},q))));},_renderImage:function(){var p=this.props.imageDimension;if(this.props.thumbURL){return (i.createElement(g,{className:"_1fle",height:p,src:this.props.thumbURL,width:p}));}else return (i.createElement("div",{className:"_1prr",style:{height:p,width:p}}));}});e.exports=o;},null);
__d("MNCommerceItemList.react",["List.react","MNCommerceSingleListItem.react","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=i,m=l.PropTypes,n=10,o=i.createClass({displayName:"MNCommerceItemList",propTypes:{items:m.array,imageDimension:m.number.isRequired,size:m.oneOf(['large','small']),width:m.number},render:function(){var p=this._getItems(),q=this.props.items.length;if(q>n)p.push(i.createElement("li",{key:"andMore",className:"_24ry",style:{width:this.props.width}},k._("And {Number of items not visible} more",[k.param("Number of items not visible",q-n)])));return (i.createElement("div",null,i.createElement(g,{border:"none",spacing:"none"},p)));},_getItems:function(){var p=this.props,q=p.imageDimension,r=p.items,s=r.map(function(t){return i.createElement("li",{key:t.id,className:(("_24rx")+(this.props.size==='large'?' '+"_1n5y":'')),style:{width:this.props.width}},i.createElement(h,i.__spread({imageDimension:q,size:this.props.size,width:this.props.width},t)));}.bind(this)).slice(0,n);return s;}});e.exports=o;},null);
__d("MNCommerceAttachmentConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={XLARGE_IMAGE_DIMENSION:72,LARGE_IMAGE_DIMENSION:60,SMALL_IMAGE_DIMENSION:32,SINGLE_IMAGE_HEIGHT:108,BUBBLE_PADDING:6,UNLINK_ERROR_DIALOG:{WIDTH:300},DIALOG:{WIDTH:445,PADDING:12},MDOTCOMDIALOG:{WIDTH:495},ORDER_DETAIL:{SUB_TOTAL:'subTotal',SHIPPING:'shippingCost',TAX:'tax',TOTAL:'totalCost'}};e.exports=g;},null);
__d("MNCommerceLogoHeader.react",["Image.react","React","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=h,k=j.PropTypes,l=h.createClass({displayName:"MNCommerceLogoHeader",propTypes:{logo:k.object,label:k.string},render:function(){var m=this._renderLogo();if(this.props.label){return (h.createElement("div",{className:"_56rt"},h.createElement("div",{className:"_56ru"},h.createElement("div",{className:"_56rv"},this.props.label)),h.createElement("div",{className:"_56ru"},m)));}else return m;},_renderLogo:function(){var m=this.props.logo;if(!m||!m.src)return null;return (h.createElement(g,{className:"_56rs",height:m.height,src:m.src,width:m.width}));}});e.exports=l;},null);
__d("MercuryShareAttachmentRenderLocations",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g={CHAT:'chat',CHAT_PREVIEW:'chat_preview',MESSENGER:'messenger',WEB_INBOX:'web_inbox',getValues:function(){return [g.CHAT,g.CHAT_PREVIEW,g.MESSENGER,g.WEB_INBOX];},isPreview:function(h){return h===g.CHAT_PREVIEW;}};e.exports=g;},null);
__d("MNCommerceCancelReturnMercuryAttachment.react",["MNCommerceHeaderLabels","MNCommerceItemList.react","MNCommerceAttachmentConstants","MNCommerceLogoHeader.react","MercuryShareAttachmentRenderLocations","React","StoryAttachmentStyle","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=l,q=p.PropTypes,r='retail_return',s=l.createClass({displayName:"MNCommerceCancelReturnMercuryAttachment",propTypes:{items:q.array.isRequired,logo:q.object,type:q.string,width:q.number,onAttachmentClick:q.func,status:q.string},render:function(){var t=this._getHeaderLabelText();return (l.createElement("div",{onClick:this.props.onAttachmentClick,className:o((("_l4o")+(this.props.location===k.WEB_INBOX?' '+"_1hf9":'')),this.props.className)},l.createElement("div",{className:"_l4p"},l.createElement(j,{label:t,logo:this.props.logo})),l.createElement("div",{className:"_l4q"},this._renderItemDescriptions())));},_getHeaderLabelText:function(){var t;switch(this.props.type){case m.RETAIL_CANCELLATION:t=g.CANCELED;break;case r:t=g.RETURNED;break;}var u;if(t)if(this.props.items.length===1){u=t.single;}else u=t.plural;return u;},_renderItemDescriptions:function(){if(!this.props.items.length)return null;var t=this.props.width-2*i.BUBBLE_PADDING;return (l.createElement(h,{items:this.props.items,imageDimension:i.LARGE_IMAGE_DIMENSION,size:"small",status:this.props.status,width:t}));}});e.exports=s;},null);
__d("MercuryShareAttachmentReactShape",["React"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g,i=h.PropTypes,j=i.shape({description:i.string,media:i.shape({image:i.string,duration:i.number,playable:i.bool,source:i.string}),source:i.string,style_list:i.arrayOf(i.string),subattachments:i.array,target:i.object,title:i.string,properties:i.object,uri:i.string}).isRequired;e.exports=j;},null);
__d("MNCommerceDialogStateStore",["FluxStore","MessengerDispatcher","MNCommerceActionTypes"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';for(var j in g)if(g.hasOwnProperty(j))l[j]=g[j];var k=g===null?null:g.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=g;function l(){g.call(this,h);this.$MNCommerceDialogStateStore0=null;this.$MNCommerceDialogStateStore1=null;}l.prototype.__onDispatch=function(m){var n=m.type;switch(n){case i.DIALOG.SHOW:this.$MNCommerceDialogStateStore0=m.dialogContainer;this.$MNCommerceDialogStateStore1=m.state;this.__emitChange();break;case i.DIALOG.HIDE:this.$MNCommerceDialogStateStore0=null;this.$MNCommerceDialogStateStore1=null;this.__emitChange();break;}};l.prototype.getDialogContainer=function(){return this.$MNCommerceDialogStateStore0;};l.prototype.getState=function(){return this.$MNCommerceDialogStateStore1;};e.exports=new l();},null);
__d("MNCommerceLoggingConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={DIALOG_EVENT_TYPE:{DIALOG_OPENED:"dialog_opened",DIALOG_CLOSED:"dialog_closed",DIALOG_LOAD_ERROR:"dialog_load_error",DIALOG_LOAD_SUCCESS:"dialog_load_success"},NOT_YOU_EVENT_TYPE:{NOT_YOU_CLICKED:"not_you_clicked",NOT_YOU_UNSUBSCRIBE_SUCCESS:"not_you_unsubscribe_success",NOT_YOU_UNSUBSCRIBE_ERROR:"not_you_unsubscribe_error"},SURFACE:{ORDER_DETAILS_DIALOG:"order_details_dialog",SHIPPING_DETAILS_DIALOG:"shipping_details_dialog"},LOGGER_FIELDS:{DIALOG_SURFACE:"dialog_surface"},MODULE:"MNCommerceDetailsDialogLoggerConfig"};e.exports=g;},null);
__d("MNCommerceDetailSection.react",["React","cx"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=g,j=i.PropTypes,k=g.createClass({displayName:"MNCommerceDetailSection",propTypes:{headerLabel:j.string.isRequired,margin:j.number},getDefaultProps:function(){return {margin:0};},render:function(){return (g.createElement("div",{className:this.props.className},g.createElement("div",{className:"_5171",style:{marginBottom:this.props.margin}},this.props.headerLabel),this.props.children));}});e.exports=k;},null);
__d("MNCommerceDialog.react",["CurrentEnvironment","LayerFadeOnHide","LayerHideOnEscape","MNCommerceAttachmentConstants","MessengerDialog.react","React","ScrollableArea.react","XUIDialog.react","cx","emptyFunction","getViewportDimensions","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();'use strict';var s=40,t=24,u=l,v=u.PropTypes,w=l.createClass({displayName:"MNCommerceDialog",propTypes:{onToggle:v.func,shown:v.bool,width:v.number.isRequired},getDefaultProps:function(){return {onToggle:p,repositionOnUpdate:true,shown:true,width:g.messengerdotcom?j.MDOTCOMDIALOG.WIDTH:j.DIALOG.WIDTH};},componentDidUpdate:function(){if(this.props.repositionOnUpdate)setTimeout(function(){if(this.isMounted()&&this.refs.dialog&&this.refs.dialog.layer)this.refs.dialog.layer.updatePosition();}.bind(this));},render:function(){var x=g.messengerdotcom,y=x?k:n,z=s*2+t*2,aa=q().height,ba=x?aa-z:null;return (l.createElement(y,l.__spread({behaviors:{LayerFadeOnHide:h,LayerHideOnEscape:i}},this.props,{className:r(this.props.className,((x?"_3rx0":''))),ref:"dialog",style:{height:ba}}),this._renderChildren(ba)));},_renderChildren:function(x){if(x){return (l.createElement(m,{height:x,width:this.props.width-2*t},this.props.children));}else return this.props.children;}});e.exports=w;},null);
__d("MNCommerceDialogBody.react",["CurrentEnvironment","MessengerDialogBody.react","React","XUIDialogBody.react"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i.createClass({displayName:"MNCommerceDialogBody",render:function(){var l=g.messengerdotcom,m=l?h:j;return (i.createElement(m,i.__spread({},this.props),this.props.children));}});e.exports=k;},null);
__d("MNCommerceDialogTitle.react",["CurrentEnvironment","MessengerDialogHeader.react","React","XUIDialogTitle.react"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i.createClass({displayName:"MNCommerceDialogTitle",render:function(){var l=g.messengerdotcom,m=l?h:j;return (i.createElement(m,i.__spread({},this.props),this.props.children));}});e.exports=k;},null);
__d("MNCommerceOrderDetailsDialog.react",["MNCommerceAddress.react","MNCommerceAttachmentConstants","MNCommerceDetailSection.react","MNCommerceItemList.react","MNCommerceLogoHeader.react","React","MNCommerceDialog.react","MNCommerceDialogBody.react","MNCommerceDialogTitle.react","XUISpinner.react","cx","fbt","mergeDeep"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();'use strict';var t=l,u=t.PropTypes,v=[h.ORDER_DETAIL.SUB_TOTAL,h.ORDER_DETAIL.SHIPPING,h.ORDER_DETAIL.TAX,h.ORDER_DETAIL.TOTAL],w={};w[h.ORDER_DETAIL.SUB_TOTAL]=r._("Subtotal");w[h.ORDER_DETAIL.SHIPPING]=r._("Shipping");w[h.ORDER_DETAIL.TAX]=r._("Tax");w[h.ORDER_DETAIL.TOTAL]=r._("Total");var x=l.createClass({displayName:"MNCommerceOrderDetailsDialog",propTypes:{receipt:u.object,shown:u.bool.isRequired,error:u.object,loading:u.bool.isRequired},getDefaultProps:function(){return {shown:false};},getInitialState:function(){return this._calculateState(this.props);},componentWillReceiveProps:function(y){this.setState(this._calculateState(y));},_calculateState:function(y){if(!y.receipt)return {};var z=y.receipt,aa=Array.isArray(z.structured_address)?null:z.structured_address;return {address:aa,items:this._processItems(z.items),logo:z.partner_logo?{height:z.partner_logo.height,width:z.partner_logo.width,src:z.partner_logo.url}:null,name:z.recipient_name,orderDate:z.order_time,orderNumber:z.order_id,orderStatus:z.status,payment:z.payment_method,rawAddress:z.address,shippingCost:z.shipping_cost,subTotal:z.subtotal,tax:z.total_tax,totalCost:z.total_cost};},render:function(){var y=null;if(this.props.loading){y=this._renderLoadingDetailsSection();}else if(this.props.error){y=this._renderErrorDetailsSection();}else y=this._renderFullDetailsSection();return (l.createElement(m,{className:"_1eio",onToggle:this.props.onToggle,shown:this.props.shown},l.createElement(o,null,r._("Order Details")),l.createElement(n,{useCustomPadding:true},l.createElement("div",{className:"_4vx2"},y))));},_renderErrorDetailsSection:function(){return (l.createElement("div",{className:"_289q"},l.createElement("p",{className:"_289r"},"Sorry, Something Went Wrong"),l.createElement("p",{className:"_289s"},"Your order details couldn't be shown.")));},_renderLoadingDetailsSection:function(){return (l.createElement("div",{className:"_p43"},l.createElement(p,{background:"light",size:"large",paused:false})));},_renderFullDetailsSection:function(){return (l.createElement("div",null,this._renderLogo(),this._renderItems(),l.createElement("div",{className:"_2hsz"}),l.createElement("div",null,l.createElement(i,{className:"_4vx4 _4vx5",headerLabel:r._("Ordered on")},this.state.orderDate),l.createElement(i,{className:"_4vx4",headerLabel:r._("Ship to")},l.createElement(g,{name:this.state.name,address:this.state.address,rawAddress:this.state.rawAddress})),l.createElement(i,{className:"_4vx4",headerLabel:r._("Paid with")},this.state.payment),l.createElement(i,{className:"_4vx4",headerLabel:r._("Summary")},this._renderOrderSummary())),l.createElement("div",{className:"_4vx6"},r._("Order number: {order number}",[r.param("order number",this.state.orderNumber)]))));},_processItems:function(y){if(!y)return null;var z=Object.keys(y).map(function(aa){var ba=y[aa],ca=s({},ba);ca.id=aa;ca.thumbURL=ba.thumb_url;return ca;});return z;},_renderLogo:function(){if(!this.state.logo)return null;return (l.createElement("div",{className:"_4vx3"},l.createElement(k,{logo:this.state.logo})));},_renderItems:function(){var y=h.DIALOG.WIDTH-2*h.DIALOG.PADDING;return (l.createElement("div",{className:"_39yr"},l.createElement(j,{imageDimension:h.XLARGE_IMAGE_DIMENSION,items:this.state.items,size:"large",width:y})));},_renderOrderSummary:function(){var y=v.map(function(z){var aa=this.state[z];return (l.createElement("div",{className:((z==='totalCost'?"_4vx9":'')),key:z},l.createElement("div",{className:"_4vx5"},w[z]),l.createElement("div",{className:"_4vx5"},aa||'--')));}.bind(this));return y;}});e.exports=x;},null);
__d("MNCommerceCacheTimeoutLimits",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g={SUCCESS_TIMEOUT:10,ERROR_TIMEOUT:1};e.exports=g;},null);
__d("XMNCommerceOrderDetailsController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/messages\/commerce\/order_details\/",{receipt_id:{type:"String",required:true}});},null);
__d("MNCommerceReceiptDataManager",["AsyncRequest","MNCommerceReceiptActions","XMNCommerceOrderDetailsController"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';function j(){}j.prototype.fetchReceipt=function(k){var l=i.getURIBuilder().setString('receipt_id',k).getURI();new g().setURI(l).setHandler(this.$MNCommerceReceiptDataManager0).setErrorHandler(this.$MNCommerceReceiptDataManager1).send();};j.prototype.$MNCommerceReceiptDataManager0=function(k){h.receiptLoaded(k.payload);};j.prototype.$MNCommerceReceiptDataManager1=function(k){var l=k.getRequest().uri.getQueryData(),m=l.receipt_id;h.receiptLoadError(m);};e.exports=new j();},null);
__d("MNCommerceReceiptStore",["Cache","FluxStore","LoadObject","MessengerDispatcher","MNCommerceActionTypes","MNCommerceCacheTimeoutLimits","MNCommerceReceiptDataManager"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';for(var n in h)if(h.hasOwnProperty(n))p[n]=h[n];var o=h===null?null:h.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=h;function p(){h.call(this,j);this.$MNCommerceReceiptStore0=new g();}p.prototype.__onDispatch=function(q){var r=q.type;switch(r){case k.RECEIPT.LOADED:var s=q.receipt;this.$MNCommerceReceiptStore0.set(s.receipt_id,i.empty().setValue(s),null,l.SUCCESS_TIMEOUT);this.__emitChange();break;case k.RECEIPT.LOAD_ERROR:var t=q.receiptID;this.$MNCommerceReceiptStore0.set(t,i.empty().setError(new Error('Unable to load receipt: '+t)),null,l.ERROR_TIMEOUT);this.__emitChange();break;}};p.prototype.getReceipt=function(q){if(q&&!this.$MNCommerceReceiptStore0.has(q)){this.$MNCommerceReceiptStore0.set(q,i.loading().setValue({receiptID:q}));m.fetchReceipt(q);}return this.$MNCommerceReceiptStore0.get(q)||i.empty();};e.exports=new p();},null);
__d("MNCommerceOrderDetailsDialogContainer.react",["BanzaiLogger","MNCommerceDialogStateActions","MNCommerceDialogStateStore","MNCommerceLoggingConstants","MNCommerceOrderDetailsDialog.react","MNCommerceReceiptStore","PureStoreBasedStateMixin","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=n.createClass({displayName:"MNCommerceOrderDetailsDialogContainer",mixins:[m(l)],statics:{calculateState:function(){var p=i.getState(),q=null;if(p)q=p.receiptID;var r=l.getReceipt(q);if(!r.isLoading())g.log(j.MODULE,{dialog_surface:j.SURFACE.ORDER_DETAILS_DIALOG,event:(r.hasError()?j.DIALOG_EVENT_TYPE.DIALOG_LOAD_ERROR:j.DIALOG_EVENT_TYPE.DIALOG_LOAD_SUCCESS),receipt_id:q});return {shown:!!p,loading:r.isLoading(),receipt:r.getValue(),error:r.getError()};}},render:function(){return (n.createElement(k,{loading:this.state.loading,error:this.state.error,onToggle:this._onToggle,shown:this.state.shown,receipt:this.state.receipt}));},_onToggle:function(p){if(!p){g.log(j.MODULE,{dialog_surface:j.SURFACE.ORDER_DETAILS_DIALOG,event:j.DIALOG_EVENT_TYPE.DIALOG_CLOSED,receipt_id:this.state.receipt.receipt_id});h.hideDialog();}}});e.exports=o;},null);
__d("MNCommerceCancelReturnMercuryShareAttachment.react",["MercuryShareAttachmentReactShape","MNCommerceCancelReturnMercuryAttachment.react","MNCommerceDialogStateActions","MNCommerceOrderDetailsDialogContainer.react","StoryAttachmentStyle","React"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=l,n=m.PropTypes,o=l.createClass({displayName:"MNCommerceCancelReturnMercuryShareAttachment",propTypes:{attachment:g,maxWidth:n.number},render:function(){var p=this.props.attachment,q=[],r=p.target.items;Object.keys(r).forEach(function(t){var u=r[t],v=Object.assign({},u);v.id=t;v.thumbURL=u.thumb_url;q.push(v);});var s={items:q,location:this.props.location,onAttachmentClick:this._onAttachmentClick,type:k.RETAIL_CANCELLATION,width:this.props.maxWidth,status:p.target.status};return (l.createElement(h,l.__spread({},s)));},_onAttachmentClick:function(){i.showDialog(j,{receiptID:this.props.attachment.target.receipt_id});}});e.exports=o;},null);
__d("MNCommerceFooterTypes",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g({TOTAL:null,REFUND:null});e.exports=h;},null);
__d("MNCommerceTotalCostFooter.react",["LeftRight.react","MNCommerceFooterTypes","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=i,m=l.PropTypes,n=i.createClass({displayName:"MNCommerceTotalCostFooter",propTypes:{type:m.oneOf(Object.keys(h)),totalCost:m.string},render:function(){var o,p;switch(this.props.type){case h.TOTAL:o=(k._("Total"));p="_28k2";break;case h.REFUND:o=(k._("Refund"));p="_28k3";break;default:o='';p='';break;}return (i.createElement(g,{className:p},i.createElement("div",null,o),i.createElement("div",{className:"_28k4"},this.props.totalCost)));}});e.exports=n;},null);
__d("MercuryShareImage.react",["ChatImageArrowDirection","ChatImageWithArrow.react","React","cx"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i,l=k.PropTypes,m=i.createClass({displayName:"MercuryShareImage",propTypes:{height:l.number.isRequired,source:l.string.isRequired,width:l.number.isRequired},render:function(){return (i.createElement("div",{className:"_4hsl"},i.createElement(h,{arrowDirection:g.BOTH,height:this.props.height,source:this.props.source,width:this.props.width})));}});e.exports=m;},null);
__d("MNCommerceReceiptMercuryAttachment.react",["MNCommerceFooterTypes","MNCommerceItemList.react","MNCommerceAttachmentConstants","MNCommerceLogoHeader.react","MNCommerceItemText.react","MNCommerceTotalCostFooter.react","MercuryShareAttachmentRenderLocations","MercuryShareImage.react","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();'use strict';var r=o,s=r.PropTypes,t=o.createClass({displayName:"MNCommerceReceiptMercuryAttachment",propTypes:{items:s.array.isRequired,location:s.oneOf(m.getValues()),logo:s.object,totalCost:s.string,width:s.number,onAttachmentClick:s.func,status:s.string},render:function(){var u=this.props.items.length>1?"_abt":"_abu",v=this.props.logo,w=v?o.createElement("div",{className:u},o.createElement(j,{logo:v})):null;return (o.createElement("div",{className:q((("_1xjh")+(this.props.location===m.WEB_INBOX?' '+"_1hf9":'')),this.props.className),onClick:this.props.onAttachmentClick},this._renderSingleImage(),o.createElement("div",{className:"_4qgg"},w,o.createElement("div",{className:"_xmt"},this._renderItemDescriptions()),o.createElement("div",{className:"_xmx"},o.createElement(l,{totalCost:this.props.totalCost,type:g.TOTAL})))));},_renderSingleImage:function(){if(!this.props.items.length||this.props.items.length>1)return null;var u=this.props.items[0];if(this.props.location===m.CHAT)return (o.createElement(n,{height:i.SINGLE_IMAGE_HEIGHT,source:u.thumbURL,width:this.props.width}));return (o.createElement("div",{className:"_xm1",style:{backgroundImage:'url('+u.thumbURL+')'}}));},_renderItemDescriptions:function(){if(!this.props.items.length)return null;var u=this.props.width-2*i.BUBBLE_PADDING,v={size:'small',width:u};if(this.props.items.length===1){var w=this.props.items[0];return (o.createElement(k,o.__spread({description:w.description,title:w.title,status:w.status,metalines:w.metalines},v)));}return (o.createElement(h,o.__spread({items:this.props.items,imageDimension:i.LARGE_IMAGE_DIMENSION},v)));}});e.exports=t;},null);
__d("MNCommerceReceiptMercuryShareAttachment.react",["BanzaiLogger","MercuryShareAttachmentReactShape","MNCommerceDialogStateActions","MNCommerceLoggingConstants","MNCommerceOrderDetailsDialogContainer.react","MNCommerceReceiptMercuryAttachment.react","React","mergeDeep"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=m,p=o.PropTypes,q=m.createClass({displayName:"MNCommerceReceiptMercuryShareAttachment",propTypes:{attachment:h,maxWidth:p.number},render:function(){var r=this.props.attachment,s=[],t=r.target.items;Object.keys(t).forEach(function(v){var w=t[v],x=n({},w);x.id=v;x.thumbURL=w.thumb_url;s.push(x);});var u={items:s,totalCost:r.target.total_cost,width:this.props.maxWidth,onAttachmentClick:this._onAttachmentClick,location:this.props.location,logo:r.target.partner_logo?{height:r.target.partner_logo.height,width:r.target.partner_logo.width,src:r.target.partner_logo.url}:null,status:r.target.status};return (m.createElement(l,m.__spread({},u)));},_onAttachmentClick:function(){g.log(j.MODULE,{dialog_surface:j.SURFACE.ORDER_DETAILS_DIALOG,event:j.DIALOG_EVENT_TYPE.DIALOG_OPENED,receipt_id:this.props.attachment.target.receipt_id});i.showDialog(k,{receiptID:this.props.attachment.target.receipt_id});}});e.exports=q;},null);
__d("MNCommerceShippingMap.react",["React","cssVar","cx","GeoCoordinates","immutable","leaflet","LeafletUtils","FBTilesMap.react","LeafletCircleMarker.react","LeafletPolyline.react","LeafletMarker.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();'use strict';var r=g,s=r.PropTypes,t=.02,u={boxZoom:false,doubleClickZoom:false,dragging:false,scrollWheelZoom:false,touchZoom:false,zoomControl:false},v={color:'#70768b',opacity:1,weight:1,fill:true,fillOpacity:1,fillColor:'#ffffff',radius:2.5},w={color:'black',opacity:.2},x={color:"#5890ff",opacity:1},y={iconSize:[30,37],iconAnchor:[15,37]},z=445,aa=242,ba=g.createClass({displayName:"MNCommerceShippingMap",propTypes:{className:s.string,destination:s.instanceOf(j).isRequired,delivered:s.bool,shippingCheckPoints:s.instanceOf(k.List).isRequired,style:s.object},getInitialState:function(){return {size:l.point(z,aa)};},render:function(){return (g.createElement(n,{className:this.props.className,view:this._getView(),style:this.props.style,options:u,onViewChange:this._onViewChange,onSizeSettled:this._onSizeSettled},this._renderShippingCheckPoints(),this._renderDestinationPolyline(),this._renderDestinationWayPoint(),this._renderLocationIdentifiers()));},_onViewChange:function(){},_renderShippingCheckPoints:function(){if(this.props.shippingCheckPoints.size>1)return (g.createElement(p,{coordinates:this.props.shippingCheckPoints,options:x}));},_renderDestinationPolyline:function(){if(!this.props.delivered&&this.props.shippingCheckPoints.size>0){var ca=k.List([this.props.destination,this.props.shippingCheckPoints.first()]);return (g.createElement(p,{coordinates:ca,options:w}));}},_renderDestinationWayPoint:function(){return (g.createElement(q,{coordinates:this.props.destination,options:{icon:l.divIcon(Object.assign({},y,{className:"_18ea"}))}}));},_renderLocationIdentifiers:function(){var ca=[this.props.destination];if(this.props.shippingCheckPoints.size>0)return ca.concat(this.props.shippingCheckPoints.toArray()).map(function(da,ea){return g.createElement(o,{center:da,key:ea,options:v});});},_getLatLngPoints:function(){var ca=[this.props.destination];if(this.props.shippingCheckPoints.size>0)ca=ca.concat(this.props.shippingCheckPoints.toArray());return ca.map(m.toLatLng);},_getView:function(){var ca=this._getLatLngPoints(),da=l.latLngBounds(ca).pad(t);return m.fitBounds(da,{width:this.state.size.x,height:this.state.size.y},{zoomRange:[0,12]});},_onSizeSettled:function(ca){this.setState({size:ca});}});e.exports=ba;},null);
__d("MNCommerceShippingDetailsDialog.react",["ActionList.react","GeoCoordinates","immutable","Link.react","MNCommerceAddress.react","MNCommerceAttachmentConstants","MNCommerceDetailSection.react","MNCommerceItemList.react","MNCommerceLogoHeader.react","MNCommerceShippingMap.react","React","MNCommerceDialog.react","MNCommerceDialogBody.react","MNCommerceDialogTitle.react","XUISpinner.react","cx","fbt","mergeDeep"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){b.__markCompiled&&b.__markCompiled();'use strict';var y=q,z=y.PropTypes,aa=q.createClass({displayName:"MNCommerceShippingDetailsDialog",propTypes:{shipment:z.shape({address:z.shape({street_1:z.string,street_2:z.string,city:z.string,state:z.string,postal_code:z.string}),carrierInfo:z.string,changeURL:z.string,deliverDate:z.string,name:z.string,shipDate:z.string,delivered:z.bool,destination:z.instanceOf(h),items:z.object,logo:z.shape({height:z.number,width:z.number,src:z.string}),orderDetailsURL:z.string,rawAddress:z.string,progress:z.object,shippingCheckPoints:z.instanceOf(i.List),trackingNumber:z.string}),shown:z.bool.isRequired,error:z.object,loading:z.bool.isRequired,onToggle:z.func},getDefaultProps:function(){return {shown:false};},render:function(){var ba=null;if(this.props.loading){ba=this._renderLoadingDetailsSection();}else if(this.props.error){ba=this._renderErrorDetailsSection();}else ba=this._renderFullDetailsSection();return (q.createElement(r,{className:"_1eio",modal:true,onToggle:this.props.onToggle,shown:this.props.shown},q.createElement(t,null,w._("Shipping Details")),q.createElement(s,{useCustomPadding:true},ba)));},_renderErrorDetailsSection:function(){return (q.createElement("div",{className:"_1bi1"},q.createElement("p",{className:"_1bi3"},"Sorry, Something Went Wrong"),q.createElement("p",{className:"_1bi4"},"Your shipment details couldn't be shown.")));},_renderLoadingDetailsSection:function(){return (q.createElement("div",{className:"_p43"},q.createElement(u,{background:"light",size:"large",paused:false})));},_renderFullDetailsSection:function(){return (q.createElement("div",null,this._renderMap(),q.createElement("div",{className:"_3qia"},q.createElement("div",null,this._renderCallToActionList()),q.createElement("div",null,this._renderDeliverySection(),this._renderAddressSection(),this._renderCarrierSection(),this._renderProgressSection(),this._renderItemsSection()),q.createElement("div",{className:"_3qih"},this._renderLogo()))));},_processItems:function(){var ba=Object.keys(this.props.shipment.items).map(function(ca){var da=this.props.shipment.items[ca],ea=x({},da);ea.id=ca;ea.thumbURL=da.thumb_url;return ea;}.bind(this));return ba;},_getItemsHeader:function(){var ba,ca=this._processItems();if(ca.length===1){ba=(w._("Item"));}else if(ca.length>1){ba=(w._("Items"));}else ba=(w._("No items found"));return ba;},_renderDeliverySection:function(){if(!this.props.shipment.deliverDate)return null;return (q.createElement(m,{className:"_3qic",headerLabel:w._("Delivery on")},this.props.shipment.deliverDate));},_renderAddressSection:function(){if(!this.props.shipment.address&&!this.props.rawAddress)return null;return (q.createElement(m,{className:"_3qic",headerLabel:w._("Ship to")},q.createElement(k,{address:this.props.shipment.address,rawAddress:this.props.shipment.rawAddress,name:this.props.shipment.name})));},_renderCarrierSection:function(){if(!this.props.shipment.carrierInfo)return null;return (q.createElement(m,{className:"_3qic",headerLabel:w._("Carrier")},this.props.shipment.carrierInfo));},_renderProgressSection:function(){var ba=this.props.shipment.progress,ca=Object.keys(ba).reverse(),da=null;if(!ba||!ca.length){da=(w._("Tracking info should be available soon"));}else da=ca.map(function(ea){var fa=ba[ea];return (q.createElement("div",{className:"_3qii",key:ea},q.createElement("p",{className:"_3qij"},fa.description),q.createElement("p",{className:"_3qik"},fa.date)));});return (q.createElement(m,{className:"_3qic",headerLabel:w._("Tracking")},da));},_renderItemsSection:function(){if(!this.props.shipment.items)return null;var ba=l.DIALOG.WIDTH-2*l.DIALOG.PADDING;return (q.createElement(m,{className:"_3qic _39yr",headerLabel:this._getItemsHeader(),margin:6},q.createElement(n,{imageDimension:l.SMALL_IMAGE_DIMENSION,items:this._processItems(),size:"small",width:ba})));},_renderLogo:function(){if(!this.props.shipment.logo)return null;var ba=(w._("Tracking number: {tracking number}",[w.param("tracking number",this.props.shipment.trackingNumber)]));return (q.createElement("div",{className:"_3xyi"},q.createElement(o,{logo:this.props.shipment.logo,label:ba})));},_renderMap:function(){if(!this.props.shipment.destination)return null;return (q.createElement(p,{className:"_387w",delivered:this.props.shipment.delivered,destination:this.props.shipment.destination,shippingCheckPoints:this.props.shipment.shippingCheckPoints}));},_renderCallToActionList:function(){var ba=[];if(this.props.shipment.changeURL)ba.push(q.createElement(j,{className:"_3qil",href:this.props.shipment.changeURL,key:"changeDelivery",target:"_blank"},w._("Change Delivery Options")));if(!ba.length)return null;return (q.createElement(g,{className:"_3qim"},ba));},_onViewChange:function(ba){this.setState({view:ba});}});e.exports=aa;},null);
__d("XMNCommerceShippingDetailsController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/messages\/commerce\/shipping_details\/",{shipment_id:{type:"String",required:true}});},null);
__d("MNCommerceShipmentDataManager",["AsyncRequest","MNCommerceShipmentActions","XMNCommerceShippingDetailsController"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';function j(){}j.prototype.fetchShipment=function(k){var l=i.getURIBuilder().setString('shipment_id',k).getURI();new g().setURI(l).setHandler(this.$MNCommerceShipmentDataManager0).setErrorHandler(this.$MNCommerceShipmentDataManager1).send();};j.prototype.$MNCommerceShipmentDataManager0=function(k){h.shipmentLoaded(k.payload);};j.prototype.$MNCommerceShipmentDataManager1=function(k){var l=k.getRequest().uri.getQueryData(),m=l.shipment_id;h.shipmentLoadError(m);};e.exports=new j();},null);
__d("MNCommerceShipmentStore",["Cache","FluxStore","LoadObject","MessengerDispatcher","MNCommerceActionTypes","MNCommerceCacheTimeoutLimits","MNCommerceShipmentDataManager"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';for(var n in h)if(h.hasOwnProperty(n))p[n]=h[n];var o=h===null?null:h.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=h;function p(){h.call(this,j);this.$MNCommerceShipmentStore0=new g();}p.prototype.__onDispatch=function(q){var r=q.type;switch(r){case k.SHIPMENT.LOADED:var s=q.shipment;this.$MNCommerceShipmentStore0.set(s.shipment_id,i.empty().setValue(s),null,l.SUCCESS_TIMEOUT);this.__emitChange();break;case k.SHIPMENT.LOAD_ERROR:var t=q.shipmentID;this.$MNCommerceShipmentStore0.set(t,i.empty().setError(new Error('Unable to load shipment: '+t)),null,l.ERROR_TIMEOUT);this.__emitChange();break;}};p.prototype.getShipment=function(q){if(q&&!this.$MNCommerceShipmentStore0.has(q)){this.$MNCommerceShipmentStore0.set(q,i.loading().setValue({shipmentID:q}));m.fetchShipment(q);}return this.$MNCommerceShipmentStore0.get(q)||i.empty();};e.exports=new p();},null);
__d("MNCommerceShippingDetailsDialogContainer.react",["BanzaiLogger","GeoCoordinates","immutable","MNCommerceDialogStateActions","MNCommerceDialogStateStore","MNCommerceLoggingConstants","MNCommerceShippingDetailsDialog.react","MNCommerceShipmentStore","PureStoreBasedStateMixin","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q=p.createClass({displayName:"MNCommerceShippingDetailsDialogContainer",mixins:[o(n)],statics:{calculateState:function(){var r=k.getState(),s=null;if(r)s=r.shipmentID;var t=n.getShipment(s);if(!t.isLoading())g.log(l.MODULE,{dialog_surface:l.SURFACE.SHIPPING_DETAILS_DIALOG,event:(t.hasError()?l.DIALOG_EVENT_TYPE.DIALOG_LOAD_ERROR:l.DIALOG_EVENT_TYPE.DIALOG_LOAD_SUCCESS),shipment_id:s});return {shown:!!r,loading:t.isLoading(),shipment:t.getValue(),error:t.getError()};}},render:function(){return (p.createElement(m,{loading:this.state.loading,error:this.state.error,onToggle:this._onToggle,shown:this.state.shown,shipment:this._getParsedShipment(this.state.shipment)}));},_getParsedShipment:function(r){if(!r)return {};var s=[],t=r.origin,u=r.events;if(t&&t.latitude&&(!u||Object.keys(u).length===0)){s=[new h(t.latitude,t.longitude)];}else if(u)s=Object.keys(u).map(function(w){var x=u[w];if(x.location&&x.location.latitude)return new h(x.location.latitude,x.location.longitude);});var v=Array.isArray(r.destination)?null:r.destination;return {address:v,carrierInfo:r.service_type,changeURL:r.carrier_tracking_url,delivered:r.delivered,deliverDate:r.estimated_delivery_display_time,shipDate:r.display_ship_date,destination:(r.destination&&r.destination.latitude)?new h(r.destination.latitude,r.destination.longitude):null,items:r.items,logo:r.carrier_logo?{height:r.carrier_logo.height,width:r.carrier_logo.width,src:r.carrier_logo.url}:null,name:r.recipient_name?r.recipient_name:null,orderDetailsURL:r.order_details_url,progress:r.events,shippingCheckPoints:i.List(s),trackingNumber:r.tracking_number};},_onToggle:function(r){if(!r){g.log(l.MODULE,{dialog_surface:l.SURFACE.SHIPPING_DETAILS_DIALOG,event:l.DIALOG_EVENT_TYPE.DIALOG_CLOSED,shipment_id:this.state.shipment.shipment_id});j.hideDialog();}}});e.exports=q;},null);
__d("MNCommerceShippingMercuryAttachment.react",["MNCommerceItemList.react","MNCommerceAttachmentConstants","MNCommerceLogoHeader.react","MNCommerceShipmentTrackingEventTypes","MercuryShareAttachmentRenderLocations","React","cx","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=l,q=p.PropTypes,r=l.createClass({displayName:"MNCommerceShippingMercuryAttachment",propTypes:{carrierInfo:q.string,carrierTrackingURL:q.string,deliveryDate:q.string,deliveryPeriod:q.string,hasUnsupportedCarrier:q.bool,items:q.array.isRequired,logo:q.object,shippingDate:q.string,type:q.number,width:q.number,onAttachmentClick:q.func},render:function(){var s=null;if(!this.props.hasUnsupportedCarrier&&this.props.logo)s=l.createElement("div",{className:"_3lx4"},l.createElement(i,{logo:this.props.logo}));var t=this.props.items.length>1?n._("Items"):n._("Item");return (l.createElement("div",{className:o((("_3lx3")+(this.props.location===k.WEB_INBOX?' '+"_1hf9":'')),this.props.className)},this._renderUnsupportedURL(),l.createElement("div",{onClick:this.props.onAttachmentClick},s,l.createElement("div",{className:"_3lx5"},this._renderShippingSection(),this._renderDeliveryOrCarrierSection(),l.createElement("p",{className:"_5ry9 _3lxb"},t),this._renderItemDescriptions()))));},_renderUnsupportedURL:function(){if(this.props.hasUnsupportedCarrier&&this.props.carrierTrackingURL)return (l.createElement("a",{href:this.props.carrierTrackingURL,target:"_blank"}));},_renderDeliveryOrCarrierSection:function(){var s,t;if(this.props.hasUnsupportedCarrier){s=(n._("Carrier"));t=l.createElement("p",{className:"_5rya"},this.props.carrierInfo);}else if(!this.props.deliveryDate){return null;}else{s=this._getDeliveryLabel();var u=this.props.type===j.DELAYED?l.createElement("span",null,l.createElement("span",{className:"_5ryb"},n._("Delayed")),' '," · ",' '):'',v=this.props.deliveryDate;if(this.props.deliveryPeriod)v+=', '+this.props.deliveryPeriod;t=l.createElement("p",{className:"_5rya"},u,v);}return (l.createElement("div",{className:"_3lx6"},l.createElement("p",{className:"_5ry9"},s),t));},_getDeliveryLabel:function(){switch(this.props.type){case j.OUT_FOR_DELIVERY:return (n._("Out for delivery on"));case j.DELIVERED:return (n._("Delivered on"));default:return (n._("Delivery on"));}},_renderShippingSection:function(){if(!this.props.type)return (l.createElement("div",{className:"_3lx6"},l.createElement("p",{className:"_5ry9"},n._("Shipped on")),l.createElement("p",{className:"_5rya"},this.props.shippingDate)));return null;},_renderItemDescriptions:function(){if(!this.props.items.length)return null;var s=this.props.width-2*h.BUBBLE_PADDING;return (l.createElement(g,{items:this.props.items,imageDimension:h.SMALL_IMAGE_DIMENSION,size:"small",width:s}));}});e.exports=r;},null);
__d("MNCommerceShippingMercuryShareAttachment.react",["BanzaiLogger","MercuryShareAttachmentReactShape","MNCommerceBubbleType","MNCommerceDialogStateActions","MNCommerceLoggingConstants","MNCommerceShippingDetailsDialogContainer.react","MNCommerceShippingMercuryAttachment.react","ReactComponentWithPureRenderMixin","React","formatDate"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q=o,r=q.PropTypes,s=o.createClass({displayName:"MNCommerceShippingMercuryShareAttachment",mixins:[n],propTypes:{attachment:h,maxWidth:r.number},render:function(){var t=this.props.attachment,u=[],v=t.target.items;Object.keys(v).forEach(function(ca){var da=v[ca],ea=Object.assign({},da);ea.id=ca;ea.thumbURL=da.thumb_url;u.push(ea);});var w=t.target,x=w.ship_date?p(w.ship_date,'D M d')+', '+p(w.ship_date,'g:ia'):null,y=w.estimated_delivery_time||w.timestamp,z=y?p(y,'D M d'):null,aa=w.messenger_commerce_bubble_type===i.FB_RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER,ba={carrierInfo:w.service_type,carrierTrackingURL:w.carrier_tracking_url,deliveryDate:z,logo:t.target.carrier_logo?{height:t.target.carrier_logo.height,width:t.target.carrier_logo.width,src:t.target.carrier_logo.url}:null,items:u,hasUnsupportedCarrier:aa,location:this.props.location,width:this.props.maxWidth,type:w.tracking_event_type,shippingDate:x,onAttachmentClick:aa?null:this._onAttachmentClick};return (o.createElement(m,o.__spread({},ba)));},_onAttachmentClick:function(){g.log(k.MODULE,{dialog_surface:k.SURFACE.SHIPPING_DETAILS_DIALOG,event:k.DIALOG_EVENT_TYPE.DIALOG_OPENED,shipment_id:this.props.attachment.target.shipment_id});j.showDialog(l,{shipmentID:this.props.attachment.target.shipment_id});}});e.exports=s;},null);
__d("XMomentsAppInstallLinkDialogController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/moments_app\/install_link\/dialog\/",{__asyncDialog:{type:"Int"}});},null);
__d("MessengerMomentsAppShareAttachment.react",["Image.react","ImageBlock.react","Link.react","MercuryShareAttachmentReactShape","MercuryShareAttachmentRenderLocations","MercuryShareImage.react","React","ReactComponentWithPureRenderMixin","XUIButton.react","XMomentsAppInstallLinkDialogController","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();'use strict';var s=m,t=s.PropTypes,u=173,v=82,w=200,x=m.createClass({displayName:"MessengerMomentsAppShareAttachment",mixins:[n],propTypes:{attachment:j,location:t.string,rootClassName:t.string},render:function(){var y=this.props.attachment;if(!y||!y.media||!y.media.image)return null;return (m.createElement(i,{className:r("_-2m",this.props.rootClassName),href:"#",ajaxify:p.getURIBuilder().getURI(),rel:"dialog",target:"_blank"},this._renderContentBlock(y)));},_renderContentBlock:function(y){var z=y.media.image,aa=y.target.call_to_action_text,ba=this.props.location;if(ba===k.CHAT||ba===k.MESSENGER){var ca=null;if(ba===k.CHAT){ca=(m.createElement(l,{source:z,width:u,height:v}));}else ca=(m.createElement("div",{className:"_54hl",style:{backgroundImage:'url('+z+')'}}));return (m.createElement("div",{className:"_54hm"},ca,m.createElement("div",{className:"_1ath"},this._renderTextBlock(y,"_1ati"),m.createElement("div",{className:"_-2n"}),m.createElement("div",{className:"_1atj"},aa))));}else return (m.createElement(h,null,m.createElement(g,{src:z,width:w}),m.createElement("div",{className:"_2pi8"},this._renderTextBlock(y),m.createElement(o,{className:"_3-8n",label:aa}))));},_renderTextBlock:function(y,z){return (m.createElement("div",{className:r("_54hq",z)},m.createElement("div",{className:"_-2p"},y.title),m.createElement("div",{className:"_-2q"},y.description)));}});e.exports=x;},null);
__d("MessengerMomentsAppSnippet.react",["Image.react","MercuryShareAttachmentReactShape","React","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=i,n=m.PropTypes,o=i.createClass({displayName:"MessengerMomentsAppSnippet",propTypes:{attachment:h,isSenderViewer:n.bool,senderName:n.string},render:function(){var p=this.props.attachment;if(!p||!p.target)return null;var q,r=p.target.photo_count;if(this.props.isViewerSender){if(r==1){q=(k._("You synced 1 photo."));}else q=(k._("You synced {photo_count} photos.",[k.param("photo_count",r)]));}else if(r==1){q=(k._("{sender name} synced 1 photo.",[k.param("sender name",this.props.senderName)]));}else q=(k._("{sender name} synced {photo_count} photos.",[k.param("sender name",this.props.senderName),k.param("photo_count",r)]));return (i.createElement("span",{className:"uiIconText _3l6h"},i.createElement(g,{src:l('/images/messaging/docs/generic.png')}),q));}});e.exports=o;},null);
__d("MercuryAttachmentSnippetRenderer",["MercuryAttachment","MercuryAttachmentSnippetType","MercuryAttachmentType","MercuryConstants","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l={getAttachmentSnippetType:function(m){if(this._hasOnlyPhotos(m))return h.PHOTO;if(this._hasOnlyAnimatedImages(m))return h.GIF;if(this._hasOnlyVideo(m))return h.VIDEO;if(this._hasAudioClip(m))return h.AUDIO_CLIP;if(this._hasSticker(m))return h.STICKER;if(this._hasOrion(m))return h.ORION;if(this._hasShare(m))return h.SHARE;if(this._hasError(m))return h.ERROR;return h.MIXED;},renderAttachmentSnippetText:function(m,n,o,p){switch(m){case h.PHOTO:return this._renderPhotoAttachmentSnippetText(n,o,this._getPhotoAttachments(p));case h.GIF:return this._renderAnimatedImagesAttachmentSnippetText(n,o,this._getAnimatedImageAttachments(p));case h.VIDEO:return n?k._("You sent a video."):k._("{sender name} sent a video.",[k.param("sender name",o)]);case h.AUDIO_CLIP:return n?k._("You sent a voice message."):k._("{name} sent a voice message.",[k.param("name",o)]);case h.STICKER:return n?k._("You sent a sticker."):k._("{name} sent a sticker.",[k.param("name",o)]);case h.ORION:if(p&&p[0]&&p[0].metadata)return this.renderOrionSnippetText(n,o,p[0].metadata);break;case h.SHARE:return n?k._("You shared a link."):k._("{sender name} shared a link.",[k.param("sender name",o)]);case h.ERROR:return n?k._("You sent an attachment."):k._("{sender name} sent an attachment.",[k.param("sender name",o)]);default:return '';}},_hasOnlyPhotos:function(m){return this._getPhotoAttachments(m).length===m.length;},_hasOnlyAnimatedImages:function(m){return this._getAnimatedImageAttachments(m).length===m.length;},_hasOnlyVideo:function(m){return (m.length===1&&m[0].attach_type===i.VIDEO);},_hasAudioClip:function(m){return !!(m.length===1&&m[0].metadata&&g.isVoiceMessage(m[0].metadata.type));},_hasSticker:function(m){return (m.length===1&&m[0].attach_type===i.STICKER);},_hasOrion:function(m){return this._hasSingleAttachmentOfShareDataType(m,j.MercurySupportedShareType.FB_ORION);},_hasSingleAttachmentOfShareDataType:function(m,n){return (m.length===1&&m[0].share_data_type===n);},_hasShare:function(m){return (m.length===1&&m[0].attach_type===i.SHARE);},_hasError:function(m){return (m.length===1&&m[0].attach_type===i.ERROR);},_getPhotoAttachments:function(m){if(!m)return [];return m.filter(function(n){return n.attach_type===i.PHOTO;});},_getAnimatedImageAttachments:function(m){if(!m)return [];return m.filter(function(n){return n.attach_type===i.ANIMATED_IMAGE;});},_renderPhotoAttachmentSnippetText:function(m,n,o){if(o.length===1){if(m){return (k._("You sent a photo."));}else return (k._("{name} sent a photo.",[k.param("name",n)]));}else if(m){return (k._({"*":"You sent {num_photos} photos.","268435456":"You sent {num_photos} photos.","805306368":"You sent {num_photos} photos."},[k.param("num_photos",o.length,[0])]));}else return (k._({"*":"{name} sent {num_photos} photos.","268435456":"{name} sent {num_photos} photos.","805306368":"{name} sent {num_photos} photos."},[k.param("name",n),k.param("num_photos",o.length,[0])]));},_renderAnimatedImagesAttachmentSnippetText:function(m,n,o){if(o.length===1){if(m){return (k._("You sent a GIF."));}else return (k._("{name} sent a GIF.",[k.param("name",n)]));}else if(m){return (k._("You sent {num_animated_images} GIFs.",[k.param("num_animated_images",o.length)]));}else return (k._("{name} sent {num_animated_images} GIFs.",[k.param("name",n),k.param("num_animated_images",o.length)]));},renderOrionSnippetText:function(m,n,o,p){if(m){return (k._("You sent {currency}{amount}.",[k.param("currency",o),k.param("amount",p)]));}else return (k._("{name} sent you {currency}{amount}.",[k.param("name",n),k.param("currency",o),k.param("amount",p)]));}};e.exports=l;},null);
__d("P2PMercuryAttachmentSnippet.react",["CurrentUser","Image.react","MercuryAttachmentSnippetRenderer","React","cx","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=j,n=m.PropTypes,o=j.createClass({displayName:"P2PMercuryAttachment",propTypes:{sender:n.object,receiver:n.object,amount:n.string,currency:n.string},getDefaultProps:function(){return {sender:{},receiver:{}};},render:function(){var p=i.renderOrionSnippetText(g.getID()===this.props.sender.id,this.props.sender.name,this.props.currency,this.props.amount);return (j.createElement("span",{className:"uiIconText _3l6h _3_io"},j.createElement(h,{height:12,src:l('/images/p2p/attachment-snippet-icon.png'),width:12}),p));}});e.exports=o;},null);
__d("MercuryFallbackShareAttachment.react",["Image.react","ImageBlock.react","Link.react","MercuryShareAttachmentRenderLocations","MercuryShareAttachmentReactShape","MercuryShareImage.react","MessengerAttachmentImageBlock.react","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q=n,r=q.PropTypes,s=72,t=n.createClass({displayName:"MercuryFallbackShareAttachment",propTypes:{attachment:k,location:r.oneOf(j.getValues())},renderLink:function(u){if(j.isPreview(location))return u;return (n.createElement(i,{className:"_5rw4",href:this.props.attachment.uri,target:"_blank"},u));},render:function(){var u=this.props.attachment,v=this.props.location,w=((j.CHAT===v?"_49or":'')+(j.WEB_INBOX===v?' '+"__nm":'')+(j.CHAT_PREVIEW===v?' '+"_324d":'')+(j.CHAT!==v?' '+"_tih":'')+(!(u&&u.media.image)?' '+"_49ou":'')),x=(n.createElement("div",{className:"__6j"},n.createElement("div",{className:"__6k"},u.title),n.createElement("div",{className:"__6l"},u.description),n.createElement("div",{className:"__6m"},u.source)));if(u.media&&u.media.image){if(j.CHAT===v||j.CHAT_PREVIEW===v){return this.renderLink(n.createElement(h,{className:w,spacing:"medium"},n.createElement(l,{height:s,source:u.media.image,width:s}),n.createElement("div",{style:{display:'flex',justifyContent:'center',flexDirection:'column',height:s}},x)));}else if(j.MESSENGER===v)return this.renderLink(n.createElement(m,{className:w,attachment:u},x,this.props.children));return this.renderLink(n.createElement(h,{className:p(this.props.className,w)},n.createElement(g,{className:"__6n",src:u.media.image,width:s}),x,this.props.children));}return this.renderLink(n.createElement("div",{className:p(this.props.className,w)},x,this.props.children));}});e.exports=t;},null);
__d("MercuryFallbackShareAttachmentSnippet.react",["Image.react","React","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.PropTypes,n=h.createClass({displayName:"MercuryFallbackShareAttachmentSnippet",propTypes:{isSenderViewer:m.bool,senderName:m.string},render:function(){var o;if(this.props.isViewerSender){o=(j._("You shared a link."));}else o=(j._("{sender name} shared a link.",[j.param("sender name",this.props.senderName)]));return (h.createElement("span",{className:"uiIconText _3l6h"},h.createElement(g,{src:k('/images/messaging/docs/generic.png')}),o));}});e.exports=n;},null);
__d("P2PCreditCardFormFieldMixin.react",["React","ReactInputSelection","XUITextInput.react","cx","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=49,m=g,n=m.PropTypes,o={propTypes:{onChange:n.func,reference:n.string,saveError:n.string,focused:n.bool,value:n.string,isMasked:n.bool,showFocusOutline:n.bool,showIcon:n.bool,showPlaceholder:n.bool},getDefaultProps:function(){return {onChange:k,saveError:'',focused:false,value:'',isMasked:false,showFocusOutline:true,showIcon:true,showPlaceholder:true};},getInitialState:function(){return {isValid:null,value:'',oldValue:'',focused:false,lastKeyCode:l,modified:false,cursorPosition:0,errorMessage:null};},getInputElement:function(){return this.refs.ccFormFieldInput.refs.textInput.getTextFieldDOM();},restoreCursorPosition:function(){if(!this.getUpdatedCursorPosition)return;if(this.state.oldValue===this.state.value)return;var p=this.getUpdatedCursorPosition(this.state.value,this.state.oldValue,this.state.cursorPosition);h.setSelection(this.getInputElement(),{start:p});},setAndValidate:function(p,q){var r,s=this.state.value,t=h.getSelection(this.getInputElement()),u=this.formatValue?this.formatValue(p,s,q):p;r=this.validate(u);this.setState({modified:true,value:u,oldValue:p,isValid:r,cursorPosition:t.start},this.restoreCursorPosition);this.triggerChange(u,r);},triggerChange:function(p,q){this.props.onChange(this.props.reference,p,q);},componentDidMount:function(){if(this.props.focused)setTimeout(function(){if(this.isMounted())this.focus();}.bind(this),100);this.initializeFormValue();},initializeFormValue:function(){var p;if(this.props.value){p=this.props.isMasked?true:this.validate(this.props.value);this.setState({isValid:p,modified:true,value:this.props.value});this.triggerChange(this.props.value,p);}},handleBlur:function(p){var q=this.getInputElement().value;if(q&&q!==this.state.value)this.setAndValidate(q,l);this.setState({focused:false});},handlePaste:function(p){this.setState({lastKeyCode:l});},handleChange:function(p){this.setAndValidate(p.target.value,this.state.lastKeyCode);},handleOnKeyDown:function(p){var q=p.keyCode;if(q>=96&&q<=105)q=q-48;this.setState({lastKeyCode:q});},handleFocus:function(p){this.setState({focused:true});},focus:function(){g.findDOMNode(this.refs.ccFormFieldInput).focus();},shouldShowIsValidError:function(){if(!this.state.isValid&&this.state.modified)return !this.state.focused||this.isValAtLimit();return false;},isDisabled:function(){return this.props.isMasked;},render:function(){var p=this.shouldShowIsValidError()||this.props.saveError||this.state.errorMessage;return (g.createElement("div",{className:(("_2wac")+(p?' '+"_5bqn":'')+(this.props.showFocusOutline&&!p&&this.state.focused?' '+"_5bqo":'')),onClick:this.focus},this.props.showIcon?this.getIcon():null,g.createElement(i,{autoComplete:this.getAutocompleteName(),ref:"ccFormFieldInput",defaultValue:this.props.defaultValue,value:this.state.value,onChange:this.handleChange,onPaste:this.handlePaste,onKeyDown:this.handleOnKeyDown,onFocus:this.handleFocus,onBlur:this.handleBlur,placeholder:this.props.showPlaceholder?this.getPlaceholder():'',disabled:this.isDisabled(),className:(("_5bqq")+(!this.props.showIcon?' '+"_46tf":'')),xuiError:this.state.errorMessage}),g.createElement("div",{className:"_5br4"})));}};e.exports=o;},null);
__d("P2PCreditCardNumberFormFieldHelper",["Keys"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h={formatCardNumber:function(i,j,k,l,m){if(k===g.BACKSPACE||k===g.DELETE){var n=(j.split(m).length-1),o=(i.split(m).length-1);if(o!==n)return i;}i=i.replace(/\D/g,'');i=i.substr(0,l[l.length-1]);var p='';for(var q=1;q<l.length;q++){if(l[q]>i.length||(q===l.length-1)){p+=i.slice(l[q-1]);break;}p+=i.slice(l[q-1],l[q])+m;}return p;},getUpdatedCursorPosition:function(i,j,k,l){var m=0,n=0;while(m<k&&m<j.length&&n<i.length)if(j[m]===i[n]){m++;n++;}else if(!/^\d+$/.test(j[m])){m++;}else n++;if(i.substr(n,1)===l)n++;return n;}};e.exports=h;},null);
__d("P2PCreditCardExpDateFormField.react",["React","P2PCreditCardFormFieldMixin.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=g.createClass({displayName:"P2PCreditCardExpDateFormField",mixins:[h],getIcon:function(){return (g.createElement("div",{className:"_31_w _31_x"}));},getAutocompleteName:function(){return 'cc-exp';},isValAtLimit:function(){var l=this.state.value;return l.length===this.getLimit();},getLimit:function(){return 5;},getPlaceholder:function(){return (j._("MM\/YY"));},formatValue:function(l,m,n){var o=this.getLimit(),p=String.fromCharCode(n);l=l.replace(/[^0-9\/]+/g,'');var q=l.split('/'),r=q[0],s=q[1];if(s&&s.length===4){l=r+'/'+s.substr(-2);}else l=l.slice(0,o);if(!/^\d+$/.test(p)&&n!==191&&n!==111)return l;l=l.replace(/\D/g,'');if(/^\d$/.test(l)&&(l!=='0'&&l!=='1')){l='0'+l+'/';}else if(l.length>=2&&l.indexOf('/')===-1)l=l.substr(0,2)+'/'+l.substr(2,4);return l;},validate:function(l){var m=l.split('/'),n=(new Date()),o=parseInt(n.getFullYear().toString().substring(2),10),p=parseInt(n.getMonth()+1,10),q=parseInt(m[0],10),r=parseInt(m[1],10);if(l.length!==5||!q||!r||isNaN(q)||isNaN(r)||q<1||q>12)return false;if((r<o)||(r===o&&q<p)||q>12||q<1)return false;return true;}});e.exports=k;},null);
__d("P2PCreditCardCVCFormField.react",["CreditCardFormParam","React","P2PCreditCardFormFieldMixin.react","PaymentMethodUtils","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=h.createClass({displayName:"P2PCreditCardCVCFormField",mixins:[i],getIcon:function(){return (h.createElement("div",{className:"_31_w _5wcr"}));},getAutocompleteName:function(){return 'cc-csc';},isValAtLimit:function(){var n=this.state.value;return n.length===this.getLimit();},getLimit:function(){var n,o=this.props.cscMaxLength;if(!o){n=j.getCardType(this.props[g.CARD_NUMBER]);o=n.name==='amex'?4:3;}return o;},formatValue:function(n,o,p){var q=this.getLimit();n=n.replace(/\D/g,'');n=n.slice(0,q);return n;},getPlaceholder:function(){return l._("CSC");},validate:function(n){return n.length===this.getLimit();}});e.exports=m;},null);
__d("P2PButton.react",["CurrentEnvironment","MessengerDialogButton.react","React","XUIButton.react"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i.createClass({displayName:"P2PButton",render:function(){var l=g.messengerdotcom,m=l?h:j,n=this.props.type;if(!n)n=this.props.type==='confirm'?'primary':'secondary';var o=l?'default':this.props.use,p=Object.assign({},this.props,{type:n,use:o});return (i.createElement(m,i.__spread({},p),this.props.children));}});e.exports=k;},null);
__d("P2PDialog.react",["CurrentEnvironment","LayerFadeOnHide","MessengerDialog.react","React","XUIDialog.react","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=j,n=m.PropTypes,o=j.createClass({displayName:"P2PDialog",propTypes:{onToggle:n.func,shown:n.bool,width:n.number},getDefaultProps:function(){return {onToggle:l,repositionOnUpdate:false,shown:true,width:400};},componentDidUpdate:function(){if(this.props.repositionOnUpdate)setTimeout(function(){if(this.isMounted()&&this.refs.dialog&&this.refs.dialog.layer)this.refs.dialog.layer.updatePosition();}.bind(this));},render:function(){var p=g.messengerdotcom,q=p?i:k;return (j.createElement(q,j.__spread({behaviors:{LayerFadeOnHide:h}},this.props,{ref:"dialog"}),this.props.children));}});e.exports=o;},null);
__d("P2PDialogBody.react",["CurrentEnvironment","MessengerDialogBody.react","React","XUIDialogBody.react"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i.createClass({displayName:"P2PDialogBody",render:function(){var l=g.messengerdotcom,m=l?h:j;return (i.createElement(m,i.__spread({},this.props),this.props.children));}});e.exports=k;},null);
__d("P2PDialogFooter.react",["CurrentEnvironment","MessengerDialogFooter.react","React","XUIDialogFooter.react","cloneWithProps","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=i.createClass({displayName:"P2PDialogFooter",render:function(){var n=g.messengerdotcom,o=n?h:j,p,q=this.props.children;if(n){p=i.Children.count(this.props.children);q=i.Children.map(this.props.children,function(r,s){if(!r)return null;return k(r,{className:"_4ec0",type:s===0&&p===2?'secondary':'primary'});});}return (i.createElement(o,i.__spread({},this.props),q));}});e.exports=m;},null);
__d("P2PDialogTitle.react",["CurrentEnvironment","MessengerDialogHeader.react","React","XUIDialogTitle.react"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i.createClass({displayName:"P2PDialogTitle",render:function(){var l=g.messengerdotcom,m=l?h:j;return (i.createElement(m,i.__spread({},this.props),this.props.children));}});e.exports=k;},null);
__d("P2PText.react",["CurrentEnvironment","MessengerText.react","React","XUIGrayText.react"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i,l=k.PropTypes,m=i.createClass({displayName:"P2PText",propTypes:{type:l.oneOf(['primary','secondary']).isRequired},render:function(){var n=g.messengerdotcom,o=n?h:j,p=this.props,q=p.type,r=this.props;if(!n)r=Object.assign({},this.props,{display:this.props.display||'block',shade:q==='primary'?'dark':'light',size:'small'});return (i.createElement(o,i.__spread({},r),this.props.children));}});e.exports=m;},null);
__d("P2PErrorDialog.react",["React","P2PButton.react","P2PDialog.react","P2PDialogBody.react","P2PDialogFooter.react","P2PDialogTitle.react","P2PText.react","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=g,q=p.PropTypes,r=g.createClass({displayName:"P2PErrorDialog",propTypes:{allowBack:q.bool,onBackClick:q.func,onOKClick:q.func,error:q.object,title:q.string},getDefaultProps:function(){return {allowBack:false,onBackClick:n,onOKClick:n,error:null,title:o._("Problem")};},handleBackButtonClick:function(){this.props.onBackClick();},handleOKButtonClick:function(){this.props.onOKClick();},renderBackButton:function(){var s=null;if(this.props.allowBack)s=g.createElement(h,{label:o._("Back"),onClick:this.handleBackButtonClick,use:"default"});return s;},renderErrorContent:function(){var s=this.props.error;if(s.message.__html){return (g.createElement(m,{dangerouslySetInnerHTML:s.message,type:"primary"}));}else return g.createElement(m,{type:"primary"},s.message);},render:function(){return (g.createElement(i,{layerHideOnBlur:false,shown:true,width:300},g.createElement(l,{showCloseButton:false},this.props.title),g.createElement(j,null,this.renderErrorContent()),g.createElement(k,null,this.renderBackButton(),g.createElement(h,{label:o._("OK"),onClick:this.handleOKButtonClick,use:"default"}))));}});e.exports=r;},null);
__d("P2PErrorNotice.react",["React","XUINotice.react","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g,k=j.PropTypes,l=g.createClass({displayName:"P2PErrorNotice",propTypes:{error:k.object},getDefaultProps:function(){return {error:null};},renderErrorContent:function(){var m=this.props.error;if(m.message.__html){return g.createElement("span",{dangerouslySetInnerHTML:m.message});}else return g.createElement("span",null,m.message);},render:function(){return (g.createElement(h,{className:"_3-8n",use:"warn"},this.renderErrorContent()));}});e.exports=l;},null);
__d("P2PCreditCardForm.react",["CreditCardFormParam","KappaWrapper","React","P2PCreditCardNumberFormField.react","P2PCreditCardExpDateFormField.react","P2PCreditCardCVCFormField.react","P2PCreditCardZipCodeFormField.react","P2PErrorDialog.react","P2PErrorNotice.react","ReactLayeredComponentMixin","cx","emptyFunction","fbt","getObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();'use strict';var u=i,v=u.PropTypes,w=i.createClass({displayName:"P2PCreditCardForm",mixins:[p],propTypes:{cscMaxLength:v.number,editMode:v.bool,onErrorDialogOKClick:v.func,onValidation:v.func,prefilledFormData:v.object,rendersErrorDialog:v.bool,saveErrors:v.object},getDefaultProps:function(){return {cscMaxLength:null,editMode:false,onErrorDialogOKClick:r,onValidation:r,prefilledFormData:{},rendersErrorDialog:false,saveErrors:null};},getInitialState:function(){var x={};x[g.CARD_NUMBER]={};x[g.CARD_NUMBER].valid=false;x[g.CARD_NUMBER].value=this.props.prefilledFormData[g.CARD_NUMBER]||'';x[g.CARD_EXPIRATION]={};x[g.CARD_EXPIRATION].valid=false;x[g.CARD_EXPIRATION].value=this.props.prefilledFormData[g.CARD_EXPIRATION]||'';x[g.CSC]={};x[g.CSC].valid=false;x[g.CSC].value=this.props.prefilledFormData[g.CSC]||'';x[g.ZIP]={};x[g.ZIP].valid=false;x[g.ZIP].value=this.props.prefilledFormData[g.ZIP]||'';return {isValid:false,fields:x};},componentWillMount:function(){h.start(6,3,0);},handleFormValueChange:function(x,y,z){var aa=this.state.fields;aa[x]={valid:z,value:y};this.validateForm();},validateForm:function(){var x=true,y=this.state.fields;x=!t(y).some(function(z){return !z.valid;});this.setState({isValid:x});this.props.onValidation(x,this.serializeFormFields());},serializeFormFields:function(){var x=this.state.fields,y={};for(var z in x)if(x.hasOwnProperty(z))y[z]=x[z].value;return y;},getSaveError:function(x){var y='',z=this.props.saveErrors;if(z&&z.fields&&z.fields[x])y=z.fields[x].message;return y;},isCreditCardNumberMasked:function(){return this.props.editMode;},isCreditCardNumberFocused:function(){return !this.props.editMode;},isExpFocused:function(){return this.props.editMode;},renderGeneralError:function(){var x=this.getGeneralError();if(!x)return;return (i.createElement(o,{error:x}));},getGeneralError:function(){if(this.props.saveErrors&&this.props.saveErrors.general)return this.props.saveErrors.general;return null;},handleErrorOKClick:function(){this.props.onErrorDialogOKClick();},renderLayers:function(){var x=this.getGeneralError();if(!this.props.rendersErrorDialog||!x)return {};return {errorMessageDialog:i.createElement(n,{error:x,onOKClick:this.handleErrorOKClick,title:s._("Problem Saving Card")})};},render:function(){return (i.createElement("form",{className:"_3bez"},!this.props.rendersErrorDialog?this.renderGeneralError():null,i.createElement("div",{className:"_2xxs _2xxt"},i.createElement(j,{reference:g.CARD_NUMBER,onChange:this.handleFormValueChange,saveError:this.getSaveError(g.CARD_NUMBER),value:this.state.fields[g.CARD_NUMBER].value,isMasked:this.isCreditCardNumberMasked(),focused:this.isCreditCardNumberFocused()})),i.createElement("div",{className:"_2xxs _2xxu"},i.createElement(k,{reference:g.CARD_EXPIRATION,focused:this.isExpFocused(),onChange:this.handleFormValueChange,saveError:this.getSaveError(g.CARD_EXPIRATION),value:this.state.fields[g.CARD_EXPIRATION].value}),i.createElement(l,{reference:g.CSC,onChange:this.handleFormValueChange,saveError:this.getSaveError(g.CSC),cscMaxLength:this.props.cscMaxLength,creditCardNumber:this.state.fields[g.CARD_NUMBER].value,value:this.state.fields[g.CSC].value})),i.createElement("div",{className:"_2xxs _2xxv"},i.createElement(m,{reference:g.ZIP,onChange:this.handleFormValueChange,saveError:this.getSaveError(g.ZIP),value:this.state.fields[g.ZIP].value}))));}});e.exports=w;},null);
__d("P2PActionConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g={CREDIT_CARDS_UPDATED:'credit_cards_updated',CREDIT_CARD_ADDED:'credit_card_added',CREDIT_CARD_ADDED_ERROR:'credit_card_added_error',CREDIT_CARD_DELETED:'credit_card_deleted',CREDIT_CARD_DELETED_ERROR:'credit_card_deleted_error',CREDIT_CARD_UPDATED:'credit_card_updated',CREDIT_CARD_UPDATED_ERROR:'credit_card_updated_error',PRESET_CREDIT_CARD_UPDATED:'preset_credit_card_updated',PRESET_CREDIT_CARD_UPDATED_ERROR:'preset_credit_card_updated_error',CREDIT_CARD_VERIFIED:'credit_card_verified',CREDIT_CARD_VERIFIED_ERROR:'credit_card_verified_error',TRANSFERS_UPDATED:'transfers_updated',TRANSFERS_UPDATED_ERROR:'transfers_updated_error',NUX_TRANSFERS_UPDATED:'nux_transfers_updated',TRANSFER_ADDED:'transfer_added',TRANSFER_ADDED_ERROR:'transfer_added_error',TRANSFER_UPDATED:'transfer_updated',TRANSFER_UPDATED_ERROR:'transfer_updated_error',TRANSFER_ACCEPTED:'transfer_accepted',TRANSFER_DECLINED:'transfer_declined',CHAT_SEND_VIEW_OPENED:'chat_send_view_opened',CHAT_SEND_VIEW_CLOSED:'chat_send_view_closed'};e.exports=g;},null);
__d("P2PDispatcher",["Dispatcher"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';e.exports=new g();},null);
__d("P2PActions",["P2PActionConstants","P2PDispatcher"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i={updateCreditCards:function(j){h.dispatch({type:g.CREDIT_CARDS_UPDATED,data:j});},addCreditCard:function(j){h.dispatch({type:g.CREDIT_CARD_ADDED,data:j});},addCreditCardError:function(j){h.dispatch({type:g.CREDIT_CARD_ADDED_ERROR,data:j});},updatePresetCreditCard:function(j){h.dispatch({type:g.PRESET_CREDIT_CARD_UPDATED,data:j});},updatePresetCreditCardError:function(j){h.dispatch({type:g.PRESET_CREDIT_CARD_UPDATED_ERROR,data:j});},updateCreditCard:function(j){h.dispatch({type:g.CREDIT_CARD_UPDATED,data:j});},updateCreditCardError:function(j){h.dispatch({type:g.CREDIT_CARD_UPDATED_ERROR,data:j});},deleteCreditCard:function(j){h.dispatch({type:g.CREDIT_CARD_DELETED,data:j});},deleteCreditCardError:function(j){h.dispatch({type:g.CREDIT_CARD_DELETED_ERROR,data:j});},verifyCreditCard:function(j){h.dispatch({type:g.CREDIT_CARD_VERIFIED,data:j});},verifyCreditCardError:function(j){h.dispatch({type:g.CREDIT_CARD_VERIFIED_ERROR,data:j});},updateTransfers:function(j){h.dispatch({type:g.TRANSFERS_UPDATED,data:j});},updateTransfersError:function(j){h.dispatch({type:g.TRANSFERS_UPDATED_ERROR,data:j});},updateNUXTransfers:function(j){h.dispatch({type:g.NUX_TRANSFERS_UPDATED,data:j});},transferAdded:function(j){h.dispatch({type:g.TRANSFER_ADDED,data:j});},transferAddedError:function(j){h.dispatch({type:g.TRANSFER_ADDED_ERROR,data:j});},transferUpdated:function(j){h.dispatch({type:g.TRANSFER_UPDATED,data:j});},transferUpdatedError:function(j){h.dispatch({type:g.TRANSFER_UPDATED_ERROR,data:j});},transferAccepted:function(){h.dispatch({type:g.TRANSFER_ACCEPTED});},transferDeclined:function(j){h.dispatch({type:g.TRANSFER_DECLINED,data:j});},chatSendViewOpened:function(j,k){h.dispatch({type:g.CHAT_SEND_VIEW_OPENED,data:{recipientID:j,amount:k}});},chatSendViewClosed:function(j){h.dispatch({type:g.CHAT_SEND_VIEW_CLOSED,data:{recipientID:j}});}};e.exports=i;},null);
__d("P2PAPIUtils",["CreditCardFormParam","fbt","guid","merge"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={genRequestID:function(){return 'id:'+i()+':'+Date.now();},getUncaughtErrorMessage:function(){return (h._("Sorry, something went wrong. Please try again later."));},prepareCardMutationData:function(l){var m={},n=l[g.CARD_NUMBER].replace(/ /g,'');m[g.CARD_NUMBER]=n;if(typeof l[g.CARD_EXPIRATION]==='string'){var o=l[g.CARD_EXPIRATION].split('/');m[g.MONTH]=o[0];m[g.YEAR]=o[1];m[g.CARD_EXPIRATION]={};m[g.CARD_EXPIRATION][g.MONTH]=m[g.MONTH];m[g.CARD_EXPIRATION][g.YEAR]=m[g.YEAR];}else{m[g.MONTH]=l[g.CARD_EXPIRATION][g.MONTH];m[g.YEAR]=l[g.CARD_EXPIRATION][g.YEAR];}return j(l,m);}};e.exports=k;},null);
__d("XP2PCreditCardDeleteController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/credit_cards\/_delete\/",{});},null);
__d("XP2PCreditCardUpdateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/credit_cards\/_update\/",{});},null);
__d("XP2PCreditCardCreateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/credit_cards\/_create\/",{});},null);
__d("XP2PCreditCardsController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/credit_cards\/",{type:{type:"Int",defaultValue:1}});},null);
__d("XP2PPasswordProtectionStatusController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/password_protection_status\/",{});},null);
__d("XP2PPasswordProtectionStatusUpdateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/password_protection_status\/_update\/",{});},null);
__d("XP2PPresetCreditCardSetController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/preset_credit_card\/_set\/",{});},null);
__d("XP2PTransactionsCreateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/transactions\/_create\/",{});},null);
__d("XP2PTransactionsController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/transactions\/",{since:{type:"Int"}});},null);
__d("XP2PTransactionsDeclineController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/transactions\/_decline\/",{});},null);
__d("XP2PTransactionsCancelController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/transactions\/_cancel\/",{});},null);
__d("XP2PCreditCardVerifyController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/credit_cards\/_verify\/",{});},null);
__d("P2PAPI",["AsyncRequest","CreditCardFormParam","P2PActions","P2PAPIUtils","P2PPasswordProtectionParam","P2PPaymentCreditCardsTypes","P2PTransferParam","ImmutableObject","URI","XP2PCreditCardDeleteController","XP2PCreditCardUpdateController","XP2PCreditCardCreateController","XP2PCreditCardsController","XP2PPasswordProtectionStatusController","XP2PPasswordProtectionStatusUpdateController","XP2PPresetCreditCardSetController","XP2PTransactionsCreateController","XP2PTransactionsController","XP2PTransactionsDeclineController","XP2PTransactionsCancelController","XP2PCreditCardVerifyController","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba){b.__markCompiled&&b.__markCompiled();'use strict';var ca={getAllCreditCards:function(){var da=(s.getURIBuilder()).getURI();new g().setData({type:l.SENDING}).setURI(da).setMethod('GET').setReadOnly(true).setHandler(function(ea){var fa=ea.getPayload();if(!fa.error)i.updateCreditCards(fa);}.bind(this)).send();},createTransaction:function(da){var ea=(w.getURIBuilder()).getURI(),fa={},ga=da.formData,ha=da.success||ba,ia=da.error||ba;fa[h.CREDENTIAL_ID]=ga[h.CREDENTIAL_ID];fa.amount=ga.amount;fa.receiver_id=ga.receiverId;fa.offline_threading_id=j.genRequestID();new g().setData(fa).setMethod('POST').setURI(ea).setHandler(function(ja){var ka=ja?ja.getPayload():{};if(ka.error){ia(ka.error);}else{ha(ka);this.getAllCreditCards();}}.bind(this)).setErrorHandler(function(){ia({message:j.getUncaughtErrorMessage()});}.bind(this)).send();},addCreditCard:function(da){var ea=(r.getURIBuilder()).getURI().getPath(),fa=o('/ajax/payment/token_proxy.php').addQueryData('tpe',ea);da=j.prepareCardMutationData(da);var ga=new n(da);new g().setData(da).setMethod('POST').setURI(fa).setHandler(function(ha){var ia=ha.getPayload(),ja={};if(!ia.errors){ja[h.CREDENTIAL_ID]=ia[h.CARD_FBID];ja.isPreset=ia.isPreset;ja.isVerified=ia.isVerified;ja.passwordProtection=ia.passwordProtection;ga=n.set(ga,ja);i.addCreditCard(ga);}else i.addCreditCardError(Object.assign({requestID:ga.requestID},ia));}.bind(this)).setErrorHandler(function(){i.addCreditCardError({requestID:ga.requestID,errors:{general:{message:j.getUncaughtErrorMessage()}}});}.bind(this)).send();},getTransactions:function(da){da=da||{};var ea={},fa=da,ga=(x.getURIBuilder()).getURI(),ha=new n(fa);if(fa.since)ea.since=fa.since;return new g().setData(ea).setURI(ga).setMethod('GET').setReadOnly(true).setHandler(function(ia){var ja=ia.getPayload();if(!ja.error){i.updateTransfers(ja);}else i.updateTransfersError(Object.assign({requestID:ha.requestID},ja));}.bind(this)).setErrorHandler(function(){i.updateTransfersError({error:{message:j.getUncaughtErrorMessage()},requestID:ha.requestID});}.bind(this)).send();},getNUXTransactions:function(){var da=(new Date()),ea=Math.round((da.setDate(da.getDate()-15))/1000),fa=(x.getURIBuilder()).getURI();return new g().setData({since:ea}).setURI(fa).setMethod('GET').setReadOnly(true).setHandler(function(ga){var ha=ga.getPayload();if(!ha.error)i.updateNUXTransfers(ha);}.bind(this)).send();},updatePresetCreditCard:function(da){var ea=(v.getURIBuilder()).getURI();new g().setData(da).setURI(ea).setMethod('POST').setHandler(function(fa){var ga=fa.getPayload();if(!ga.error){i.updatePresetCreditCard(Object.assign({},ga,{requestID:da.requestID}));i.transferAccepted();}else i.updatePresetCreditCardError(Object.assign({},ga,{requestID:da.requestID}));}.bind(this)).setErrorHandler(function(){i.updatePresetCreditCardError({error:{message:j.getUncaughtErrorMessage()},requestID:da.requestID});}.bind(this)).send();},updateCreditCard:function(da){var ea=(q.getURIBuilder()).getURI().getPath(),fa=o('/ajax/payment/token_proxy.php').addQueryData('tpe',ea);da=j.prepareCardMutationData(da);var ga=new n(da);new g().setData(da).setMethod('POST').setURI(fa).setHandler(function(ha){var ia=ha.getPayload();if(!ia.errors){i.updateCreditCard(ga);}else i.updateCreditCardError(Object.assign({},ia,{requestID:ga.requestID}));}.bind(this)).setErrorHandler(function(){i.updateCreditCardError({errors:{general:{message:j.getUncaughtErrorMessage()}},requestID:ga.requestID});}.bind(this)).send();},deleteCreditCard:function(da){var ea=(p.getURIBuilder()).getURI();new g().setData(da).setMethod('POST').setURI(ea).setHandler(function(fa){var ga=fa.getPayload();if(!ga.error){i.deleteCreditCard(Object.assign({},ga,{requestID:da.requestID}));}else i.deleteCreditCardError(Object.assign({},ga,{requestID:da.requestID}));}.bind(this)).setErrorHandler(function(){i.deleteCreditCardError({error:{message:j.getUncaughtErrorMessage()},requestID:da.requestID});}.bind(this)).send();},getPasswordProtectionSetting:function(da){var ea=(t.getURIBuilder()).getURI(),fa=da.success||ba,ga=da.error||ba;new g().setURI(ea).setMethod('GET').setReadOnly(true).setHandler(function(ha){var ia=ha?ha.getPayload():[];if(ia.error){ga();}else fa(ia);}.bind(this)).setErrorHandler(function(){ga();}.bind(this)).send();},setPasswordProtectionSetting:function(da){var ea=(u.getURIBuilder()).getURI(),fa=da.formData,ga=da.success||ba,ha=da.error||ba,ia={};ia[k.STATUS]=fa[k.STATUS];new g().setData(ia).setURI(ea).setMethod('POST').setHandler(function(ja){var ka=ja?ja.getPayload():{};if(ka.error){ha(ka.error);}else ga();}.bind(this)).setErrorHandler(function(){ha();}.bind(this)).send();},declineTransaction:function(da){var ea=(y.getURIBuilder()).getURI(),fa=da.formData,ga=da.success||ba,ha=da.error||ba,ia={};ia[m.TRANSFER_ID]=fa[m.TRANSFER_ID];new g().setData(ia).setURI(ea).setMethod('POST').setHandler(function(ja){var ka=ja?ja.getPayload():{},la={};if(ka.error){ha(ka.error);}else{ga();la[m.TRANSFER_ID]=ia[m.TRANSFER_ID];i.transferDeclined(la);}}.bind(this)).setErrorHandler(function(){ha();}.bind(this)).send();},cancelTransaction:function(da){var ea=(z.getURIBuilder()).getURI(),fa=da.formData,ga=da.success||ba,ha=da.error||ba,ia={};ia[m.TRANSFER_ID]=fa[m.TRANSFER_ID];new g().setData(ia).setURI(ea).setMethod('POST').setHandler(function(ja){var ka=ja?ja.getPayload():{};if(ka.error){ha(ka.error);}else ga();}.bind(this)).setErrorHandler(function(){ha();}.bind(this)).send();},verifyCreditCard:function(da){var ea=(aa.getURIBuilder()).getURI().getPath(),fa=o('/ajax/payment/token_proxy.php').addQueryData('tpe',ea);new g().setData(da).setMethod('POST').setURI(fa).setHandler(function(ga){var ha=ga.getPayload();if(!ha.error){i.verifyCreditCard(Object.assign({},ha,{requestID:da.requestID}));}else i.verifyCreditCardError(Object.assign({},ha,{requestID:da.requestID}));}.bind(this)).setErrorHandler(function(){i.verifyCreditCardError({error:{message:j.getUncaughtErrorMessage()},requestID:da.requestID});}.bind(this)).send();}};e.exports=ca;},null);
__d("P2PCreditCard",["CreditCardFormParam","CreditCardTypeEnum","PaymentMethodUtils","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l={visa:{image:k('/images/payments/icons/visa.png'),imageLarge:k('/images/payments/icons/visa-lg.png'),name:'Visa'},mc:{image:k('/images/payments/icons/mc.png'),imageLarge:k('/images/payments/icons/mc-lg.png'),name:'MasterCard'},disc:{image:k('/images/payments/icons/disc.png'),imageLarge:k('/images/payments/icons/disc-lg.png'),name:'Discover'},jcb:{image:k('/images/payments/icons/jcb.png'),imageLarge:k('/images/payments/icons/jcb-lg.png'),name:'JCB'},amex:{image:k('/images/payments/icons/amex.png'),imageLarge:k('/images/payments/icons/amex-lg.png'),name:'American Express'},unknown:{image:k('/images/brands/credit_card/credit_32.png'),imageLarge:k('/images/brands/credit_card/credit_32.png'),name:j._("Unknown Card Type")}};function m(n){this.setCredentialId(n[g.CREDENTIAL_ID]);this.setCardType(n[g.CARD_TYPE]);this.setCreditCardNumber(n[g.CARD_NUMBER]);this.setSelected(n.selected);this.setZipCode(n[g.ZIP]);this.setCSC(n[g.CSC]);this.setExp(n[g.CARD_EXPIRATION]);this.setIsPreset(n.isPreset);this.setIsVerified(n.isVerified);this.setIsMobileVerified(n.isMobileVerified);}m.prototype.getCreditCardNumber=function(){return this[g.CARD_NUMBER];};m.prototype.setCreditCardNumber=function(n){n=n.replace(/ /g,'');this.setCardProviderProps(this[g.CARD_TYPE],n);n=n.substr(n.length-4);this[g.CARD_NUMBER]=n;};m.prototype.setCardProviderProps=function(n,o){var p=this.$P2PCreditCard0(n,o);if(l[p]){this.setImage(l[p].image);this.setImageLarge(l[p].imageLarge);this.setName(l[p].name);}};m.prototype.getExp=function(){return this[g.CARD_EXPIRATION];};m.prototype.getExpFormatted=function(){var n=this[g.CARD_EXPIRATION];return n?n[g.MONTH]+'/'+n[g.YEAR]:'';};m.prototype.getExpFormattedShort=function(){var n=this[g.CARD_EXPIRATION],o='';if(n&&n[g.MONTH]&&n[g.YEAR]){o=n[g.MONTH]+'/';if(n[g.YEAR].length===4){o+=n[g.YEAR].substr(2);}else o+=n[g.YEAR];}return o;};m.prototype.setExp=function(n){if(!n)return;var o,p,q={};q[g.MONTH]=n[g.MONTH];q[g.YEAR]=n[g.YEAR];if(q[g.MONTH]&&q[g.MONTH].length===1)q[g.MONTH]='0'+q[g.MONTH];if(q[g.YEAR]&&q[g.YEAR].length===2){o=(new Date()).getFullYear()+'';p=o.substr(0,2);q[g.YEAR]=p+q[g.YEAR];}this[g.CARD_EXPIRATION]=q;};m.prototype.getCSC=function(){return this[g.CSC];};m.prototype.setCSC=function(n){this[g.CSC]=n;};m.prototype.getZipCode=function(){return this[g.ZIP];};m.prototype.setZipCode=function(n){this[g.ZIP]=n;};m.prototype.getSelected=function(){return this.$P2PCreditCard1;};m.prototype.setSelected=function(n){this.$P2PCreditCard1=n;};m.prototype.getCardType=function(){return this[g.CARD_TYPE];};m.prototype.setCardType=function(n){this[g.CARD_TYPE]=n;this.setCardProviderProps(n,this[g.CARD_NUMBER]);};m.prototype.getCredentialId=function(){return this[g.CREDENTIAL_ID];};m.prototype.setCredentialId=function(n){this[g.CREDENTIAL_ID]=n;};m.prototype.$P2PCreditCard0=function(n,o){var p='default',q,r;if(n){q=Object.keys(h).filter(function(s){return h[s]===n;})[0];p=this.$P2PCreditCard2(q);}else if(o){r=i.getCardType(o);if(r)p=r.name;}return p;};m.prototype.getImage=function(){return this.$P2PCreditCard3||l.unknown.image;};m.prototype.setImage=function(n){this.$P2PCreditCard3=n;};m.prototype.getImageLarge=function(){return this.$P2PCreditCard4||l.unknown.imageLarge;};m.prototype.setImageLarge=function(n){this.$P2PCreditCard4=n;};m.prototype.getName=function(){return this.$P2PCreditCard5||l.unknown.name;};m.prototype.setName=function(n){this.$P2PCreditCard5=n;};m.prototype.getIsPreset=function(){return this.$P2PCreditCard6;};m.prototype.setIsPreset=function(n){this.$P2PCreditCard6=n||false;};m.prototype.$P2PCreditCard2=function(n){switch(n){case 'VISA':n='visa';break;case 'AMERICANEXPRESS':n='amex';break;case 'MASTERCARD':n='mc';break;case 'DISCOVER':n='disc';break;case 'JCB':n='jcb';break;default:n='unknown';break;}return n;};m.prototype.getCreditCardNumberFormatted=function(){return '*'+this[g.CARD_NUMBER];};m.prototype.getCreditCardNumberMask=function(){return '**** **** **** '+this[g.CARD_NUMBER];};m.prototype.getMaxCSCLength=function(){var n=this.$P2PCreditCard0(this[g.CARD_TYPE],this[g.CARD_NUMBER]);return n==='amex'?4:3;};m.prototype.getIsVerified=function(){return this.$P2PCreditCard7||false;};m.prototype.setIsVerified=function(n){this.$P2PCreditCard7=n;};m.prototype.getIsMobileVerified=function(){return this.$P2PCreditCard8||false;};m.prototype.setIsMobileVerified=function(n){this.$P2PCreditCard8=n;};m.prototype.isExpired=function(){var n=this.getExp();if(!n)return false;var o=n,p=o.month,q=o.year,r=new Date(),s=r.getFullYear()+'',t=(r.getMonth()+1)+'';t=t.length===1?'0'+t:t;return q<s||(s===q&&p<t);};e.exports=m;},null);
__d("P2PChooseCreditCardForm.react",["CurrentEnvironment","Image.react","P2PCreditCard","React","XUIRadioList.react","XUIGrayText.react","cx","emptyFunction","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q=k.Item,r=j,s=r.PropTypes,t='add_debit_card',u=g.messengerdotcom,v=j.createClass({displayName:"P2PChooseCreditCardForm",propTypes:{creditCards:s.arrayOf(s.instanceOf(i)),selectedCard:s.instanceOf(i).isRequired},getDefaultProps:function(){return {creditCards:[],selectedCard:null,onChange:n,onAddDebitCardOptionSelected:n,showAddDebitCardOption:false};},getInitialState:function(){return {selectedCard:this.props.selectedCard};},getSelectedCard:function(){return this.state.selectedCard;},onChange:function(w){var x;if(w===t){this.props.onAddDebitCardOptionSelected();}else{x=this.props.creditCards.filter(function(y){return y.getCredentialId()===w;})[0];this.setState({selectedCard:x});this.props.onChange(x);}},renderCardItem:function(w,x){return (j.createElement(q,{className:"_2x6n",key:'item-'+x,value:w.getCredentialId()},j.createElement(l,{className:"_3-8r _2jp9",shade:"dark",weight:"bold"},w.getName()),j.createElement(l,{shade:"dark",weight:"normal"},w.getCreditCardNumberFormatted()),j.createElement(h,{className:"_2x6p",height:24,src:w.getImage(),width:36})));},renderAddDebitCardRadioItem:function(){return (j.createElement(q,{className:"_2x6n _1gri",key:'item-'+this.props.creditCards.length,value:t},j.createElement(l,{className:"_3-8r _2jpa",shade:"dark"},o._("New Debit Card"))));},getRadioListItems:function(){var w=this.props.creditCards,x=w.map(this.renderCardItem);if(this.props.showAddDebitCardOption)x.push(this.renderAddDebitCardRadioItem());return x;},render:function(){return (j.createElement(k,{selectedValue:this.state.selectedCard.getCredentialId(),className:p(this.props.className,(("_2x6r")+(u?' '+"_2jpb":''))),onValueChange:this.onChange},this.getRadioListItems()));}});e.exports=v;},null);
__d("P2PLoadingMask.react",["React","XUISpinner.react","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g,k=j.PropTypes,l=g.createClass({displayName:"P2PLoadingMask",propTypes:{visible:k.bool},getDefaultProps:function(){return {visible:false};},render:function(){if(!this.props.visible)return null;return (g.createElement("div",{className:"_3de"},g.createElement(h,{background:"dark",size:"large",className:"_3df"}),g.createElement("div",{className:"_3dg"})));}});e.exports=l;},null);
__d("P2PLogger",["BanzaiLogger"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h='P2PPaymentLoggerConfig',i={log:function(j,k){k=Object.assign({event:j},k);g.log(h,k);}};e.exports=i;},null);
__d("P2PPasswordProtectionNUXDialog.react",["CurrentEnvironment","Link.react","P2PAPI","P2PErrorDialog.react","P2PLinkConstants","P2PLoadingMask.react","P2PLogger","P2PPaymentLoggerEvent","P2PPaymentLoggerEventFlow","P2PPasswordProtectionParam","P2PPasswordProtectionStatusTypes","React","P2PButton.react","P2PDialog.react","P2PDialogTitle.react","P2PDialogBody.react","P2PDialogFooter.react","P2PText.react","cx","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){b.__markCompiled&&b.__markCompiled();'use strict';var ba=r,ca=ba.PropTypes,da=g.messengerdotcom,ea=r.createClass({displayName:"P2PPasswordProtectionNUXDialog",propTypes:{onComplete:ca.func},getDefaultProps:function(){return {onComplete:z};},getInitialState:function(){return {saveErrorObject:null,loading:false};},componentWillMount:function(){this.log(n.UI_ACTN_INITIATE_PASSWORD_PROTECTION_NUX);},log:function(fa,ga){m.log(fa,Object.assign({www_event_flow:o.UI_FLOW_P2P_SETTINGS},ga));},onSaveClick:function(){this.setState({loading:true,saveErrorObject:null});this.setPasswordProtection(q.ENABLED);this.log(n.UI_ACTN_OPT_IN_PASSWORD_PROTECTION_NUX);},setPasswordProtection:function(fa){var ga={};ga[p.STATUS]=fa;i.setPasswordProtectionSetting({formData:ga,success:this.handleOnSaveSuccess,error:this.handleOnSaveError});},handleOnSaveSuccess:function(){this.setState({loading:false});this.props.onComplete();},handleOnSaveError:function(fa){this.setState({loading:false,saveErrorObject:fa});},isSaveButtonDisabled:function(){return this.state.loading;},isCancelButtonDisabled:function(){return this.state.loading;},onCancelClick:function(){this.setState({loading:true,saveErrorObject:null});this.setPasswordProtection(q.DISABLED);this.log(n.UI_ACTN_OPT_OUT_PASSWORD_PROTECTION_NUX);},handleErrorBackClick:function(){this.setState({saveErrorObject:null});},handleErrorOKClick:function(){this.setState({saveErrorObject:null});this.props.onComplete();},render:function(){var fa=da?320:300;if(this.state.saveErrorObject)return (r.createElement(j,{allowBack:true,title:aa._("Problem Saving"),onBackClick:this.handleErrorBackClick,onOKClick:this.handleErrorOKClick,error:this.state.saveErrorObject}));return (r.createElement(t,{className:((da?"_-el":'')),behaviors:{LayerFadeOnShow:false},layerHideOnBlur:false,shown:true,width:fa},r.createElement(u,{showCloseButton:false},aa._("Use Password?")),r.createElement(v,null,r.createElement(x,{className:"_5sor",type:"primary"},aa._("For additional security, you can enter your Facebook password to send money. You can always update this in {link}.",[aa.param("link",r.createElement(h,{href:k.settingsWWWURI,target:"_blank"},aa._("Settings")))]))),r.createElement(w,null,r.createElement(s,{className:"_5sov",disabled:this.isCancelButtonDisabled(),label:aa._("Not Now"),onClick:this.onCancelClick,size:"medium",use:"default"}),r.createElement(s,{className:"_5sox",disabled:this.isSaveButtonDisabled(),label:aa._("Use Password"),onClick:this.onSaveClick,size:"medium",use:"confirm"})),r.createElement(l,{visible:this.state.loading})));}});e.exports=ea;},null);
__d("P2PSuccessDialog.react",["CurrentEnvironment","Image.react","LayerFadeOnHide","LayerSlowlyFadeOnShow","LeftRight.react","React","P2PButton.react","P2PDialog.react","P2PDialogTitle.react","P2PDialogBody.react","P2PDialogFooter.react","P2PText.react","ix","cx","fbt","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();'use strict';var w=l,x=w.PropTypes,y=l.createClass({displayName:"P2PSuccessDialog",propTypes:{onOKClick:x.func,title:x.string.isRequired},getDefaultProps:function(){return {onOKClick:v};},render:function(){var z=g.messengerdotcom,aa=z?350:300,ba=z?s("/images/p2p/checkmark-messenger.png"):s("/images/p2p/check_mark-sm.png"),ca=[l.createElement("div",{className:"_1tcj",key:"checkmark"},l.createElement(h,{height:50,width:50,src:ba})),l.createElement(r,{className:"_3exn",key:"confirmation_text",type:"primary"},this.props.children)];if(z)ca=l.createElement(k,{direction:"left"},ca);return (l.createElement(n,{behaviors:{LayerFadeOnShow:false,LayerSlowlyFadeOnShow:j,LayerFadeOnHide:i},className:(("_1tck")+(z?' '+"_1tcl":'')),layerHideOnBlur:false,ref:"dialog",repositionOnUpdate:true,shown:true,width:aa},l.createElement("div",{className:"_1tcm"},l.createElement(o,{className:"_1tcn",showCloseButton:false},this.props.title),l.createElement(p,null,ca),l.createElement(q,null,l.createElement(m,{use:"default",label:u._("OK"),onClick:this.props.onOKClick})))));}});e.exports=y;},null);
__d("P2PVerifyCreditCardDialog.react",["CreditCardFormParam","CurrentEnvironment","P2PAPI","P2PAPIUtils","P2PCreditCard","P2PErrorNotice.react","P2PLoadingMask.react","React","P2PButton.react","P2PDialog.react","P2PDialogBody.react","P2PDialogFooter.react","P2PCreditCardCVCFormField.react","P2PCreditCardZipCodeFormField.react","XUICloseButton.react","P2PDialogTitle.react","P2PText.react","cx","emptyFunction","fbt","getObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){b.__markCompiled&&b.__markCompiled();var ba=n,ca=ba.PropTypes,da=h.messengerdotcom,ea=n.createClass({displayName:"P2PVerifyCreditCardDialog",propTypes:{asyncRequestState:ca.object,creditCard:ca.instanceOf(k),onCancel:ca.func,onConfirm:ca.func,isSending:ca.bool},getDefaultProps:function(){return {asyncRequestState:{},creditCard:null,isSending:true,onCancel:y,onError:y,onSuccess:y};},getInitialState:function(){var fa={};fa[g.CSC]={};fa[g.CSC].valid=false;if(this.shouldShowZIPInput()){fa[g.ZIP]={};fa[g.ZIP].valid=false;}return {isValid:false,loading:false,requestID:'',saveError:null,fields:fa};},componentWillReceiveProps:function(fa){var ga=fa.asyncRequestState?fa.asyncRequestState[this.state.requestID]:null;if(ga){this.setState({requestID:''});if(ga.error){this.handleOnSaveError(ga.error);}else this.handleOnSaveSuccess(ga);}},handleOnSaveSuccess:function(fa){this.props.onSuccess(fa);},handleOnSaveError:function(fa){this.setState({loading:false,saveError:fa});},clearSaveError:function(){this.setState({saveError:null});},handleCancelClick:function(){this.props.onCancel();},handleConfirmClick:function(){var fa={},ga=j.genRequestID();fa[g.CREDENTIAL_ID]=this.props.creditCard.getCredentialId();fa[g.CSC]=this.state.fields[g.CSC].value;if(this.state.fields[g.ZIP])fa[g.ZIP]=this.state.fields[g.ZIP].value;this.clearSaveError();this.setState({loading:true,requestID:ga});i.verifyCreditCard(Object.assign({requestID:ga},fa));},handleFormValueChange:function(fa,ga,ha){var ia=this.state.fields;ia[fa].value=ga;ia[fa].valid=ha;this.setState({fields:ia});this.validateForm();},validateForm:function(){var fa=true,ga=this.state.fields;fa=!aa(ga).some(function(ha){return !ha.valid;});this.setState({isValid:fa});},handleCloseButtonClick:function(){this.props.onCancel();},shouldShowZIPInput:function(){var fa=!!(this.props.creditCard.getZipCode());return !fa;},renderError:function(){var fa;if(this.state.saveError)fa=n.createElement(l,{error:this.state.saveError});return fa;},renderCVCFormField:function(){return (n.createElement(s,{cscMaxLength:this.props.creditCard.getMaxCSCLength(),focused:true,onChange:this.handleFormValueChange,reference:'csc',showIcon:false,showPlaceholder:false,showFocusOutline:false}));},renderZIPFormField:function(){return (n.createElement(t,{onChange:this.handleFormValueChange,reference:'zip',showIcon:false,showPlaceholder:false,showFocusOutline:false}));},getMessage:function(){var fa=this.props.creditCard.getName(),ga=this.props.creditCard.getCreditCardNumber();if(this.props.isSending){if(this.shouldShowZIPInput()){return (n.createElement(w,{type:"primary"},z._("Enter the security code on the back of your {credit card issuer} ending in {credit card number last 4 digits} and Billing ZIP Code to send this payment.",[z.param("credit card issuer",fa),z.param("credit card number last 4 digits",ga)])));}else return (n.createElement(w,{type:"primary"},z._("Enter the security code on the back of your {credit card issuer} ending in {credit card number last 4 digits} to send this payment.",[z.param("credit card issuer",fa),z.param("credit card number last 4 digits",ga)])));}else if(this.shouldShowZIPInput()){return (n.createElement(w,{type:"primary"},z._("Enter the security code on the back of your {credit card issuer} ending in {credit card number last 4 digits} and Billing ZIP Code to accept this payment.",[z.param("credit card issuer",fa),z.param("credit card number last 4 digits",ga)])));}else return (n.createElement(w,{type:"primary"},z._("Enter the security code on the back of your {credit card issuer} ending in {credit card number last 4 digits} to accept this payment.",[z.param("credit card issuer",fa),z.param("credit card number last 4 digits",ga)])));},getInputs:function(){var fa,ga=n.createElement("div",{className:"_3yfa"},n.createElement(w,{className:"_197h",type:"primary"},z._("Security Code")),n.createElement("div",{className:"_197i"},this.renderCVCFormField()));if(this.shouldShowZIPInput())fa=n.createElement("div",{className:"_3yfb"},n.createElement(w,{className:"_197h",type:"primary"},z._("Billing ZIP Code")),n.createElement("div",{className:"_197i"},this.renderZIPFormField()));return (n.createElement("div",null,ga,fa));},render:function(){var fa,ga,ha;if(da){ha=320;fa=n.createElement(o,{use:"default",size:"medium",label:z._("Cancel"),disabled:this.state.loading,onClick:this.props.onCancel});}else{ha=300;ga=n.createElement(u,{onClick:this.handleCloseButtonClick});}return (n.createElement(p,{className:((da?"_4ypw":'')),layerHideOnBlur:false,ref:"dialog",repositionOnUpdate:true,shown:true,width:ha},n.createElement(v,{showCloseButton:false},z._("Enter Security Code"),ga),n.createElement(q,null,n.createElement("div",{className:"_197f"},this.getMessage()),this.renderError(),n.createElement("div",{className:"_197g"},this.getInputs())),n.createElement(r,null,fa,n.createElement(o,{label:z._("Confirm"),onClick:this.handleConfirmClick,disabled:!this.state.isValid||this.state.loading,use:"confirm"})),n.createElement(m,{visible:this.state.loading})));}});e.exports=ea;},null);
__d("P2PEditCreditCardDialog.react",["CreditCardFormParam","CurrentEnvironment","React","P2PAPI","P2PAPIUtils","P2PCreditCard","P2PCreditCardForm.react","P2PLoadingMask.react","P2PDialog.react","P2PDialogTitle.react","P2PDialogBody.react","P2PDialogFooter.react","P2PButton.react","P2PText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();'use strict';var w=i,x=w.PropTypes,y=i.createClass({displayName:"P2PEditCreditCardDialog",propTypes:{asyncRequestState:x.object.isRequired,creditCard:x.instanceOf(l).isRequired,onCancel:x.func.isRequired,onSuccess:x.func.isRequired},getInitialState:function(){return {isValid:false,formData:{},loading:false,requestID:'',saveErrors:null};},componentWillReceiveProps:function(z){var aa=z.asyncRequestState?z.asyncRequestState[this.state.requestID]:null;if(aa){this.setState({requestID:''});if(aa.error){this.handleOnSaveError(aa.error);}else this.handleOnSaveSuccess(aa);}},clearSaveErrors:function(){this.setState({saveErrors:null});},onSaveClick:function(z){var aa={},ba=k.genRequestID();aa[g.CREDENTIAL_ID]=this.props.creditCard.getCredentialId();this.clearSaveErrors();this.setState({loading:true,requestID:ba});j.updateCreditCard(Object.assign({requestID:ba},aa,this.state.formData));},handleOnSaveSuccess:function(z){this.props.onSuccess(z);},onCancelClick:function(z){this.props.onCancel();},handleOnSaveError:function(z){this.setState({loading:false,saveErrors:z});},isSaveDisabled:function(){return !this.state.isValid||this.state.loading;},isCancelDisabled:function(){return this.state.loading;},handleValidation:function(z,aa){this.setState({isValid:z,formData:aa});},getPrefilledFormData:function(){var z={};z[g.CARD_NUMBER]=this.props.creditCard.getCreditCardNumberMask();z[g.CARD_EXPIRATION]=this.props.creditCard.getExpFormattedShort();z[g.ZIP]=this.props.creditCard.getZipCode();return z;},handleErrorDialogOKClick:function(){this.clearSaveErrors();},onToggle:function(z){if(!z)this.props.onCancel();},render:function(){var z=h.messengerdotcom,aa=z?350:300;return (i.createElement(o,{layerHideOnBlur:false,onToggle:this.onToggle,repositionOnUpdate:true,shown:true,width:aa},i.createElement(p,null,v._("Update Debit Card")),i.createElement(q,null,i.createElement(t,{className:"_3-96",type:"primary"},v._("Please update the expiration date for your card ending in {card numbers}.",[v.param("card numbers",this.props.creditCard.getCreditCardNumber())])),i.createElement(m,{onValidation:this.handleValidation,saveErrors:this.state.saveErrors,editMode:true,prefilledFormData:this.getPrefilledFormData(),cscMaxLength:this.props.creditCard.getMaxCSCLength()})),i.createElement(r,null,i.createElement(s,{use:"default",size:"medium",label:v._("Cancel"),disabled:this.isCancelDisabled(),onClick:this.onCancelClick}),i.createElement(s,{use:"confirm",size:"medium",label:v._("Save"),disabled:this.isSaveDisabled(),onClick:this.onSaveClick})),i.createElement(n,{visible:this.state.loading})));}});e.exports=y;},null);
__d("P2PCreditCardStore",["P2PActionConstants","CreditCardFormParam","EventEmitter","ImmutableObject","P2PAPI","P2PCreditCard","P2PDispatcher"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n,o,p,q,r;function s(x,y){if(x)r[x]=new j(y);}function t(x,y){if(x)r[x]={error:y};}for(var u in i)if(i.hasOwnProperty(u))w[u]=i[u];var v=i===null?null:i.prototype;w.prototype=Object.create(v);w.prototype.constructor=w;w.__superConstructor__=i;function w(){i.call(this);p=false;q=false;n=[];r={};o=m.register(this.onEventDispatched.bind(this));}w.prototype.onEventDispatched=function(x){var y=x.data,z=x.type;switch(z){case g.CREDIT_CARDS_UPDATED:this.handleCreditCardsUpdated(y);this.emit('change');break;case g.CREDIT_CARD_ADDED:this.handleCreditCardAdded(y);this.emit('change');break;case g.CREDIT_CARD_ADDED_ERROR:this.handleCreditCardAddedError(y);this.emit('change');break;case g.CREDIT_CARD_DELETED:this.handleCreditCardDeleted(y);this.emit('change');break;case g.CREDIT_CARD_DELETED_ERROR:this.handleCreditCardDeletedError(y);this.emit('change');break;case g.CREDIT_CARD_UPDATED:this.handleCreditCardUpdated(y);this.emit('change');break;case g.CREDIT_CARD_UPDATED_ERROR:this.handleCreditCardUpdatedError(y);this.emit('change');break;case g.PRESET_CREDIT_CARD_UPDATED:this.handlePresetCreditCardUpdated(y);this.emit('change');break;case g.PRESET_CREDIT_CARD_UPDATED_ERROR:this.handlePresetCreditCardUpdatedError(y);this.emit('change');break;case g.CREDIT_CARD_VERIFIED:this.handleCreditCardVerified(y);this.emit('change');break;case g.CREDIT_CARD_VERIFIED_ERROR:this.handleCreditCardVerifiedError(y);this.emit('change');break;}};w.prototype.getAsyncRequestState=function(){return r;};w.prototype.isCreditCardsFetchComplete=function(){return p;};w.prototype.handleCreditCardsUpdated=function(x){p=true;n=x.map(function(y){return new l(y);});};w.prototype.handleCreditCardAdded=function(x){var y=false;s(x.requestID,x);n.forEach(function(z){if(z.getCredentialId()===x[h.CREDENTIAL_ID])y=true;});if(y)return;n.push(new l(x));};w.prototype.handleCreditCardAddedError=function(x){t(x.requestID,x.errors);};w.prototype.handleCreditCardDeleted=function(x){var y=x[h.CARD_FBID];s(x.requestID,x);n=n.filter(function(z){return z.getCredentialId()!==y;});};w.prototype.handleCreditCardDeletedError=function(x){t(x.requestID,x.error);};w.prototype.handleCreditCardUpdated=function(x){s(x.requestID,x);n.forEach(function(y,z){if(y.getCredentialId()===x[h.CREDENTIAL_ID]){y.setExp(x[h.CARD_EXPIRATION]);y.setZipCode(x[h.ZIP]);}});};w.prototype.handleCreditCardUpdatedError=function(x){t(x.requestID,x.errors);};w.prototype.handlePresetCreditCardUpdated=function(x){var y=x[h.CARD_FBID];s(x.requestID,x);var z=n.filter(function(ba){return ba.getIsPreset();})[0];if(z)z.setIsPreset(false);var aa=n.filter(function(ba){return ba.getCredentialId()===y;})[0];if(aa)aa.setIsPreset(true);};w.prototype.handlePresetCreditCardUpdatedError=function(x){t(x.requestID,x.error);};w.prototype.handleCreditCardVerified=function(x){s(x.requestID,x);n.forEach(function(y,z){if(y.getCredentialId()===x[h.CREDENTIAL_ID])y.setIsVerified(true);});};w.prototype.handleCreditCardVerifiedError=function(x){t(x.requestID,x.error);};w.prototype.getAll=function(){if(!q){q=true;k.getAllCreditCards();}return n;};w.prototype.getAllSettingsEligible=function(){var x=this.getAll();return x.filter(function(y){return y.getIsVerified()||y.getIsMobileVerified();});};w.prototype.getPresetCard=function(){var x=this.getAll();return x.filter(function(y){return y.getIsPreset();})[0];};e.exports=new w();},null);
__d("P2PNUXRendererUtils",["MercuryConstants","CurrentUser","ImmutableObject","MercuryAttachmentType","P2PTransferParam","P2PTransferStatus","StoryAttachmentStyle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=g.MercurySupportedShareType,o={getTransferFromMessage:function(p){var q,r;if(!p||!p.attachments||!p.attachments.length)return;r=p.attachments[0];if(this.isShareAttachment(r)){q=r.share.target;}else if(r.share_data_type===n.FB_ORION)q=r.metadata;if(q)q=new i(q);return q;},isShareAttachment:function(p){return !!(typeof p!=='string'&&p.attach_type==j.SHARE&&p.share&&p.share.style_list&&p.share.style_list.indexOf(m.ORION)>=0);},doesNUXNeedCreditCards:function(p){var q=h.getID()===p.sender.id;return (!q&&p[k.STATUS]===l.PENDING_RECIPIENT_NUX);},isRecipientActionableStatus:function(p){var q=p[k.STATUS],r=h.getID()===p.sender.id;return (!r&&(q===l.PENDING_RECIPIENT_NUX||q===l.PENDING_RECIPIENT_VERIFICATION||q===l.PENDING_PUSH_FAIL));}};e.exports=o;},null);
__d("P2PTransferStore",["Arbiter","P2PActionConstants","ChannelConstants","CreditCardFormParam","EventEmitter","ImmutableObject","P2PActions","P2PAPI","P2PChannelType","P2PCreditCard","P2PDispatcher","P2PNUXRendererUtils","P2PTransferParam","P2PTransferStatus","MercuryThreadInformer"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();'use strict';var u=b('MercuryThreadInformer').get(),v,w,x,y,z,aa,ba,ca,da,ea=null,fa=false,ga;function ha(ma,na){if(ma)da[ma]=new l(na);}function ia(ma,na){if(ma)da[ma]={error:na};}for(var ja in k)if(k.hasOwnProperty(ja))la[ja]=k[ja];var ka=k===null?null:k.prototype;la.prototype=Object.create(ka);la.prototype.constructor=la;la.__superConstructor__=k;function la(){k.call(this);v=false;x=[];ga={};da={};z=g.subscribe(i.getArbiterType(o.TRANSFER_STATUS_CHANGED),this.handleChannelTransferStatusChanged.bind(this));aa=u.subscribe('messages-received',this.handleMessageReceived.bind(this));ba=u.subscribe('messages-updated',this.handleMessageUpdated.bind(this));y=q.register(this.onEventDispatched.bind(this));}la.prototype.onEventDispatched=function(ma){var na=ma.data,oa=ma.type;switch(oa){case h.TRANSFERS_UPDATED:this.handleTransfersUpdated(na);this.emit('change');break;case h.TRANSFERS_UPDATED_ERROR:this.handleTransfersUpdatedError(na);this.emit('change');break;case h.NUX_TRANSFERS_UPDATED:this.handleNUXTransfersUpdated(na);this.emit('change');break;case h.TRANSFER_ADDED:this.handleTransferAdded(na);this.emit('change');break;case h.TRANSFER_UPDATED:this.handleTransferUpdated(na);this.emit('change');break;case h.TRANSFER_ACCEPTED:this.handleTransferAccepted();this.emit('change');break;case h.TRANSFER_DECLINED:this.handleTransferDeclined(na);this.emit('change');break;case h.CHAT_SEND_VIEW_OPENED:this.handleChatSendViewOpened(na.recipientID,na.amount);this.emit('change');break;case h.CHAT_SEND_VIEW_CLOSED:this.handleChatSendViewClosed(na.recipientID);this.emit('change');break;}};la.prototype.getAsyncRequestState=function(){return da;};la.prototype.handleTransfersUpdated=function(ma){ca=null;fa=true;x=ma.map(function(na){var oa={};if(na.creditCard){oa[j.CREDENTIAL_ID]=na.creditCard[j.CREDENTIAL_ID];oa[j.CARD_NUMBER]=na.creditCard[j.CARD_NUMBER];oa[j.CARD_TYPE]=na.creditCard[j.CARD_TYPE];na.creditCard=new p(oa);}return new l(na);});};la.prototype.handleTransfersUpdatedError=function(ma){ca=ma.error;ia(ma.requestID,ma.error);};la.prototype.handleNUXTransfersUpdated=function(ma){if(!fa)this.handleTransfersUpdated(ma);};la.prototype.handleTransferAdded=function(ma){var na=null;ha(ma.requestID,ma);na=x.filter(function(oa){return (oa[s.TRANSFER_ID]===ma[s.TRANSFER_ID]);})[0];if(na)return;x.push(new l(ma));x=x.sort(function(oa,pa){return pa.creationTime-oa.creationTime;});};la.prototype.handleTransferAddedError=function(ma){ia(ma.requestID,ma.errors);};la.prototype.handleChannelTransferStatusChanged=function(ma,na){na=na.obj;m.transferUpdated(na);};la.prototype.getPendingMessageAttachment=function(){return ea;};la.prototype.handleMessageReceived=function(ma,na){for(var oa in na)if(na.hasOwnProperty(oa)){var pa=na[oa];for(var qa=0;qa<pa.length;qa++)if(pa[qa].attachments&&pa[qa].attachments.length){ea=pa[qa];return;}}};la.prototype.handleMessageUpdated=function(ma,na){if(!ea)return;for(var oa in na)if(na.hasOwnProperty(oa)){var pa=na[oa];for(var qa in pa)if(pa.hasOwnProperty(qa)&&ea.message_id===qa){var ra=r.getTransferFromMessage(ea);if(ra){m.transferAdded(ra);ea=null;return;}}}};la.prototype.handleTransferUpdated=function(ma){for(var na=0,oa=x.length;na<oa;na++)if(x[na][s.TRANSFER_ID]===ma[s.TRANSFER_ID])x[na]=l.set(x[na],ma);};la.prototype.handleTransferAccepted=function(){var ma;for(var na=0,oa=x.length;na<oa;na++)if(x[na][s.STATUS]===t.PENDING_RECIPIENT_NUX){ma={};ma[s.STATUS]=t.COMPLETED;x[na]=l.set(x[na],ma);}};la.prototype.handleTransferDeclined=function(ma){var na;for(var oa=0,pa=x.length;oa<pa;oa++)if(x[oa][s.TRANSFER_ID]===ma[s.TRANSFER_ID]&&x[oa][s.STATUS]===t.PENDING_RECIPIENT_NUX){na={};na[s.STATUS]=t.CANCELED_DECLINED;x[oa]=l.set(x[oa],na);break;}};la.prototype.handleTransferUpdatedError=function(ma){ia(ma.requestID,ma.errors);};la.prototype.getTransferByID=function(ma){return x.filter(function(na){return ma===na[s.TRANSFER_ID];})[0];};la.prototype.getAll=function(ma){if(!v){v=true;n.getTransactions(ma);}return x;};la.prototype.getNUXTransfer=function(){var ma=x.filter(function(na){return r.isRecipientActionableStatus(na);})[0];if(!ma&&!w&&!v){w=true;n.getNUXTransactions();}return ma;};la.prototype.hasTransfers=function(){return x.length>0;};la.prototype.hasReceivedFromSender=function(ma){for(var na=0,oa=x.length;na<oa;na++)if(x[na].sender.id===ma)return true;return false;};la.prototype.getChatSendViewProps=function(ma){return ga[ma];};la.prototype.handleChatSendViewOpened=function(ma,na){ga[ma]={amount:na,isOpen:true};};la.prototype.handleChatSendViewClosed=function(ma){ga[ma]={amount:'',isOpen:false};};la.prototype.getTransferFetchError=function(){return ca;};e.exports=new la();},null);
__d("P2PVerificationFlowHelper",["AsyncDialog","AsyncRequest","P2PAPI","P2PTransferParam","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=null,m=null,n=null,o={startVerificationFlow:function(p,q,r){l=p;m=q;n=r||k;g.send(new h('/p2p/verify/dialog/?id='+p));},setupFlowExitHandler:function(p,q,r,s){var t=function(w){n(w);l=null;m=null;n=null;p.destroy();q.destroy();};if(r){p.subscribe('hide',function(){t(s);});}else{var u=false,v=false;p.subscribe('confirm',function(){u=true;});p.subscribe('hide',function(){if(u){p.destroy();q.destroy();}else if(m){q.show();}else t(false);});q.subscribe('confirm',function(){v=true;var w={};w[j.TRANSFER_ID]=l;i.cancelTransaction({formData:w});t(false);});q.subscribe('hide',function(){if(!v)p.show();});}}};e.exports=o;},null);
__d("P2PMercuryAttachment.react",["CurrentUser","Image.react","Link.react","P2PAcceptMoneyDialog.react","P2PActions","P2PButton.react","P2PCreditCardStore","P2PLinkConstants","P2PQEValues","P2PNUXRendererUtils","P2PTransferParam","P2PTransferStatus","P2PTransferStore","P2PVerificationFlowHelper","React","ReactLayeredComponentMixin","cx","formatDate","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){b.__markCompiled&&b.__markCompiled();'use strict';var aa=u,ba=aa.PropTypes,ca=u.createClass({displayName:"P2PMercuryAttachment",mixins:[v],propTypes:{metadata:ba.object.isRequired,theme:ba.string},getInitialState:function(){var da={acceptMoneyDialogShown:false},ea=this.props.metadata,fa=s.getTransferByID(ea[q.TRANSFER_ID]);if(fa){ea=fa;}else k.transferAdded(ea);da.transfer=ea;da.viewerIsSender=g.getID()===da.transfer.sender.id;if(p.doesNUXNeedCreditCards(da.transfer))da.creditCardAsyncRequestState=m.getAsyncRequestState(),da.creditCards=m.getAll();return da;},componentDidMount:function(){this.creditCardStoreSub=m.addListener('change',this.onCreditCardStoreChange);this.transferStoreSub=s.addListener('change',this.onTransferStoreChange);},componentWillUnmount:function(){if(this.creditCardStoreSub){this.creditCardStoreSub.remove();this.creditCardStoreSub=null;}if(this.transferStoreSub){this.transferStoreSub.remove();this.transferStoreSub=null;}},onCreditCardStoreChange:function(){this.setState({creditCardAsyncRequestState:m.getAsyncRequestState(),creditCards:m.getAll()});},onTransferStoreChange:function(){var da={},ea=s.getTransferByID(this.state.transfer[q.TRANSFER_ID]);if(ea&&ea[q.STATUS]!==this.state.transfer[q.STATUS]){da.transfer=ea;if(p.doesNUXNeedCreditCards(da.transfer))da.creditCardAsyncRequestState=m.getAsyncRequestState(),da.creditCards=m.getAll();this.setState(da);}},getStatus:function(){var da=y._("Pending"),ea=y._("Completed"),fa=y._("Canceled"),ga=y._("Sent"),ha=this.state.viewerIsSender;switch(this.state.transfer[q.STATUS]){case r.PENDING_RECIPIENT_PROCESSING:case r.INTERMEDIATE_PROCESSING:return ha?ga:ea;case r.PENDING_RECIPIENT_NUX:case r.PENDING_RECIPIENT_VERIFICATION:case r.PENDING_RECIPIENT_MANUAL_REVIEW:case r.PENDING_RECIPIENT_VERIFICATION_PROCESSING:case r.PENDING_PUSH_FAIL:case r.PENDING_SENDER_INITED:return ha?ga:da;case r.PENDING_SENDER_MANUAL_REVIEW:case r.PENDING_SENDER_VERIFICATION:case r.PENDING_SENDER_VERIFICATION_PROCESSING:return da;case r.CANCELED_SENDER_RISK:case r.CANCELED_DECLINED:case r.CANCELED_RECIPIENT_RISK:case r.CANCELED_SYSTEM_FAIL:case r.CANCELED_EXPIRED:case r.CANCELED_SAME_CARD:return fa;case r.COMPLETED:return ea;}},isGrayStatus:function(){switch(this.state.transfer[q.STATUS]){case r.PENDING_RECIPIENT_VERIFICATION:case r.PENDING_RECIPIENT_VERIFICATION_PROCESSING:case r.PENDING_RECIPIENT_MANUAL_REVIEW:case r.PENDING_RECIPIENT_NUX:case r.PENDING_PUSH_FAIL:if(this.state.viewerIsSender)return false;return true;case r.PENDING_SENDER_MANUAL_REVIEW:case r.PENDING_SENDER_VERIFICATION:case r.PENDING_SENDER_VERIFICATION_PROCESSING:case r.CANCELED_SENDER_RISK:case r.CANCELED_DECLINED:case r.CANCELED_RECIPIENT_RISK:case r.CANCELED_SYSTEM_FAIL:case r.CANCELED_EXPIRED:case r.CANCELED_SAME_CARD:return true;case r.COMPLETED:case r.INTERMEDIATE_PROCESSING:case r.PENDING_SENDER_INITED:case r.PENDING_RECIPIENT_PROCESSING:return false;}},shouldRenderBannerFooter:function(){if(p.doesNUXNeedCreditCards(this.state.transfer)&&!m.isCreditCardsFetchComplete())return false;return (p.isRecipientActionableStatus(this.state.transfer));},handleConfirmInfoButtonClicked:function(){t.startVerificationFlow(this.state.transfer[q.TRANSFER_ID],false);},handleAddCardButtonClicked:function(){this.setState({acceptMoneyDialogShown:true});},handleAcceptMoneyDialogClose:function(){this.setState({acceptMoneyDialogShown:false});},renderInlineBanner:function(){var da=this.state.transfer[q.STATUS];if(da===r.PENDING_RECIPIENT_NUX){return this.renderPendingRecipientNUX();}else if(da===r.PENDING_RECIPIENT_VERIFICATION){return this.renderPendingRecipientVerification();}else if(da===r.PENDING_PUSH_FAIL)return this.renderPendingPushFail();return null;},renderPendingRecipientNUX:function(){var da=this.state.transfer,ea=o.ReceiverInThreadNUXBodyText||y._("Just add a debit card to accept it.");return (u.createElement("div",{className:"_3asb"},u.createElement("div",{className:"_3asc"},y._("{sender_name} Sent You Money!",[y.param("sender_name",da.sender.name)])),u.createElement("div",{className:"_3asd"},ea),u.createElement("div",{className:"_5abs"},u.createElement(l,{use:"confirm",className:"_5abt",size:"medium",label:y._("Add Debit Card"),type:"primary",onClick:this.handleAddCardButtonClicked}))));},renderPendingRecipientVerification:function(){return (u.createElement("div",{className:"_3asb"},u.createElement("div",{className:"_3asc"},y._("Please Confirm Your Info")),u.createElement("div",{className:"_3asd"},y._("To accept the money {sender_name} sent you, please confirm your information.",[y.param("sender_name",this.state.transfer.sender.name)])),u.createElement("div",{className:"_5abs"},u.createElement(l,{use:"confirm",className:"_5abt",size:"medium",label:y._("Confirm Info"),type:"primary",onClick:this.handleConfirmInfoButtonClicked}))));},renderPendingPushFail:function(){return (u.createElement("div",{className:"_3asb"},u.createElement("div",{className:"_3asc"},y._("Update Your Card")),u.createElement("div",{className:"_3asd"},y._("It looks like your card is expired or invalid. Please update it to get {currency}{amount} from {sender_name}.",[y.param("currency",this.state.transfer.currency),y.param("amount",this.state.transfer.amount),y.param("sender_name",this.state.transfer.sender.name)])),u.createElement("div",{className:"_5abs"},u.createElement(l,{use:"confirm",size:"medium",className:"_5abt",label:y._("Update Card"),type:"primary",href:n.settingsWWWURI,target:"_blank"}))));},getStatusHeaderText:function(){if(this.isMessengerDotComView()){return (y._("Status"));}else return (y._("STATUS"));},getActionHeaderText:function(){var da=this.state.transfer[q.STATUS],ea=this.isMessengerDotComView(),fa=this.state.viewerIsSender,ga=ea?y._("Sent on"):y._("SENT ON"),ha=ea?y._("Received on"):y._("RECEIVED ON"),ia=ea?y._("Canceled on"):y._("CANCELED ON");switch(da){case r.PENDING_SENDER_MANUAL_REVIEW:case r.PENDING_RECIPIENT_MANUAL_REVIEW:case r.PENDING_RECIPIENT_PROCESSING:case r.INTERMEDIATE_PROCESSING:case r.COMPLETED:return fa?ga:ha;case r.PENDING_RECIPIENT_NUX:case r.PENDING_RECIPIENT_VERIFICATION:case r.PENDING_RECIPIENT_VERIFICATION_PROCESSING:case r.PENDING_PUSH_FAIL:case r.PENDING_SENDER_INITED:return fa?ga:null;case r.PENDING_SENDER_VERIFICATION:case r.PENDING_SENDER_VERIFICATION_PROCESSING:return null;case r.CANCELED_SENDER_RISK:case r.CANCELED_DECLINED:case r.CANCELED_RECIPIENT_RISK:case r.CANCELED_SYSTEM_FAIL:case r.CANCELED_EXPIRED:case r.CANCELED_SAME_CARD:return ia;}},isMessengerDotComView:function(){return this.props.theme==='messenger';},isMessagesView:function(){return this.props.theme==='messages';},getImage:function(){if(this.isMessengerDotComView()){if(this.isGrayStatus()){return z('/images/p2p/message-icon-dark-gray.png');}else return z('/images/p2p/message-icon-blue.png');}else if(this.isGrayStatus()){return z('/images/p2p/message-icon-gray.png');}else return z('/images/p2p/message-icon-black.png');},getTransferStatusDate:function(){var da,ea=this.state.transfer[q.STATUS];switch(ea){case r.PENDING_RECIPIENT_PROCESSING:case r.INTERMEDIATE_PROCESSING:case r.COMPLETED:da=this.state.transfer.completedTime;break;case r.CANCELED_SENDER_RISK:case r.CANCELED_DECLINED:case r.CANCELED_RECIPIENT_RISK:case r.CANCELED_SYSTEM_FAIL:case r.CANCELED_EXPIRED:case r.CANCELED_SAME_CARD:da=this.state.transfer.updatedTime;break;}if(!da)da=this.state.transfer.creationTime;return x(da,'M jS, g:ia');},renderStatusFooter:function(){var da=this.getActionHeaderText(),ea;if(da)ea=u.createElement("div",{className:"_4ybr"},u.createElement("div",{className:"_1nkr"},u.createElement("div",{className:"_4ybp"},da),u.createElement("div",{className:"_4ybq"},this.getTransferStatusDate())));return (u.createElement("div",{className:"_4ybn"},u.createElement("div",{className:"_4ybo"},u.createElement("div",{className:"_1nkq"},u.createElement("div",{className:"_4ybp"},this.getStatusHeaderText()),u.createElement("div",{className:"_4ybq"},this.getStatus()))),ea));},renderLayers:function(){var da={};if(this.state.acceptMoneyDialogShown)da.acceptDialog=u.createElement(j,{asyncRequestState:this.state.creditCardAsyncRequestState,creditCards:this.state.creditCards,onClose:this.handleAcceptMoneyDialogClose,transfer:this.state.transfer});return da;},render:function(){var da,ea,fa="_4ybm";if(this.shouldRenderBannerFooter()){da=u.createElement("div",{className:fa},this.renderInlineBanner());}else ea=u.createElement("div",{className:fa},this.renderStatusFooter());return (u.createElement("div",{className:(("_30of")+(this.state.viewerIsSender?' '+"_4ybf":'')+(this.isMessagesView()?' '+"_4ybg":'')+(this.isMessengerDotComView()?' '+"_4ybh":''))},u.createElement("div",{className:"_3ase"},u.createElement(i,{className:"_3asf",href:n.settingsWWWURI,target:"_blank"},u.createElement("div",{className:"_4ybi"},u.createElement("div",{className:"_4ybj"},u.createElement("div",{className:"_4ybk"},u.createElement(h,{height:16,src:this.getImage(),width:16})),u.createElement("div",{className:(("_4ybl")+(this.isGrayStatus()?' '+"_3asg":''))},this.state.transfer.amount))),ea),da)));}});e.exports=ca;},null);
__d("P2PMercuryShareAttachment.react",["MercuryShareAttachmentReactShape","MercuryShareAttachmentRenderLocations","P2PMercuryAttachment.react","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=j,m=l.PropTypes,n=j.createClass({displayName:"P2PMercuryShareAttachment",propTypes:{attachment:g,location:m.oneOf(h.getValues())},render:function(){var o={metadata:this.props.attachment.target};if(this.props.location===h.MESSENGER){o.theme='messenger';}else if(this.props.location===h.WEB_INBOX)o.theme='messages';return (j.createElement("div",{className:"_3fyk"},j.createElement(i,j.__spread({},o))));}});e.exports=n;},null);
__d("P2PMercuryShareAttachmentSnippet.react",["MercuryShareAttachmentReactShape","P2PMercuryAttachmentSnippet.react","React"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=i.createClass({displayName:"P2PMercuryShareAttachmentSnippet",propTypes:{attachment:g},render:function(){var k=this.props.attachment?this.props.attachment.target:{};return (i.createElement(h,i.__spread({},k)));}});e.exports=j;},null);
__d("MercuryShareStyleMap",["Map","MercuryConfig","MercuryShareAttachmentRenderLocations","StoryAttachmentStyle","cx","MercuryFallbackShareAttachment.react","MercuryFallbackShareAttachmentSnippet.react","P2PMercuryShareAttachment.react","P2PMercuryShareAttachmentSnippet.react","MNCommerceReceiptMercuryShareAttachment.react","MNCommerceCancelReturnMercuryShareAttachment.react","MNCommerceShippingMercuryShareAttachment.react","MessengerMomentsAppShareAttachment.react","MessengerMomentsAppSnippet.react"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=new g();l.set(j.FALLBACK,{getComponent:function(){return b('MercuryFallbackShareAttachment.react');},getSnippetComponent:function(){return b('MercuryFallbackShareAttachmentSnippet.react');},cx:null});l.set(j.ORION,{getComponent:function(){return b('P2PMercuryShareAttachment.react');},getSnippetComponent:function(){return b('P2PMercuryShareAttachmentSnippet.react');},cx:new g([[i.MESSENGER,"_3djc"]])});if(h.WWWMessengerCommerceGK){l.set(j.RETAIL_RECEIPT,{getComponent:function(){return b('MNCommerceReceiptMercuryShareAttachment.react');},cx:new g([[i.MESSENGER,"_205d"]])});l.set(j.RETAIL_CANCELLATION,{getComponent:function(){return b('MNCommerceCancelReturnMercuryShareAttachment.react');},cx:new g([[i.MESSENGER,"_205d"]])});l.set(j.RETAIL_SHIPMENT,{getComponent:function(){return b('MNCommerceShippingMercuryShareAttachment.react');},cx:new g([[i.MESSENGER,"_205d"]])});l.set(j.RETAIL_SHIPMENT_TRACKING_EVENT,{getComponent:function(){return b('MNCommerceShippingMercuryShareAttachment.react');},cx:new g([[i.MESSENGER,"_205d"]])});}if(h.MomentsMessengerWWWGK)l.set(j.MOMENTS_APP_INVITATION,{getComponent:function(){return b('MessengerMomentsAppShareAttachment.react');},getSnippetComponent:function(){return b('MessengerMomentsAppSnippet.react');},cx:null});e.exports=l;},null);
__d("MercuryShareAttachmentSnippet.react",["MercuryShareAttachmentReactShape","MercuryShareStyleMap","React"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=i,k=j.PropTypes,l=i.createClass({displayName:"MercuryShareAttachmentSnippet",propTypes:{attachment:g,isSenderViewer:k.bool,senderName:k.string},render:function(){var m=this.props.attachment;if(!m.style_list)return null;for(var n=0;n<m.style_list.length;n++){var o=h.get(m.style_list[n]);if(o&&!!o.getSnippetComponent){var p=o.getSnippetComponent();return (i.createElement(p,i.__spread({},this.props)));}}return null;}});e.exports=l;},null);
__d("ImageSourceType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={PROFILE_PICTURE:'profile_picture',IMAGE:'image'};e.exports=g;},null);
__d("ImageSourceRequest",["CurrentUser","ImageSourceType","KeyedCallbackManager","PhotoResizeModeConst","MercuryServerDispatcher","arrayContains","extendArray"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();function n(){"use strict";this._request={fbid:null,type:null,width:null,height:null,resize_mode:null};this._callback=null;}n.prototype.setFBID=function(r){"use strict";this._request.fbid=r;return this;};n.prototype.setType=function(r){"use strict";if(!l([h.PROFILE_PICTURE,h.IMAGE],r))throw new TypeError('ImageSourceRequest.setType: invalid type '+r);this._request.type=r;return this;};n.prototype.setDimensions=function(r,s){"use strict";this._request.width=r;this._request.height=s;return this;};n.prototype.setResizeMode=function(r){"use strict";if(!l([j.COVER,j.CONTAIN],r))throw new TypeError('ImageSourceRequest.setResizeMode: invalid resize mode '+r);this._request.resize_mode=r;return this;};n.prototype.setCallback=function(r){"use strict";this._callback=r;return this;};n.prototype.send=function(){"use strict";if(!this._request.fbid||!this._request.width||!this._request.height||!this._request.type||!this._request.resize_mode||!this._callback)throw new Error('ImageSourceRequest: You must set all the fields');var r=p(),s=q(this._request);r.executeOrEnqueue(s,this._callback);if(r.getUnavailableResourcesFromRequest(s).length===1){k.trySend('/ajax/image_source.php',{requests:[this._request]});return true;}return false;};var o=null;function p(){if(o)return o;var r=new i();o=r;k.registerEndpoints({'/ajax/image_source.php':{request_user_id:g.getID(),mode:k.BATCH_DEFERRED_MULTI,batch_function:function(s,t){m(s.requests,t.requests);return s;},handler:function(s,t){var u=t.getData().requests;for(var v=0;v<u.length;++v)r.setResource(q(u[v]),s[v]);}}});return r;}function q(r){return [r.fbid,r.type,r.width,r.height,r.resize_mode].join('|');}e.exports=n;},null);
__d("MercuryParticipantFetcher",["MercuryIDs","MercuryPayloadSource","MercuryServerRequests","Set","ShortProfiles","setImmediate"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';function m(o){this.$MercuryParticipantFetcher0=i.getForFBID(o);this.$MercuryParticipantFetcher1=false;this.$MercuryParticipantFetcher2=new j();this.$MercuryParticipantFetcher3=new j();}m.prototype.fetch=function(o){this.$MercuryParticipantFetcher4(o);this.$MercuryParticipantFetcher5();};m.prototype.fetchMulti=function(o){o.forEach(function(p){return this.$MercuryParticipantFetcher4(p);}.bind(this));this.$MercuryParticipantFetcher5();};m.prototype.$MercuryParticipantFetcher4=function(o){if(!this.$MercuryParticipantFetcher3.has(o))this.$MercuryParticipantFetcher2.add(o);};m.prototype.$MercuryParticipantFetcher5=function(){if(this.$MercuryParticipantFetcher1||this.$MercuryParticipantFetcher2.size===0)return;this.$MercuryParticipantFetcher1=true;l(function(){this.$MercuryParticipantFetcher1=false;this.$MercuryParticipantFetcher2.forEach(function(o){return this.$MercuryParticipantFetcher3.add(o);}.bind(this));this.$MercuryParticipantFetcher6(this.$MercuryParticipantFetcher2,function(o){o.forEach(function(p){return this.$MercuryParticipantFetcher3["delete"](p.id);}.bind(this));this.$MercuryParticipantFetcher7(o);}.bind(this));this.$MercuryParticipantFetcher2.clear();}.bind(this));};m.prototype.$MercuryParticipantFetcher6=function(o,p){var q=[];o.forEach(function(r){var s=g.tokenize(r),t=s.type,u=s.value;t==='fbid'&&q.push(u);});if(q.length>0)k.getMulti(q,function(r){var s=[];for(var t in r)s.push(n(r[t],t));p(s);});};m.prototype.$MercuryParticipantFetcher7=function(o){this.$MercuryParticipantFetcher0.handleUpdate({participants:o,from_client:false,payload_source:h.SERVER_FETCH_PARTICIPANTS});};function n(o,p){var q=Object.assign({gender:o.gender,href:o.uri,id:g.getParticipantIDFromUserID(o.id||p),image_src:o.thumbSrc,name:o.name,short_name:o.firstName,employee:o.employee,is_employee_away:o.is_employee_away,type:o.type,vanity:o.vanity,is_friend:o.is_friend,is_messenger_user:o.is_messenger_user,orion_eligible:o.orionEligible,social_snippets:o.social_snippets},{});if(o.officeStatus){q.officeStatus=o.officeStatus;q.officeStatusStartDate=o.officeStatusStartDate;q.officeStatusEndDate=o.officeStatusEndDate;q.officeStatusComment=o.officeStatusComment;q.officeStatusLocation=o.officeStatusLocation;}return q;}e.exports=m;},null);
__d("MercuryParticipants",["CurrentUser","EventEmitter","ImageSourceRequest","ImageSourceType","ImmutableObject","KeyedCallbackManager","Map","MercuryAssert","MercuryIDs","MercuryParticipantFetcher","MercuryParticipantTypes","MercuryParticipantsConstants","MercuryServerRequests","PhotoResizeModeConst","Set","fbt","mapObject"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.__markCompiled&&b.__markCompiled();'use strict';var x='change';function y(aa){this.$MercuryParticipants0=aa;this.$MercuryParticipants1=new h();this.$MercuryParticipants2=new l();this.$MercuryParticipants3=new p(this.$MercuryParticipants0);this.$MercuryParticipants4=new m();this.$MercuryParticipants5=s.getForFBID(this.$MercuryParticipants0);this.$MercuryParticipants5.subscribe('update-participants',function(ba,ca){if(ca.participants&&ca.participants.length>0){var da={};ca.participants.forEach(function(ea){da[ea.id]=ea;});this.$MercuryParticipants6(da);}}.bind(this));}y.prototype.addListener=function(aa,ba){return this.$MercuryParticipants1.addListener(aa,ba);};y.prototype.getIDFromVanityOrFBID=function(aa){if(!aa)return;if(this.$MercuryParticipants4.has(aa))return this.$MercuryParticipants4.get(aa);if(/^\d+$/.test(aa))return o.getParticipantIDFromUserID(aa);};y.prototype.getNow=function(aa){return this.$MercuryParticipants7(aa);};y.prototype.getOrFetch=function(aa){var ba=this.$MercuryParticipants7(aa);if(!ba)this.$MercuryParticipants3.fetch(aa);return ba;};y.prototype.get=function(aa,ba){n.isParticipantID(aa);return this.$MercuryParticipants8([aa],function(ca){ba(ca[aa]);});};y.prototype.getMulti=function(aa,ba){return this.$MercuryParticipants8(aa,ba);};y.prototype.getBigImageMulti=function(aa,ba){n.allParticipantIDs(aa);var ca=r.BIG_IMAGE_SIZE;return this.$MercuryParticipants8(aa,function(da){var ea={},fa=0,ga=new u(),ha=function(la,ma){fa++;ea[la]=ma;if(fa===aa.length){ba(ea);if(ga.size>0)this.$MercuryParticipants9(ga);}}.bind(this),ia=function(la,ma){this.$MercuryParticipants2.setResource(la,k.set(this.$MercuryParticipants2.getResource(la),{big_image_src:ma.uri}));ga.add(la);ha(la,ma.uri);}.bind(this);for(var ja in da){var ka=da[ja];if(!ka.big_image_src){new i().setFBID(o.getUserIDFromParticipantID(ja)).setType(j.PROFILE_PICTURE).setDimensions(ca,ca).setResizeMode(t.COVER).setCallback(ia.bind(null,ja)).send();}else ha(ka.id,ka.big_image_src);}}.bind(this));};y.prototype.getOrderedBigImageMulti=function(aa,ba){return this.getBigImageMulti(aa,function(ca){ba(aa.map(function(da){return ca[da];}));});};y.prototype.$MercuryParticipants8=function(aa,ba){n.allParticipantIDs(aa);var ca=this.$MercuryParticipants2.executeOrEnqueue(aa,ba),da=this.$MercuryParticipants2.getUnavailableResources(ca).filter(function(ea){var fa=o.tokenize(ea),ga=fa.type,ha=fa.value;if(ga==='email'){this.$MercuryParticipantsa(ea,ha);return false;}return true;}.bind(this));this.$MercuryParticipants3.fetchMulti(da);return this.$MercuryParticipantsb(ca);};y.prototype.$MercuryParticipants7=function(aa){var ba=this.$MercuryParticipants2.getResource(aa);if(!ba){var ca=o.tokenize(aa),da=ca.type,ea=ca.value;if(da==='email')ba=this.$MercuryParticipantsa(aa,ea);}return ba;};y.prototype.$MercuryParticipantsa=function(aa,ba){var ca=new k(z(aa,ba));this.$MercuryParticipants2.setResource(aa,ca);return ca;};y.prototype.$MercuryParticipants9=function(aa){this.$MercuryParticipants1.emit(x,aa);};y.prototype.$MercuryParticipants6=function(aa){aa=w(aa,function(ba,ca){if(ba.vanity)this.$MercuryParticipants4.set(ba.vanity,ca);return new k(this.$MercuryParticipantsc(ba));}.bind(this));this.$MercuryParticipants2.addResourcesAndExecute(aa);this.$MercuryParticipants9(new u(Object.keys(aa)));};y.prototype.$MercuryParticipantsc=function(aa){var ba=aa.type===q.USER||aa.type===q.FRIEND;if(!ba)return aa;if(!aa.name&&!aa.href&&!aa.vanity){var ca=v._("Facebook User");aa.name=ca;aa.short_name=ca;}return aa;};y.prototype.$MercuryParticipantsb=function(aa){return {remove:function(){this.$MercuryParticipants2.unsubscribe(aa);}.bind(this)};};function z(aa,ba){return {gender:r.UNKNOWN_GENDER,href:null,id:aa,image_src:r.EMAIL_IMAGE,big_image_src:r.EMAIL_IMAGE,name:ba,short_name:ba,employee:false};}e.exports=new y(g.getID());},null);
__d("MercuryAttachmentSnippet.react",["EmoticonsList","Image.react","MercuryAttachment","MercuryAttachmentSnippetRenderer","MercuryAttachmentSnippetType","MercuryAttachmentType","MercuryIDs","P2PMercuryAttachmentSnippet.react","MercuryShareAttachmentSnippet.react","MercuryParticipants","React","StickerConstants","TextWithEmoticons.react","cx","ix","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();'use strict';var w=q,x=w.PropTypes,y=q.createClass({displayName:"MercuryAttachmentSnippet",propTypes:{thread:x.object.isRequired,viewer:x.string.isRequired},componentWillMount:function(){this._ensureParticipant(this.props.thread.snippet_sender);this._setVariables(this.props);},componentWillReceiveProps:function(ba){this._ensureParticipant(ba.thread.snippet_sender);this._setVariables(ba);},componentWillUnmount:function(){this._cancelParticipantFetch();},render:function(){var ba=this._getSenderName(),ca=j.getAttachmentSnippetType(this._attachments);switch(ca){case k.PHOTO:return this._renderPhotoSnippet(ba);case k.GIF:return this._renderAnimatedImageSnippet(ba);case k.VIDEO:return this._renderVideoSnippet(ba);case k.AUDIO_CLIP:return this._renderAudioClipSnippet(ba);case k.STICKER:return this._renderStickerSnippet(ba);case k.ORION:return this._renderOrionSnippet(ba);case k.SHARE:return this._renderShareSnippet(ba);case k.ERROR:return this._renderError(ba);default:return this._renderMixedSnippet(ba);}},_renderPhotoSnippet:function(ba){return this._renderSnippet(j.renderAttachmentSnippetText(k.PHOTO,this._isViewerSender,ba,this._attachments));},_renderAnimatedImageSnippet:function(ba){return this._renderSnippet(j.renderAttachmentSnippetText(k.GIF,this._isViewerSender,ba,this._attachments));},_renderVideoSnippet:function(ba){return this._renderSnippet(j.renderAttachmentSnippetText(k.VIDEO,this._isViewerSender,ba));},_renderAudioClipSnippet:function(ba){return this._renderSnippet(j.renderAttachmentSnippetText(k.AUDIO_CLIP,this._isViewerSender,ba));},_renderStickerSnippet:function(ba){if(z(this._attachments[0].metadata.stickerID)){return (q.createElement(s,{renderEmoticons:true,text:g.symbols.like}));}else return (q.createElement("span",null,j.renderAttachmentSnippetText(k.STICKER,this._isViewerSender,ba)));},_renderOrionSnippet:function(ba){return (q.createElement("span",null,q.createElement(n,q.__spread({},this._attachments[0].metadata))));},_renderShareSnippet:function(ba){if(!!this._attachments[0].share)return (q.createElement(o,{attachment:this._attachments[0].share,senderName:ba,isViewerSender:this._isViewerSender}));return this._renderSnippet(j.renderAttachmentSnippetText(k.SHARE,this._isViewerSender,ba));},_renderMixedSnippet:function(ba){return (q.createElement("span",null,this._attachments.filter(function(ca){return ca.attach_type===l.FILE||ca.attach_type===l.PHOTO||ca.attach_type===l.VIDEO;}).map(function(ca,da){return this._renderSnippet(ca.name,ca.icon_type,da);}.bind(this))));},_renderSnippet:function(ba,ca,da){var ea=i.getAttachIconClass(ca||this._attachments[0].icon_type),fa=v(ea,"uiIconText _3l6h");return (q.createElement("span",{className:fa,key:da},q.createElement(h,{src:u('/images/messaging/docs/generic.png')}),ba));},_renderError:function(ba){var ca=j.renderAttachmentSnippetText(k.ERROR,this._isViewerSender,ba);return this._renderSnippet(ca);},_setVariables:function(ba){this._viewer=ba.viewer;this._sender=ba.thread.snippet_sender;this._attachments=ba.thread.snippet_attachments;this._isViewerSender=aa(this._sender,this._viewer);},_getSenderName:function(){if(!this._sender||this._isViewerSender)return null;var ba=p.getNow(this._sender);if(!ba)return null;return ba.short_name;},_ensureParticipant:function(ba){if(!ba)return;this._cancelParticipantFetch();if(!p.getNow(ba))this._sub=p.get(ba,function(ca){return this.forceUpdate();}.bind(this));},_cancelParticipantFetch:function(){this._sub&&this._sub.remove();}});function z(ba){return (ba==r.LIKE_STICKER_ID||ba==r.HOT_LIKE_SMALL_STICKER_ID||ba==r.HOT_LIKE_MEDIUM_STICKER_ID||ba==r.HOT_LIKE_LARGE_STICKER_ID);}function aa(ba,ca){return !!(ba&&m.getParticipantIDFromUserID(ca)==ba);}e.exports=y;},null);
__d("MercuryThreadImage.react",["ImmutableObject","MercuryIDs","MercuryParticipantsImage.react","MercuryParticipantsConstants","Pixelz.react","React","areEqual"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=l,o=n.PropTypes,p=l.createClass({displayName:"MercuryThreadImage",propTypes:{thread:o.instanceOf(g).isRequired,viewer:o.string.isRequired,size:o.number,useBackground:o.bool},shouldComponentUpdate:function(q,r){return (q.thread.image_src!==this.props.thread.image_src||!m(q.thread.participants,this.props.thread.participants)||q.size!==this.props.size||q.viewer!==this.props.viewer||q.useBackground!==this.props.useBackground);},render:function(){var q=this.props.size||j.BIG_IMAGE_SIZE,r=this.props.thread.image_src;if(r){if(this.props.useBackground)return (l.createElement("div",{style:{height:q,backgroundImage:("url("+r+")"),backgroundPosition:'50% 50%',backgroundRepeat:'no-repeat',backgroundSize:'cover',width:q}}));return (l.createElement(k,{height:q,resizeMode:'cover',src:r,width:q}));}var s=h.getParticipantIDFromUserID(this.props.viewer),t=this.props.thread.participants.filter(function(v){return v!==s;}),u=[];if(!t.length){u=[s];}else if(t.length==1){u=t;}else u=t.slice(0,3);return (l.createElement(i,{participants:u,size:q}));}});e.exports=p;},null);
__d("MercuryParticipantListRenderer",["fbt"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';function h(){this.$MercuryParticipantListRenderer0=false;this.$MercuryParticipantListRenderer1=false;this.$MercuryParticipantListRenderer2=false;this.$MercuryParticipantListRenderer3=function(r){return this.$MercuryParticipantListRenderer1?r.short_name:r.name;}.bind(this);}h.prototype.renderParticipantList=function(r){var s=r.map(this.$MercuryParticipantListRenderer3);switch(s.length){case 0:return i(this.$MercuryParticipantListRenderer0);case 1:return j(s);case 2:return this.$MercuryParticipantListRenderer2?l(s):k(s);case 3:return this.$MercuryParticipantListRenderer2?n(s):m(s);default:return this.$MercuryParticipantListRenderer2?p(s):o(s);}};h.prototype.setIsNewThread=function(r){this.$MercuryParticipantListRenderer0=r;return this;};h.prototype.setNameRenderer=function(r){this.$MercuryParticipantListRenderer3=r;return this;};h.prototype.setUseShortName=function(r){this.$MercuryParticipantListRenderer1=r;return this;};h.prototype.setUseAndSeparator=function(r){this.$MercuryParticipantListRenderer2=r;return this;};function i(r){if(r){return (g._("New Message"));}else return (g._("No Participants"));}function j(r){return r[0];}function k(r){return (g._("{participant1}, {participant2}",[g.param("participant1",r[0]),g.param("participant2",r[1])]));}function l(r){return (g._("{participant1} and {participant2}",[g.param("participant1",r[0]),g.param("participant2",r[1])]));}function m(r){return (g._("{participant1}, {participant2}, {participant3}",[g.param("participant1",r[0]),g.param("participant2",r[1]),g.param("participant3",r[2])]));}function n(r){return (g._("{participant1}, {participant2} and {participant3}",[g.param("participant1",r[0]),g.param("participant2",r[1]),g.param("participant3",r[2])]));}function o(r){return (g._("{participant1}, {participant2}, {participant3}, {others_link}",[g.param("participant1",r[0]),g.param("participant2",r[1]),g.param("participant3",r[2]),g.param("others_link",q(r.length-3))]));}function p(r){return (g._("{participant1}, {participant2} and {others_link}",[g.param("participant1",r[0]),g.param("participant2",r[1]),g.param("others_link",q(r.length-2))]));}function q(r){if(r>1){return (g._({"*":"{others_count} others"},[g.param("others_count",r,[0])]));}else return (g._("1 other"));}e.exports=h;},null);
__d("MercuryThreadTitle.react",["MercuryIDs","MercuryParticipantListRenderer","MercuryParticipants","React","TextWithEmoticons.react","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=j,n=m.PropTypes,o=j.createClass({displayName:"MercuryThreadTitle",propTypes:{isNewThread:n.bool,thread:n.object.isRequired,viewer:n.string.isRequired,showUnreadCount:n.bool,useShortName:n.bool,useAndSeparator:n.bool},getDefaultProps:function(){return {isNewThread:false,showUnreadCount:false,useShortName:false,useAndSeparator:false};},getInitialState:function(){return {participantNames:''};},componentDidMount:function(){this._renderParticipantsList(this.props);},componentWillReceiveProps:function(p){this._renderParticipantsList(p);},render:function(){return (j.createElement("span",{className:this.props.className},this.props.thread.name?this._renderThreadTitle():this.state.participantNames));},getTitle:function(){return this.state.participantNames;},_renderThreadTitle:function(){var p=this.props.thread,q=j.createElement(k,{renderEmoticons:true,renderEmoji:true,text:p.name});if(!p.unread_count||!this.props.showUnreadCount)return q;return this._renderTitleWithUnreadCount(q,p.unread_count);},_renderParticipantsList:function(p){if(p.thread.name)return;var q=g.getParticipantIDFromUserID(p.viewer),r=p.thread.participants;if(r.length>1)r=r.filter(function(s){return s!=q;});i.getMulti(r,function(s){if(!this.isMounted())return;var t=r.map(function(w){return s[w];}),u=new h().setUseShortName(this.props.useShortName).setUseAndSeparator(this.props.useAndSeparator).setIsNewThread(this.props.isNewThread).renderParticipantList(t),v=(p.showUnreadCount&&p.thread.unread_count)?this._renderTitleWithUnreadCount(u,p.thread.unread_count):u;this.setState({participantNames:v});}.bind(this));},_renderTitleWithUnreadCount:function(p,q){return (l._("{conversation-title} ({unread-count})",[l.param("conversation-title",p),l.param("unread-count",q)]));}});e.exports=o;},null);
__d("WebMessengerThreadPermalinks",["MercuryIDs","MessagingTag","URI","WebMessengerPermalinkConstants","WWWBase","requireWeak"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m={getThreadURI:function(q,r,s){if(g.isCanonical(q)){n(q,r,s);}else o(q,r,s);}};function n(q,r,s){var t=new i(k.uri),u=g.tokenize(q).value;t.setPath(p(s)+'/'+u);r&&r(t.toString());}function o(q,r,s){l(['MercuryServerRequests'],function(t){var u=t.get();u.getServerThreadID(q,function(v){var w=new i(k.uri);w.setPath(j.getURIPathForThreadID(v,p(s)));r&&r(w.toString());});});}function p(q){var r=j.BASE_PATH;if(q&&q!=h.INBOX)r+='/'+q;return r;}e.exports=m;},null);
__d("MercuryThreadInfo",["CurrentUser","MercuryThreadMode"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i={canReply:function(k){return !!(k.is_subscribed&&k.mode!=h.OBJECT_ORIGINATED&&!k.has_email_participant&&!k.read_only&&(k.recipients_loadable||k.recipients_loadable===(void 0)));},getMuteSetting:function(k){return (k.mute_settings&&k.mute_settings[j(g.getID())]);},isMuted:function(k){return i.getMuteSetting(k)!==(void 0);}};function j(k){return k+'@facebook.com';}e.exports=i;},null);
__d("MercuryRoger",["Arbiter","ArbiterMixin","immutable","JSLogger","MercuryActionStatus","mapObject","MercuryServerRequests","MercuryThreads"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=b('MercuryServerRequests').get(),n=b('MercuryThreads').get(),o={},p=[],q=k.SUCCESS,r={getSeenBy:function(u,v){if(!u)return [];var w=[],x=o[u.thread_id];if(!x)return w;x.forEach(function(y,z){if(s(u,y,z,v))w.push(z);});return w;},wasSeenByAll:function(u){if(!u)return false;var v=o[u.thread_id];if(!v)return false;return v.every(function(w,x){return s(u,w,x);});},getSeenTimestamps:function(u){var v=o[u];if(!v){v=i.OrderedMap();o[u]=v;}return v;},getSeenTimestamp:function(u,v){var w=o[u];return w?w.get(v):null;}};Object.assign(r,h);function s(u,v,w,x){return !!(v>u.timestamp&&(u.status===(void 0)||u.status===q)&&(!x||w!=u.author));}m.subscribe('update-roger',function(u,v){for(var w in v){var x=o[w]||i.OrderedMap();x=x.withMutations(function(y){for(var z in v[w]){var aa=n.getThreadMetaNow(w);if(aa&&aa.participants)if(aa.participants.indexOf(z)==-1){p.push(t(o));continue;}var ba=y.get(z),ca=v[w][z];if(!ba||ca>ba)y.set(z,ca);}});o[w]=x.sort();}v&&r.inform('change',v);});g.subscribe(j.DUMP_EVENT,function(u,v){v.bad_read_receipts={receipts:p};});function t(u){return l(u,function(v){return v.toJS();});}e.exports=r;},null);
__d("MercuryDelayedRoger",["ArbiterMixin","LiveTimer","MercuryActionStatus","MercuryConfig","MercuryRoger","setTimeoutAcrossTransitions","MercuryMessages","MercuryThreadInformer","MercuryThreads"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=b('MercuryMessages').get(),n=b('MercuryThreadInformer').get(),o=b('MercuryThreads').get(),p={},q={},r=j['roger.seen_delay'],s={getSeenBy:function(y,z){if(q[y])return [];return k.getSeenBy(t(y),z);},wasSeenByAll:function(y){if(q[y])return false;return k.wasSeenByAll(t(y));}};Object.assign(s,g);function t(y){if(!p[y]){var z=o.getThreadMetaNow(y);if(z)p[y]={thread_id:y,author:z.participants[0],timestamp:z.timestamp};}return p[y];}function u(y){var z=false;m.getThreadMessagesRange(y,0,1,function(aa){var ba=aa[0];if(!ba)return;var ca=ba.timestamp;if(ba.action_id||ba.status==i.SUCCESS)ca-=h.getServerTimeOffset();var da=s.getSeenBy(y);if(q[y]){clearTimeout(q[y]);delete q[y];}var ea=ca+r,fa=ea-Date.now();if(fa>0)q[y]=l(function(){delete q[y];v(y);},fa);p[y]=ba;var ga=s.getSeenBy(y);if(da.length||ga.length)z=true;});return z;}function v(y){var z={};z[y]=true;w(z);}function w(y){s.inform('state-changed',y);s.inform('change');}function x(event,y){var z={};for(var aa in y)if(u(aa))z[aa]=true;for(var ba in z){w(z);break;}}k.subscribe('change',function(y,z){for(var aa in z)!q[aa]&&v(aa);});n.subscribe('messages-received',x);n.subscribe('messages-reordered',x);n.subscribe('messages-updated',x);e.exports=s;},null);