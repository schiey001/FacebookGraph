/*!CK:2917603308!*//*1430113710,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["GlVVU"]); }

__d("MessageThreadViewSource",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={UNSPECIFIED:"unspecified",LEGACY:"legacy",LEGACY_MESSAGES_PREVIEW:"legacy_messages_preview",REFRESH_SPRINGBOARD:"springboard",REFRESH_MESSAGETAB:"message_tab",REFRESH_PERMALINK:"permalink",REFRESH_HIGHLANDER_JEWEL:"highlander_jewel",REFRESH_SEARCH_TYPEAHEAD:"search_typeahead",MTOUCH_MESSAGE_TAB:"mtouch_message_tab",MBASIC_MESSAGE_TAB:"mbasic_message_tab"};},null);
__d("BlueBar",["Arbiter","Event","Run","SubscriptionsHandler"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k;function l(event){if(g.inform('BlueBar/homeClick')===false)event.preventDefault();}function m(){if(k){k.release();k=null;}}var n={listen:function(o){if(!k){k=new j();i.onUnload(m);}k.addSubscriptions(h.listen(o,'click',l));}};e.exports=n;},null);
__d("BlueBarMinWidth",["DOM","DOMDimensions","Event","Locale","Style","Vector","csx","queryThenMutateDOM"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();f.init=function(){var o=g.find(document,"div._uaw"),p=g.find(o,"._59g8"),q,r=n.bind(null,function(){var s=h.getElementDimensions(o).width,t;if(j.isRTL()){t=-l.getElementPosition(o).x;}else t=l.getElementPosition(o).x+s-h.getViewportDimensions().width;var u=s-t-v;if(t>0&&u>0){var v=h.measureElementBox(o,'width',true);q=u+'px';}else q='';},function(){k.set(p,'width',q);},'BlueBarMinWidth');i.listen(window,'resize',r);r();};},null);
__d("NotificationCounter",["Arbiter","DocumentTitle","JSLogger"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={messages:0,notifications:0,requests:0},k={init:function(l){g.subscribe('update_title',this._handleUpdate.bind(this));g.subscribe('jewel/count-updated',this._handleCountUpdate.bind(this));},getCount:function(){var l=0;for(var m in j){var n=Number(j[m]);if(typeof j[m]=='string'&&isNaN(n))return j[m];if(isNaN(n)||n<0){i.create('jewels').error('bad_count',{jewel:m,count:j[m]});continue;}l+=n;}return l;},updateTitle:function(){var l=this.getCount(),m=h.get();m=l?'('+l+') '+m:m;h.set(m,true);},_handleCountUpdate:function(l,m){j[m.jewel]=m.count;this.updateTitle();},_handleUpdate:function(l,m){this.updateTitle();}};e.exports=k;},null);
__d("XNotificationsSyncController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/notifications\/sync\/",{lastSync:{type:"Int",required:true}});},null);
__d("NotificationSync",["AsyncRequest","JSLogger","NotificationConstants","NotificationUpdates","Poller","SystemEvents","UserActivity","XNotificationsSyncController","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=1000*60*60,q='channel_reload',r='time_travel',s='online',t='inactive_refresh',u=h.create('notifications'),v,w=0;function x(ba){var ca=n.getURIBuilder().setInt('lastSync',w).getURI();ba.setHandler(y).setOption('suppressErrorAlerts',true).setErrorHandler(z).setMethod('GET').setReadOnly(true).setURI(ca).setAllowCrossPageTransition(true);}function y(ba){var ca=ba.getPayload();w=ca.lastSync;if(ca.syncPayload)j.handleUpdate(i.PayloadSourceType.SYNC,ca.syncPayload);}function z(ba){}var aa={start:function(ba,ca){if(v)return;w=ca;v=new k({interval:ba,setupRequest:x,clearOnQuicklingEvents:false,dontStart:true});o(v.start.bind(v),ba);function da(ea){v.request();u.bump(ea);}l.subscribe(l.TIME_TRAVEL,da.bind(null,r));l.subscribe(l.ONLINE,function(ea,fa){fa&&da(s);});m.subscribe(function(ea,fa){if(fa.idleness>p)da(t);});},sendRequest:function(){v.request();},setuplastSync:function(ba){w=ba;},sendReloadRequest:function(){var ba=new g();ba.setIsBackgroundRequest(true);x(ba);ba.send();u.bump(q);}};e.exports=aa;},null);
__d("NotificationJewelController",["Arbiter","ChannelConstants","Event","NotificationConstants","NotificationCounter","NotificationSeenState","NotificationSync","NotificationUpdates","createObjectFrom","curry"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=0;function r(t){g.inform('jewel/count-updated',{jewel:t,count:l.getUnseenIDs().length},g.BEHAVIOR_STATE);}function s(t,u,v,w,x,y){"use strict";k.init();var z=i.listen(t.getRoot(),'mouseover',function(){z.remove();z=null;u.open();});if(t.isOpen()){u.open();}else var aa=t.subscribe('opened',function(){aa.unsubscribe();aa=null;u.open();});var ba=u.pause.bind(u);t.subscribe('opened',function(){setTimeout(ba,0);});t.subscribe('closed',function(){u.unpause();r(t.name);});n.subscribe('seen-state-updated',p(r,t.name));n.handleUpdate(j.PayloadSourceType.INITIAL_LOAD,{seenState:o(v,q)});if(!y)m.start(w,x);if(y){m.setuplastSync(x);var ca=m.sendReloadRequest,da=h.ON_INVALID_HISTORY;g.subscribe(da,ca);}r(t.name);}e.exports=s;},null);
__d("NotificationJewelHeaderController",["DOM","Event","NotificationSeenState","NotificationUserActions","NotificationUpdates"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(m,n){"use strict";h.listen(m,'click',function(){var o=i.getUnreadIDs();if(o.length)j.markNotificationsAsRead(o);});k.subscribe('read-state-updated',function(){if(n)g.setContent(n,i.getUnreadCount());});}e.exports=l;},null);
__d("NotificationGNFState",["NotificationUpdates","copyProperties","isEmpty"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={};g.subscribe('update-notifications',function(l,m){var n=m.nodes;if(!n||!n.length)return;var o={};m.nodes.forEach(function(p){var q=p.alert_id;if(j[q]!==p.gaveGNF)o[q]=p.gaveGNF;});if(!i(o)){j=h(j,o);g.didUpdateGNFState(Object.keys(o));}});g.subscribe('update-gnf',function(l,m){if(m.gnfState){j=h(j,m.gnfState);g.didUpdateGNFState(Object.keys(m.gnfState));}});var k={gaveGNF:function(l){return !!j[l];}};e.exports=k;},null);
__d("NotificationHiddenState",["NotificationUpdates","NotificationConstants","copyProperties","isEmpty"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={};g.subscribe('update-notifications',function(m,n){var o=n.nodes,p=n.payloadsource;if(p===h.PayloadSourceType.LIVE_SEND&&o&&o.length){var q={};o.forEach(function(r){var s=r.alert_id;if(k[s])q[s]=false;});if(!j(q)){k=i(k,q);g.didUpdateHiddenState(Object.keys(q));}}});g.subscribe('update-hidden',function(m,n){if(n.hiddenState){k=i(k,n.hiddenState);g.didUpdateHiddenState(Object.keys(n.hiddenState));}});var l={isHidden:function(m){if(k[m])return k[m];return false;}};e.exports=l;},null);
__d("NotificationList.react",["NotificationConstants","NotificationGNFState","NotificationHiddenState","NotificationSeenState","NotificationStore","NotificationUpdates","NotificationUserActions","React","getObjectValues","isEmpty","mapObject","merge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=n,t=s.PropTypes,u=g.PayloadSourceType.LIVE_SEND,v=n.createClass({displayName:"NotificationList",propTypes:{businessID:t.string,hasEverBeenOpened:t.bool,maxHeight:t.number,negativeTracking:t.object,paused:t.bool,staticNotifs:t.object,tracking:t.string,useChevron:t.bool,numPerPage:t.number.isRequired,listRenderer:t.func.isRequired,upsell:t.object},getInitialState:function(){this._currentlyFetching=false;this._pendingNotifs={};this._shouldScroll=false;var w=q(this.props.staticNotifs,function(y){return y.seen_state==='SEEN_AND_READ';}),x=q(this.props.staticNotifs,function(y){return !!y.gaveGNF;});return {canFetchMore:!this.props.staticNotifs,notifs:this.props.staticNotifs||{},hiddenState:{},readState:w||{},gnfState:x||{},showingChevron:false};},componentWillMount:function(){if(this.props.staticNotifs)return;k.setBusinessID(this.props.businessID);this._subscriptions=[l.subscribe('notifications-updated',function(w,x){if(x.source==u&&!p(x.updates)){this._shouldScroll=true;if(this.props.paused!==false)this._pendingNotifs=r(this._pendingNotifs,x.updates);return;}this._fetchAndUpdate(k.getCount());}.bind(this)),l.subscribe(['hidden-state-updated','read-state-updated','gnf-state-updated'],function(w,x){if(w=='hidden-state-updated'){if(x.source!==u||!this.props.paused){var y={};Object.keys(x.updates).forEach(function(ba){y[ba]=i.isHidden(ba);});this.setState({hiddenState:r(this.state.hiddenState,y)});}}else if(w=='gnf-state-updated'){var z={};Object.keys(x.updates).forEach(function(ba){z[ba]=h.gaveGNF(ba);});this.setState({gnfState:r(this.state.gnfState,z)});}else{var aa={};Object.keys(x.updates).forEach(function(ba){aa[ba]=j.isRead(ba);});this.setState({readState:r(this.state.readState,aa)});}}.bind(this))];},componentWillUnmount:function(){if(this._subscriptions){while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this._subscriptions=null;}},_getNotifsWithCurrentOrder:function(w){var x=Object.keys(this.state.notifs),y=Object.keys(w).filter(function(aa){return !this.state.notifs[aa];}.bind(this));x=x.concat(y);var z={};x.forEach(function(aa){if(this._pendingNotifs[aa]){if(this.state.notifs[aa])z[aa]=this.state.notifs[aa];}else z[aa]=w[aa];}.bind(this));return z;},_fetchAndUpdate:function(w){if(this.props.staticNotifs)return;this._currentlyFetching=true;k.getNotifications(w,function(x){var y=p(this._pendingNotifs)?x:this._getNotifsWithCurrentOrder(x),z={},aa={},ba={};o(y).forEach(function(ca){var da=ca.alert_id;if(!this.state||!this.state.readState[da])z[da]=j.isRead(da);if(!this.state||!this.state.hiddenState[da])aa[da]=i.isHidden(da);if(!this.state||!this.state.gnfState[da])ba[da]=h.gaveGNF(da);});this._currentlyFetching=false;this.setState({notifs:y,canFetchMore:k.canFetchMore()||k.getCount()!=Object.keys(y).length,readState:r(this.state.readState,z),hiddenState:r(this.state.hiddenState,aa),gnfState:r(this.state.gnfState,ba)});}.bind(this));},_fetchAndUpdateAll:function(){var w={};Object.keys(this._pendingNotifs).forEach(function(x){var y=i.isHidden(x);if(y!=this.state.hiddenState[x])w[x]=i.isHidden(x);}.bind(this));if(!p(w))this.setState({hiddenState:r(this.state.hiddenState,w)});this._pendingNotifs={};this._fetchAndUpdate(k.getCount());},_fetchNextSet:function(){if(!this._currentlyFetching){var w=Object.keys(this.state.notifs).length;this._fetchAndUpdate(w+this.props.numPerPage);}},_onScrollAndUpdate:function(w){if(this._currentlyFetching||!this.state.canFetchMore)return;if(w)this._fetchNextSet();},_onChevronShow:function(){this.setState({showingChevron:true});},_onChevronHide:function(){this.setState({showingChevron:false});},componentDidUpdate:function(w){var x=j.getUnseenIDs();if(!p(this._pendingNotifs))x=x.filter(function(y){return !this._pendingNotifs[y];}.bind(this));if(x.length&&this.props.paused)m.markNotificationsAsSeen(x);if(!w.hasEverBeenOpened&&this.props.hasEverBeenOpened){if(x.length>this.props.numPerPage){this._fetchAndUpdate(x.length);}else this._fetchNextSet();return;}if(w.paused&&!this.props.paused){this._shouldScroll=false;setTimeout(this._fetchAndUpdateAll,0);return;}},render:function(){var w=this.props.listRenderer;return (n.createElement(w,{hasEverBeenOpened:this.props.hasEverBeenOpened,paused:this.props.paused,tracking:this.props.tracking,negativeTracking:this.props.negativeTracking,shortenTimestamp:this.props.shortenTimestamp,businessID:this.props.businessID,maxHeight:this.props.maxHeight,useChevron:this.props.useChevron,notifs:this.state.notifs,afterScroll:this._onScrollAndUpdate,onChevronShow:this._onChevronShow,onChevronHide:this._onChevronHide,canFetchMore:this.state.canFetchMore,hiddenState:this.state.hiddenState,readState:this.state.readState,gnfState:this.state.gnfState,showingChevron:this.state.showingChevron,shouldScroll:this._shouldScroll,upsell:this.props.upsell||null}));}});e.exports=v;},null);
__d("NotificationListPropTypes",["React"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g,i=h.PropTypes,j={negativeTracking:i.object,tracking:i.string,useChevron:i.bool,notifs:i.object,afterScroll:i.func,onChevronShow:i.func,onChevronHide:i.func,canFetchMore:i.bool,hiddenState:i.object,readState:i.object,gnfState:i.object,showingChevron:i.bool,paused:i.bool,maxHeight:i.number,shouldScroll:i.bool,upsell:i.object};e.exports=j;},null);
__d("FlexibleBlock.react",["LeftRight.react","React","cx","invariant","keyMirror"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=k({left:true,right:true});function m(o){j(o.flex&&o.flex in n.FLEX);j(o.children&&o.children.length===2);}var n=h.createClass({displayName:"FlexibleBlock",render:function(){m(this.props);var o,p=this.props.children[0],q=this.props.children[1],r=this.props.flex==l.left,s;if(r){s=p;o=g.DIRECTION.right;}else{s=q;o=g.DIRECTION.left;}var t=h.createElement("div",{className:"_42ef"},s);return (h.createElement(g,h.__spread({},this.props,{direction:o}),r?t:this.props.children[0],r?this.props.children[1]:t));}});n.FLEX=l;e.exports=n;},null);
__d("ReadToggle.react",["React","cx","emptyFunction","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=g,l=k.PropTypes,m=g.createClass({displayName:"ReadToggle",propTypes:{isRead:l.bool.isRequired,onClick:l.func,readLabel:l.node,unreadLabel:l.node},getDefaultProps:function(){return {onClick:i};},render:function(){if(this.props.isRead){return (g.createElement("div",{"aria-label":this.props.readLabel,className:this._getClasses(),"data-hover":"tooltip","data-tooltip-alignh":"center",onClick:this.props.onClick}));}else return (g.createElement("div",{"aria-label":this.props.unreadLabel,className:this._getClasses(),"data-hover":"tooltip","data-tooltip-alignh":"center",onClick:this.props.onClick,role:"button",tabIndex:"0"}));},_getClasses:function(){return j(this.props.className,((!this.props.isRead?"_5c9q":'')+(this.props.isRead?' '+"_5c9_":'')));}});e.exports=m;},null);
__d("NotificationListItem.react",["AsyncResponse","BizSiteIdentifier.brands","BanzaiLogger","CloseButton.react","Event","FlexibleBlock.react","ImageBlock.react","Keys","List.react","NotificationPhotoThumbnail","NotificationTokens","NotificationURI","NotificationUserActions","React","TextWithEntities.react","ReadToggle.react","Timestamp.react","VaultBoxURI","XUIButton.react","PopoverMenu.react","ReactXUIMenu","MenuSeparator.react","cx","invariant","mergeObjects","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa){b.__markCompiled&&b.__markCompiled();var ga=aa.Item;function ha(ka,la){return t.createElement("span",{className:"fwb"},ka);}function ia(ka){return !!(ka&&ka.id&&!ka.is_facebook_app);}var ja=t.createClass({displayName:"NotificationListItem",getInitialState:function(){return {showingOptions:false,negativeFeedbackConfirmation:null,canReportAsSpam:false,spamReportConfirmation:null,sendingFeedback:false,mayUndoHide:false,genericNegativeFeedbackConfirmation:null,isBizSite:h.isBizSite()};},_onKeyDownItem:function(ka){if(k.getKeyCode(ka.nativeEvent)==n.RETURN)this._markItemRead();},_markItemReadIfUnreadFromReadButton:function(){if(!this.props.isRead)s.setNextIsFromReadButton(true);this._markItemReadIfUnread();},_markItemReadIfUnread:function(){!this.props.isRead&&this._markItemRead();},_markItemRead:function(){s.markNotificationsAsRead([this.props.alert_id]);},_onFeedbackError:function(ka){g.defaultErrorHandler(ka);this.setState({sendingFeedback:false});},_onHideSuccess:function(ka){var la=ka.getPayload();da(la.confirmation);this.setState({negativeFeedbackConfirmation:la.confirmation,canReportAsSpam:la.canReportAsSpam,sendingFeedback:false,showingOptions:true});},_onHideAppSuccess:function(ka){var la=ka.getPayload(),ma=la.confirmation,na=la.canReportAsSpam;da(ma);this.setState({negativeFeedbackConfirmation:ma,canReportAsSpam:na,mayUndoHide:true,sendingFeedback:false,showingOptions:true});},_onSpamReportSuccess:function(ka){var la=ka.getPayload().spamReportConfirmation;this.setState({negativeFeedbackConfirmation:null,spamReportConfirmation:la,sendingFeedback:false});},_onHide:function(){s.markNotificationAsHidden(this.props.alert_id,this._onHideSuccess,this._onFeedbackError);this.setState({sendingFeedback:true,mayUndoHide:true});},_onShowSuccess:function(){this.setState({genericNegativeFeedbackConfirmation:null,negativeFeedbackConfirmation:null,sendingFeedback:false,showingOptions:false});},_onShow:function(){var ka=this.props.negative?this.props.negative.subscription_level:null;s.markNotificationAsVisible(this.props.alert_id,ka,this._onShowSuccess,this._onFeedbackError);this.setState({sendingFeedback:true});},_onReportSpam:function(){s.markNotificationAsSpam(this.props.alert_id,this._onSpamReportSuccess,this._onFeedbackError);this.setState({sendingFeedback:true});},_markAppAsHidden:function(){s.markAppAsHidden(this.props.alert_id,this.props.application.id,this._onHideAppSuccess,this._onFeedbackError);this.setState({sendingFeedback:true});},_markAppAsVisible:function(){s.markAppAsVisible(this.props.alert_id,this.props.application.id,function(){this.setState({negativeFeedbackConfirmation:null,sendingFeedback:false,showingOptions:false,mayUndoHide:false});}.bind(this),this._onFeedbackError);this.setState({sendingFeedback:true});},_renderAttachedImage:function(ka){if(ka)return (t.createElement("img",{src:ka.uri,className:"_42td","aria-hidden":true}));return t.createElement("span",null);},_getModifiedTrackingString:function(ka){return JSON.stringify(ea(JSON.parse(this.props.tracking),ka));},_onClickCloseButton:function(){if(this.props.useChevron){this.showCloseOptionOnMenuClose=true;}else this.setState({showingOptions:true});},_onCancelNegativeFeedback:function(){this.setState({showingOptions:false});},shouldComponentUpdate:function(ka,la){return (this.props.visible!==ka.visible||this.props.isRead!==ka.isRead||this.props.timestamp!==ka.timestamp||this.props.gnfGiven!==ka.gnfGiven||this.state.showingOptions!==la.showingOptions||this.state.sendingFeedback!==la.sendingFeedback||this.state.canReportAsSpam!==la.canReportAsSpam||this.state.spamReportConfirmation!==la.spamReportConfirmation);},_onChevronHide:function(){this.props.onChevronHide();this._logChevronEvent('close');if(this.showCloseOptionOnMenuClose){this.showCloseOptionOnMenuClose=false;this._turnOff();}},_turnOff:function(){var ka=ia(this.props.application)?this._markAppAsHidden:this._onHide;ka();},_onChevronShow:function(){this.props.onChevronShow();this._logChevronEvent('open');},_logChevronEvent:function(ka){var la={event:ka,notif_type:this.props.notif_type,notif_id:parseInt(q.untokenizeIDs([this.props.alert_id])[0],10)};i.log('NotifJewelMenuLoggerConfig',la);},_onGenericSuccess:function(ka){this.setState({showingOptions:true,sendingFeedback:false,genericNegativeFeedbackConfirmation:ka});},_onClickGenericNegative:function(){this.setState({sendingFeedback:true,mayUndoHide:true});s.giveGenericNegativeFeedback(this.props.alert_id,this._onGenericSuccess,this._onFeedbackError);},_undoGenericNegative:function(){this.setState({sendingFeedback:true});s.undoGenericNegativeFeedback(this.props.alert_id,this._onShowSuccess,this._onFeedbackError);},_onOkayNegative:function(){this.setState({showingOptions:false,negativeFeedbackConfirmation:null,genericNegativeFeedbackConfirmation:null,spamReportConfirmation:null,mayUndoHide:false});},render:function(){if(!this.props.visible&&!this.state.mayUndoHide)return t.createElement("li",{className:"_4_62"});var ka=this.props.negative,la=this.props.negativeTracking,ma=(("_33c")+(!this.props.isRead?' '+"_4af":'')+(this.state.showingOptions?' '+"_4ag":'')+(this.state.sendingFeedback?' '+"_4m8s":''));if(this.state.negativeFeedbackConfirmation){var na=this.state.negativeFeedbackConfirmation,oa,pa;if(this.state.canReportAsSpam)if(!this.props.useChevron){oa=t.createElement("span",null,t.createElement("span",{className:"mhs"},"·"),t.createElement("a",{href:"#",onClick:this._onReportSpam},fa._("Report app for spam")));}else pa=t.createElement("li",null,t.createElement("a",{href:"#",onClick:this._onReportSpam,className:"mls"},fa._("Report app for spam")));var qa=ia(this.props.application)?this._markAppAsVisible:this._onShow,ra=!this.props.useChevron?t.createElement("a",{href:"#",onClick:qa,className:"mls"},fa._("Undo")):null,sa=this.props.useChevron?t.createElement(o,{border:"none",spacing:"small",className:"_jeq"},t.createElement("li",null,t.createElement("a",{href:"#",onClick:qa,className:"mls"},fa._("Undo"))),pa,t.createElement("li",null,t.createElement("a",{href:"#",onClick:this._onOkayNegative,className:"mls"},fa._("Okay")))):null;return (t.createElement("li",{className:ma,"data-gt":this.props.tracking},t.createElement("div",{className:"_4ai"},t.createElement(u,{interpolator:ha,ranges:na.ranges,aggregatedranges:na.aggregated_ranges,text:na.text}),ra,oa),sa));}var ta=this.state.spamReportConfirmation;if(ta){var ua=this.props.useChevron?t.createElement(o,{border:"none",spacing:"small",className:"_jeq"},t.createElement("li",null,t.createElement("a",{href:"#",onClick:this._onOkayNegative,className:"mls"},fa._("Okay")))):null;return (t.createElement("li",{className:ma,"data-gt":this.props.tracking},t.createElement("div",{className:"_4ai"},t.createElement(u,{interpolator:ha,ranges:ta.ranges,aggregatedranges:ta.aggregated_ranges,text:ta.text})),ua));}if(this.state.genericNegativeFeedbackConfirmation){na=this.state.genericNegativeFeedbackConfirmation;var va=ka?t.createElement("li",null,t.createElement("a",{href:"#","data-gt":bb,onClick:this._turnOff,className:"mls",ref:"closeButton"},ka.menu_option_text)):null;return (t.createElement("li",{className:ma,"data-gt":this.props.tracking},t.createElement("div",{className:"_4ai"},t.createElement(u,{interpolator:ha,ranges:na.ranges,aggregatedranges:na.aggregated_ranges,text:na.text})),t.createElement(o,{border:"none",spacing:"small",className:"_jeq"},t.createElement("li",null,t.createElement("a",{href:"#",onClick:this._undoGenericNegative,className:"mls"},fa._("Undo"))),va,t.createElement("li",null,t.createElement("a",{href:"#",onClick:this._onOkayNegative,className:"mls"},fa._("Okay"))))));}if(this.state.showingOptions&&!this.props.useChevron){var wa=ia(this.props.application)?this._markAppAsHidden:this._onHide;return (t.createElement("li",{className:ma,"data-gt":this.props.tracking},t.createElement("div",{className:"_4ai"},t.createElement("div",null,t.createElement(u,{interpolator:ha,ranges:ka.confirm_question.ranges,aggregatedranges:ka.confirm_question.aggregated_ranges,text:ka.confirm_question.text})),t.createElement("div",{className:"mts"},t.createElement(y,{"data-gt":this._getModifiedTrackingString(la.confirm),href:{url:'#'},label:ka.turn_off,use:"confirm",onClick:wa,disabled:this.state.sendingFeedback}),t.createElement(y,{"data-gt":this._getModifiedTrackingString(la.cancel),href:{url:'#'},label:fa._("Keep On"),onClick:this._onCancelNegativeFeedback,disabled:this.state.sendingFeedback})))));}var xa=null;if(this.props.title)xa=t.createElement(u,{interpolator:ha,ranges:this.props.title.ranges,aggregatedranges:this.props.title.aggregated_ranges,text:this.props.title.text,renderEmoji:true,renderEmoticons:true});var ya=null,za=null;if(ka){var ab=this._onClickCloseButton,bb;bb=this._getModifiedTrackingString(la.click);var cb=(("_4ah")+(' '+"_55m9"));ya=t.createElement(j,{className:cb,"data-gt":bb,size:"medium",tooltip:ka.button_tooltip,onClick:ab,ref:"closeButton"});}var db=r.localize(this.props.url),eb=null;if(!this.props.noPhotoPreviews)eb=p.getThumbnail(this.props.attachments,this.props.attached_story,this.props.feedback_context);var fb=eb&&r.snowliftable(db),gb=r.isVaultSetURI(db),hb=r.isAlbumDraftRecoveryDialogURI(db),ib=t.createElement(v,{className:"_55m9",isRead:!!this.props.isRead,onClick:this._markItemReadIfUnreadFromReadButton,readLabel:fa._("Read"),unreadLabel:fa._("Mark as Read")}),jb=null;if(this.props.useChevron){ib=null;ya=null;var kb=(("_1_0c")+(' '+"_55m9")),lb=null,mb=null;if(!this.props.isRead){lb=t.createElement(ga,{onclick:this._markItemReadIfUnread,className:"_18qh"},"Mark as read");mb=t.createElement(ba,null);}var nb=null;if(ka)nb=t.createElement(ga,{onclick:this._onClickCloseButton,"data-gt":bb,ref:"closeButton"},t.createElement("div",{className:"_3-y-"},ka.menu_option_title),t.createElement("div",{className:"_3-y_"},ka.menu_option_text));var ob=this.props.gnfGiven?t.createElement(ga,{onclick:this._undoGenericNegative},t.createElement("div",{className:"_3-y-"},fa._("You're not interested in this")),t.createElement("div",{className:"_3-y_"},fa._("Undo"))):t.createElement(ga,{onclick:this._onClickGenericNegative},t.createElement("div",{className:"_3-y-"},fa._("Not interested in this?")),t.createElement("div",{className:"_3-y_"},fa._("Let us know"))),pb=t.createElement(aa,null,ob,nb,mb,lb);jb=t.createElement(z,{alignh:"right",menu:pb,className:kb,onShow:this._onChevronShow,onHide:this._onChevronHide},t.createElement("div",{className:"_1_0d"}));}var qb=(fb||gb||hb)?db:this.props.ajaxify_url,rb=null,sb=null,tb=gb?x.getSyncedTabURI().toString():db;if(fb){rb='theater';}else if(hb){rb='async-post';}else if(gb||qb)rb='dialog';var ub=null,vb=this.props.actors[0];if(vb)ub={backgroundImage:'url('+vb.profile_picture.uri+')'};var wb=false;this.props.attachments.forEach(function(xb){if(wb)return;wb=xb.style_list.indexOf("notification_target")>=0||xb.style_list.indexOf("question")>=0;if(wb)return;});return (t.createElement("li",{className:ma,"data-gt":this.props.tracking,onMouseLeave:za},t.createElement("div",{className:"anchorContainer"},t.createElement("a",{href:tb,ajaxify:qb,className:(("_33e")+(this.props.useChevron?' '+"_1_0e":'')),rel:rb,onClick:sb,onMouseDown:this._markItemRead,onKeyDown:this._onKeyDownItem},t.createElement(m,null,t.createElement("span",{style:ub,className:((!this.props.isNotifsPage?"_33h":'')+(this.props.isNotifsPage?' '+"_12u1":''))}),t.createElement(l,{flex:l.FLEX.left},t.createElement("div",{className:"_4l_v"},xa,t.createElement(m,{className:(("_33f")+(this.state.isBizSite?' '+"_2g48":''))},t.createElement("img",{className:"_10cu",src:this.props.icon.uri}),t.createElement("span",null,t.createElement(w,{shorten:this.props.shortenTimestamp,time:this.props.timestamp.time,text:this.props.timestamp.text,verbose:this.props.timestamp.verbose,className:"_33g"})))),this._renderAttachedImage(eb)))),ib,ya,jb)));}});e.exports=ja;},null);
__d("NotificationJewelList.react",["Animation","Event","LoadingIndicator.react","NotificationListPropTypes","NotificationListItem.react","React","ScrollableArea.react","Vector","cx","debounce","fbt","getObjectValues","isEmpty"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=160,u=530,v=40,w=64,x=430,y=l.createClass({displayName:"NotificationJewelList",propTypes:j,_isLoadingIndicatorVisible:function(){var z=this.refs.loading;if(!z)return false;var aa=l.findDOMNode(this.refs.scrollable),ba=n.getElementDimensions(aa).y;if(ba===0)return false;var ca=n.getElementPosition(aa).y+ba,da=n.getElementPosition(l.findDOMNode(z)).y;da-=v;return da<ca;},_calculateHeight:function(){var z=n.getViewportDimensions().y,aa=Math.min(this.props.maxHeight||u,z-t);if(this.props.upsell)return Math.max(aa-w,0);return aa;},_keepOnLoading:function(){if(this.isMounted())this.props.afterScroll(this._isLoadingIndicatorVisible());},_renderItems:function(){return r(this.props.notifs).map(function(z){var aa=z.alert_id;return (l.createElement(k,l.__spread({key:aa,visible:!this.props.hiddenState[aa],isRead:this.props.readState[aa],gnfGiven:this.props.gnfState[aa],negativeTracking:this.props.negativeTracking,shortenTimestamp:this.props.shortenTimestamp,useChevron:this.props.useChevron,onChevronShow:this.props.onChevronShow,onChevronHide:this.props.onChevronHide,parent:this},z)));}.bind(this));},componentDidMount:function(){var z=l.findDOMNode(this.refs.scrollable);h.listen(window,'resize',p(function(){if(!s(this.props.notifs))new g(z).to('height',this._calculateHeight()+'px').duration(100).go();}.bind(this)));},componentDidUpdate:function(z){if(this.props.paused&&!z.paused)if(this.props.shouldScroll&&this.refs.scrollable)this.refs.scrollable.getArea().scrollToTop(false);setTimeout(this._keepOnLoading,0);},render:function(){var z=this.props.notifs,aa=null,ba=null,ca=x,da=null;if(!s(z)){aa=l.createElement("ul",{"data-gt":this.props.tracking},this._renderItems());ba=this._calculateHeight();}else if(!this.props.canFetchMore)aa=l.createElement("div",{className:"_572e"},q._("No new notifications"));if(this.props.canFetchMore)da=l.createElement(i,{color:"white",size:"small",ref:"loading",className:"_33i"});var ea=null;if(this.props.upsell){var fa=this.props.upsell.module;ea=l.createElement(fa,l.__spread({},this.props.upsell.props));}var ga=(("_50-t")+(this.props.showingChevron?' '+"_2iy1":''));return (l.createElement("div",{className:ga},l.createElement(m,{ref:"scrollable",width:ca,height:ba,fade:true,persistent:true,onScroll:p(this._keepOnLoading)},aa,da),ea));}});e.exports=y;},null);
__d("NotificationJewelListController",["NotificationList.react","NotificationJewelList.react","React"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(k,l){"use strict";this.$NotificationJewelListController0=k;this.$NotificationJewelListController1=l;this.$NotificationJewelListController2=false;this.$NotificationJewelListController3=false;this.$NotificationJewelListController4();}j.prototype.open=function(){"use strict";this.$NotificationJewelListController2=true;this.$NotificationJewelListController4();};j.prototype.pause=function(){"use strict";this.$NotificationJewelListController3=true;this.$NotificationJewelListController4();};j.prototype.unpause=function(){"use strict";this.$NotificationJewelListController3=false;this.$NotificationJewelListController4();};j.prototype.$NotificationJewelListController4=function(){"use strict";i.render(i.createElement(g,{hasEverBeenOpened:this.$NotificationJewelListController2,paused:this.$NotificationJewelListController3,tracking:this.$NotificationJewelListController1.tracking,negativeTracking:this.$NotificationJewelListController1.negativeTracking,shortenTimestamp:this.$NotificationJewelListController1.shortenTimestamp,businessID:this.$NotificationJewelListController1.businessID,maxHeight:this.$NotificationJewelListController1.maxHeight,useChevron:this.$NotificationJewelListController1.useChevron,numPerPage:5,listRenderer:h,upsell:this.$NotificationJewelListController1.upsell||null}),this.$NotificationJewelListController0);};e.exports=j;},null);
__d("PagesMessengerThreadDialogLink.react",["AsyncDialog","AsyncRequest","Link.react","MessageThreadViewSource","PagesMessagingConst","ReactComponentWithPureRenderMixin","React","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=m,p=o.PropTypes,q=m.createClass({displayName:"PagesMessengerThreadDialogLink",mixins:[l],propTypes:{threadID:p.string.isRequired,viewer:p.string.isRequired,folder:p.string},getInitialState:function(){return {permalinkURI:'#'};},componentDidMount:function(){this._getPermalinkURI(this.props);},componentWillReceiveProps:function(r){if(r.threadID!==this.props.threadID||r.folder!==this.props.folder)this._getPermalinkURI(r);},render:function(){return (m.createElement(i,{className:this.props.className,href:"#",onClick:this._handleClick,role:"button"},this.props.children));},_handleClick:function(r){r.preventDefault();g.send(new h(this.state.permalinkURI).setRelativeTo(r.target));},_getPermalinkURI:function(r){this.setState(this.getInitialState());var s=r.threadID,t=r.viewer,u=r.folder;d(['MercuryServerRequests'],function(v){var w=v.getForFBID(t);w.getServerThreadID(s,function(x){this.isMounted()&&this.setState({permalinkURI:n(k.LOAD_MESSAGE_THREAD_URI).setQueryData({pageid:t,threadid:s,threadElementID:x,folder:u,source:j.REFRESH_HIGHLANDER_JEWEL}).toString()});}.bind(this));}.bind(this));}});e.exports=q;},null);
__d("ContextualHelpSearchController",["Event","AsyncRequest","DOM","CSS","Focus","Input","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=400;function o(){this._token=null;this._timerID=0;this._lastQuery=null;this.typing_listener=null;this.clear_listener=null;this.async_request=null;}m(o.prototype,{init:function(p,q,r,s,t,u){this.loader=p;this.search_box=q;this.topics_area=r;this.results_area=s;this.clear_button=t;this.typing_listener=g.listen(this.search_box,'keyup',this.setTimer.bind(this));this.clear_listener=g.listen(this.clear_button,'click',this.clearResults.bind(this));if(u==null||u.focusSearchBox==null||u.focusSearchBox)k.set(this.search_box);},source:'contextual_help',clearResults:function(){this.show(this.topics_area);this._lastQuery='';l.reset(this.search_box);k.set(this.search_box);if(this.async_request!==null){this.async_request.abort();this.async_request=null;}j.addClass(this.clear_button,'hidden_elem');},update:function(){var p=l.getValue(this.search_box);if(p===this._lastQuery)return;this._lastQuery=p;if(p===''){this.clearResults();return;}this.show(this.loader);var q={query:p,width:this._width||n,source:this.source};this.async_request=new h('/help/ajax/search/').setData(q).setHandler(function(r){this._update(r);}.bind(this));this.async_request.send();},_update:function(p){this.async_request=null;var q=p.getPayload().results;i.setContent(this.results_area,q);this.show(this.results_area);if(l.getValue(this.search_box)===''){this.clearResults();}else j.removeClass(this.clear_button,'hidden_elem');},setTimer:function(){if(this._timerID!==0)clearTimeout(this._timerID);this._timerID=setTimeout(this.update.bind(this),300);if(this.async_request!=null){this.async_request.abort();this.async_request=null;}},show:function(p){var q=[this.loader,this.topics_area,this.results_area];for(var r=0;r<q.length;r++)j.addClass(q[r],'hidden_elem');j.removeClass(p,'hidden_elem');}});e.exports=o;},null);
__d("RequestsJewel",["Animation","AccessibilityLogger","Arbiter","AsyncRequest","AsyncSignal","ChannelConstants","CSS","DOM","Event","LinkController","Parent","ScrollableArea","Vector","$","copyProperties","debounce","ge","shield","fbt","requireWeak"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){b.__markCompiled&&b.__markCompiled();var aa=null;z(['FriendBrowserCheckboxController'],function(fa){return aa=fa;});var ba=530,ca=30,da=160;u(ea,{instance:null,getInstance:function(){return ea.instance;},replaceJewelTitle:function(fa,ga){n.setContent(t(fa),ga);},updateFromDOM:function(){if(ea.instance)ea.instance.fromDom();},setInitialHeight:function(){if(ea.instance)ea.instance.setHeight();}});function ea(fa,ga,ha){"use strict";ea.instance=this;this.countNew=0;this.jewel=fa;this.jewelFlyoutCase=fa.getRoot();this.jewelFlyout=w('fbRequestsFlyout');this.newCountSpan=w('newRequestCount');this.folder=ga;this.doNewMarkRead=ha;this.openTimestamp=0;this.$RequestsJewel0={};this.$RequestsJewel1=0;this.shouldClearPredictionAssocOnClick=false;var ia=w('requestsMarkReadButton');if(ia)o.listen(ia,'click',x(this.$RequestsJewel2,this));this.jewel.subscribe('marked-seen',x(this.$RequestsJewel3,this));this.jewel.subscribe('closed',x(this.$RequestsJewel4,this));this.jewel.subscribe('updated',this.$RequestsJewel5.bind(this));this.jewel.subscribe('opened',this.$RequestsJewel6.bind(this));p.registerHandler(this.$RequestsJewel7.bind(this));i.subscribe(l.getArbiterType('jewel_requests_add'),this.$RequestsJewel8.bind(this));i.subscribe(l.getArbiterType('jewel_friending_notifs'),this.$RequestsJewel9.bind(this));i.subscribe(l.getArbiterType('jewel_requests_remove_old'),this.$RequestsJewela.bind(this));i.subscribe(l.getArbiterType('friend_requests_seen'),this.$RequestsJewelb.bind(this));o.listen(this.jewelFlyout,'submit',function(ka){var la=q.byClass(ka.getTarget(),'objectListItem');if(la){m.removeClass(la,'jewelItemNew');m.addClass(la,'jewelItemResponded');}}.bind(this));var ja=n.find(w('fbRequestsJewel'),'a[rel="toggle"]');o.listen(ja,'focus',function(ka){h.logFocusIn();}.bind(this));this.setupScroll();o.listen(window,'resize',v(function(){this.$RequestsJewelc();}.bind(this)));}ea.prototype.setupScroll=function(){"use strict";var fa=n.scry(this.jewelFlyout,'.uiScrollableAreaWrap')[0];if(fa){this.$RequestsJeweld=fa;this.$RequestsJewele=0;this.$RequestsJewelf=o.listen(fa,'scroll',this.$RequestsJewelg.bind(this),o.Priority.$RequestsJewelh);}};ea.prototype.fromDom=function(){"use strict";n.scry(this.jewelFlyout,'.jewelItemList li.objectListItem').forEach(function(fa){var ga=fa.getAttribute('id');if(ga){var ha=w(ga+'_status'),ia=this.$RequestsJeweli(ga);if(ia.requester)this.$RequestsJewel0[ia.requester]=ga;++this.$RequestsJewel1;}}.bind(this));this.$RequestsJewelj();};ea.prototype.$RequestsJewelk=function(fa){"use strict";var ga=fa.match(/^(\d+)_(\d+)/);return (ga)?{requester:ga[1],type:ga[2]}:(void 0);};ea.prototype.$RequestsJeweli=function(fa){"use strict";var ga=fa?this.$RequestsJewelk(fa):(void 0),ha;if(ga&&ga.requester){ha=parseInt(ga.requester,10);if(isNaN(ha))ha=(void 0);}var ia;if(ga&&ga.type){ia=parseInt(ga.type,10);if(isNaN(ia))ia=(void 0);}return {requester:ha,type:ia};};ea.prototype.$RequestsJewell=function(){"use strict";if(this.countNew>0)this.countNew-=1;};ea.prototype.$RequestsJewel7=function(fa,event){"use strict";var ga=q.byClass(fa,'jewelItemNew');if(ga&&q.byClass(ga,'fbRequestList')&&q.byClass(ga,'beeperEnabled')){var ha=this.$RequestsJewelk(ga.id);ha&&this.$RequestsJewel3(ha.requester,ha.type);this.$RequestsJewell();i.inform('jewel/count-updated',{jewel:'requests',count:this.countNew});m.removeClass(ga,'jewelItemNew');}return true;};ea.prototype.$RequestsJewelm=function(){"use strict";return n.scry(this.jewelFlyout,'.uiScrollableArea')[0];};ea.prototype.$RequestsJewelg=function(){"use strict";var fa=n.scry(this.$RequestsJeweld,'.uiMorePager');if(!fa)return;var ga=fa.pop();if(ga){var ha=s.getElementPosition(ga,'viewport').y;if(ha>0)m.addClass(q.byClass(this.$RequestsJeweld,'uiScrollableArea'),'contentAfter');var ia=n.find(ga,'a');if(!ia)return;var ja=s.getElementPosition(ia,'viewport').y;if(ja==this.$RequestsJewele)return;var ka=s.getElementPosition(this.$RequestsJeweld,'viewport').y+s.getElementDimensions(this.$RequestsJeweld).y;if(ja-300<ka&&ja>0){this.$RequestsJewele=ja;var la=ia.getAttribute('ajaxify');if(la){new j(la).setRelativeTo(ia).setStatusElement(q.byClass(ia,'stat_elem')).send();}else aa&&aa.getInstance('jewel').showMore();}}};ea.prototype.$RequestsJewel9=function(fa,ga){"use strict";if(!ga||this.jewel.isOpen())return;if(ga.obj.notif_type!=='friend_confirmed')return;if(w('fbRequestsJewelLoading')){new j().setURI('/ajax/requests/loader/').send();return;}var ha={};ha.reloadcontent=true;new j().setURI('/ajax/requests/loader/').setData(ha).send();};ea.prototype.$RequestsJewel8=function(fa,ga){"use strict";if(!ga)return;var ha=ga.obj.from,ia=ga.obj.suggester,ja=this.$RequestsJeweli(this.$RequestsJewel0[ha]).type,ka=ja===19&&!ia;if(!ka&&(ja||this.jewel.isOpen()))return;if(w('fbRequestsJewelLoading')){new j().setURI('/ajax/requests/loader/').send();}else{var la={};la.reloadcontent=true;new j().setURI('/ajax/requests/loader/').setData(la).send();}};ea.prototype.$RequestsJewela=function(fa,ga){"use strict";if(!ga||this.jewel.isOpen()||w('fbRequestsJewelLoading')!==null)return;var ha=this.$RequestsJewel0[ga.obj.from],ia=ha&&w(ha);if(ia){if(m.hasClass(ia,'jewelItemNew')){this.$RequestsJewell();i.inform('jewel/count-updated',{jewel:'requests',count:this.countNew});}if(!m.hasClass(ia,'jewelItemResponded')){n.remove(ia);delete this.$RequestsJewel0[ga.obj.from];--this.$RequestsJewel1;this.$RequestsJewelj();}}};ea.prototype.$RequestsJewel2=function(){"use strict";this.jewel.markSeen();this.$RequestsJewelo();};ea.prototype.$RequestsJewel3=function(fa,ga){"use strict";var ha=n.scry(this.jewelFlyout,'li');new k('/ajax/gigaboxx/endpoint/UpdateLastSeenTime.php',{folder:this.folder,first_item:ha[0].id}).send();var ia=typeof fa!='undefined'&&typeof ga!='undefined'?{requester:fa,type:ga}:{};this.doNewMarkRead&&new k('/ajax/requests/mark_read/',ia).send();};ea.prototype.$RequestsJewelb=function(fa,ga){"use strict";i.inform('jewel/count-updated',{jewel:'requests',count:0});};ea.prototype.$RequestsJewelo=function(fa,ga){"use strict";n.scry(this.jewel.root,'li.jewelItemNew').forEach(function(ha){m.removeClass(ha,'jewelItemNew');});};ea.prototype.$RequestsJewel5=function(fa,ga){"use strict";this.countNew=ga.count;m.conditionClass(this.jewelFlyout,'beeperUnread',this.countNew>0);m.conditionClass(this.jewelFlyoutCase,'showRequests',this.countNew>0);if(this.newCountSpan){var ha=this.countNew==1?y._("{num} NEW REQUEST",[y.param("num",this.countNew)]):y._({"*":"{num} NEW REQUESTS"},[y.param("num",this.countNew,[0])]);n.setContent(this.newCountSpan,ha);}};ea.prototype.$RequestsJewelj=function(){"use strict";n.scry(this.jewelFlyout,'li.empty').forEach(function(fa){m.conditionShow(fa,this.$RequestsJewel1<=0);}.bind(this));};ea.prototype.$RequestsJewel6=function(){"use strict";i.inform('requestsJewel/opened');var fa=this.$RequestsJewelm();if(w('fbRequestsJewelLoading')){var ga=Date.now();if(this.openTimestamp+5000<ga){this.openTimestamp=ga;new j().setURI('/ajax/requests/loader/').setData({log_impressions:true}).send();}}else{var ha=Object.keys(this.$RequestsJewel0);if(ha.length>0)new j().setURI('/friends/requests/log_impressions').setData({ids:ha.join(','),ref:'jewel'}).send();}fa&&r.poke(fa);};ea.prototype.$RequestsJewel4=function(){"use strict";i.inform('requestsJewel/closed');this.$RequestsJewelo();};ea.prototype.$RequestsJewelp=function(){"use strict";return Math.min(Math.max(s.getViewportDimensions().y-da,ca),ba);};ea.prototype.$RequestsJewelc=function(){"use strict";if(this.$RequestsJewelm())new g(this.$RequestsJewelm()).to('height',this.$RequestsJewelp()+'px').duration(100).go();};ea.prototype.setHeight=function(){"use strict";this.$RequestsJewelm().style.height=this.$RequestsJewelp()+'px';};e.exports=ea;},null);
__d("JewelX",["Event","Arbiter","ArbiterMixin","CSS","DOM","HTML","Keys","TabIsolation","Toggler","csx","copyProperties","emptyFunction","reportData","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u=function(v,w){v&&w&&this.init(v,w);};q(u,{_instancesByName:{},_resizeListener:null});q(u.prototype,i,{init:function(v,w){this.name=w.name;this.root=v;this.badge=w.badge;this.countNew=0;this.initialCount=0;this.escHandler=null;this.togglerInstance=o.createInstance(v).setSticky(false);if(w.keepOpenForSnowlift)this.togglerInstance.setPrePageTransitionCallback(this._onPrePageTransition.bind(this));u._instancesByName[this.name]=this;var x=this.getFlyout(),y=new n(x);o.createInstance(x).setSticky(false);o.listen('show',this.root,function(z){this._logFirstClick();this.hasNew()&&this.markSeen();this.reset();this.inform('opened');h.inform('layer_shown',{type:'Jewel'});y.enable();this.setupEvents();}.bind(this));o.listen('hide',this.root,function(z,aa){this.hasNew()&&this.markSeen();this.reset();this.inform('closed');h.inform('layer_hidden',{type:'Jewel'});y.disable();this.removeEvents();}.bind(this));h.subscribe('jewel/count-updated',function(z,aa){aa.jewel==this.name&&this.update(aa);}.bind(this));h.subscribe('jewel/count-initial',function(z,aa){aa.jewel==this.name&&this.setInitial(aa);}.bind(this));h.subscribe('jewel/reset',function(z,aa){aa.jewel==this.name&&this.reset();}.bind(this));h.subscribe('jewel/focus',function(z,aa){if(this.isOpen())o.hide(this.root);}.bind(this));u._resizeListener=u._resizeListener||(function(){var z=null;return g.listen(window,'resize',function(){clearTimeout(z);z=t(h.inform.bind(h,'jewel/resize'),100);});})();},getRoot:function(){return this.root;},getFlyout:function(){if(typeof this._flyout==='undefined')this._flyout=k.find(this.root,".__tw");return this._flyout;},hasNew:function(){return j.hasClass(this.root,'hasNew');},isOpen:function(){return j.hasClass(this.root,'openToggler');},reset:function(){j.removeClass(this.root,'hasNew');},setContent:function(v){var w=k.find(this.root,'ul.jewelItemList');k.setContent(w,l(v));},update:function(v){this.countNew=v.count;if(typeof this.countNew==='number'&&this.countNew<0)this.countNew=0;this.badge.setLegacyContent(this.countNew);var w=isNaN(this.countNew)||this.countNew>0;j.conditionClass(this.root,'hasNew',w);this.inform('updated',v);},setInitial:function(v){this.initialCount=v;},setupEvents:function(){this.escHandler=g.listen(document.documentElement,'keydown',function(v){if(v.keyCode===m.ESC&&this.isOpen())o.hide(this.root);}.bind(this));},removeEvents:function(){if(this.escHandler){this.escHandler.remove();this.escHandler=null;}},markSeen:function(){h.inform('jewel/count-updated',{jewel:this.name,count:0},h.BEHAVIOR_STATE);this.inform('marked-seen');},_onPrePageTransition:function(v,w){if(!this._isSnowliftURI(w.from)&&!this._isSnowliftURI(w.to))this.togglerInstance&&this.togglerInstance.hide();},_isSnowliftURI:function(v){return v&&v.getQueryData().hasOwnProperty('theater');},_logFirstClick:function(){this._logFirstClick=r;s('jewel_click',{gt:{count:this.countNew,initial:this.initialCount,jewel:this.name}});}});e.exports=u;},null);
__d("LitestandNewsfeedCountUpdater",["Arbiter","AsyncRequest","LitestandMessages","LitestandSidebarBookmarkConfig","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l,m;function n(){m&&clearTimeout(m);if(l)return;m=setTimeout(o,j.nf_count_query_interval_ms);}function o(){if(l)return;new h().setURI('/ajax/litestand/newsfeed_count').setHandler(function(r){if(l)return;p(r.getPayload());n();}).setAllowCrossPageTransition(true).send();}function p(r){g.inform(i.UPDATE_HOME_COUNT,{count:r,onHome:l},g.BEHAVIOR_STATE);}var q={init:function(){q.init=k;g.subscribe(i.NEWSFEED_LOAD,function(){l=true;p(0);});g.subscribe(i.LEAVE_HOME,function(){l=false;n();});n();}};e.exports=q;},null);
__d("LitestandChromeHomeCount",["Arbiter","CSS","DOM","Event","LitestandMessages","LitestandNewsfeedCountUpdater","Parent","UserAgent_DEPRECATED","csx","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=20,r,s,t,u,v,w={init:function(x){v=x;s=i.find(document,"div._uaw ._5ahz");r=s.parentNode;t=m.byClass(r,"_1ayn");u=false;g.subscribe(k.UPDATE_HOME_COUNT,function(y,z){w.updateBadge(z.onHome?0:z.count);});j.listen(t,'click',function(event){var y=event.getModifiers();if(y.shift||(n.osx()&&y.meta)||(n.windows()&&y.control))w.updateBadge(0);});l.init();w.updateBadge(v);},updateBadge:function(x){v=x;var y=x>0;w.toggleBadge(y);if(y){var z=x>q?q+'+':x;i.setContent(s,z);}},toggleBadge:function(x){if(u===x)return;u=x;h.conditionClass(r,"_5ahy",!x);}};e.exports=w;},null);
__d("MercuryJewelCountControl",["Arbiter","MercuryServerRequests","MercuryThreadInformer","MercuryUnseenState","UserActivity"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(m){"use strict";var n=h.get(),o=i.get();this.$MercuryJewelCountControl2=j.get();this.render();n.subscribe('model-update-completed',function(p,q){this.$MercuryJewelCountControl4(false);}.bind(this));o.subscribe('unseen-updated',function(){return this.render();}.bind(this));this.$MercuryJewelCountControl5=m;this.$MercuryJewelCountControl5.subscribe('marked-seen',function(){this.$MercuryJewelCountControl4(true);}.bind(this));}l.prototype.render=function(){"use strict";g.inform('jewel/count-updated',{jewel:'mercurymessages',count:this.$MercuryJewelCountControl2.getUnseenCount()},g.BEHAVIOR_STATE);};l.prototype.$MercuryJewelCountControl4=function(m){"use strict";if(m||(this.$MercuryJewelCountControl5.isOpen()&&k.isActive()))this.$MercuryJewelCountControl2.markAsSeen();};l.constructStores=function(){"use strict";j.get();};e.exports=l;},null);
__d("P2PNUXRenderer.react",["Image.react","Layout.react","Link.react","P2PAcceptMoneyDialog.react","P2PCreditCardStore","P2PLinkConstants","P2PNUXRendererUtils","P2PTransferStatus","P2PTransferParam","P2PTransferStore","P2PVerificationFlowHelper","React","ReactLayeredComponentMixin","XUIButton.react","XUIGrayText.react","XUINotice.react","cx","emptyFunction","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){b.__markCompiled&&b.__markCompiled();'use strict';var aa=h.FillColumn,ba=h.Column,ca=r,da=ca.PropTypes,ea=r.createClass({displayName:"P2PNUXRenderer",mixins:[s],propTypes:{onImageLoad:da.func,type:da.oneOf(['jewel','settingsNUX','settingsReceiverRisk','settingsPushFail']).isRequired},getDefaultProps:function(){return {onImageLoad:x};},getInitialState:function(){var fa={creditCardAsyncRequestState:{},creditCards:[],acceptMoneyDialogShown:false,transfer:p.getNUXTransfer()};if(fa.transfer&&m.doesNUXNeedCreditCards(fa.transfer))fa.creditCardAsyncRequestState=k.getAsyncRequestState(),fa.creditCards=k.getAll();return fa;},onCreditCardStoreChange:function(){this.setState({creditCardAsyncRequestState:k.getAsyncRequestState(),creditCards:k.getAll()});},onTransferStoreChange:function(){var fa={transfer:p.getNUXTransfer()};if(fa.transfer&&m.doesNUXNeedCreditCards(fa.transfer))fa.creditCardAsyncRequestState=k.getAsyncRequestState(),fa.creditCards=k.getAll();this.setState(fa,function(){this.props.onImageLoad(r.findDOMNode(this));}.bind(this));},componentDidMount:function(){this.creditCardStoreSub=k.addListener('change',this.onCreditCardStoreChange);this.transferStoreSub=p.addListener('change',this.onTransferStoreChange);},componentWillUnmount:function(){this.unsubscribeAll();},unsubscribeAll:function(){this.unsubscribeCreditCardStoreEvent();this.unsubscribeTransferStoreEvent();},unsubscribeCreditCardStoreEvent:function(){if(this.creditCardStoreSub){this.creditCardStoreSub.remove();this.creditCardStoreSub=null;}},unsubscribeTransferStoreEvent:function(){if(this.transferStoreSub){this.transferStoreSub.remove();this.transferStoreSub=null;}},handleAcceptMoneyDialogClose:function(){this.setState({acceptMoneyDialogShown:false});},handleGetStartedClick:function(){this.setState({acceptMoneyDialogShown:true});},handleGoToConfirmClicked:function(){q.startVerificationFlow(this.state.transfer[o.TRANSFER_ID],false);},render:function(){var fa,ga=this.state.transfer,ha;if(ga&&m.doesNUXNeedCreditCards(ga)&&!k.isCreditCardsFetchComplete()){ha=false;}else if(ga){ha=true;fa=ga[o.STATUS];}if(this.props.type==='jewel'){return (r.createElement("div",{className:"_3kw_"},ha?this.renderJewel():null));}else if(this.props.type==='settingsReceiverRisk'){return (r.createElement("div",{className:"_cu5"},ha&&fa===n.PENDING_RECIPIENT_VERIFICATION?this.renderSettingsReceiverRisk():null));}else if(this.props.type==='settingsNUX'){return (r.createElement("div",{className:"_4z2f"},ha&&fa===n.PENDING_RECIPIENT_NUX?this.renderSettingsNUX():null));}else if(this.props.type==='settingsPushFail')return (r.createElement("div",{className:"_4b82"},ha&&fa===n.PENDING_PUSH_FAIL?this.renderSettingsPushFail():null));},renderJewel:function(){var fa;fa=this.state.transfer[o.STATUS];if(fa===n.PENDING_RECIPIENT_VERIFICATION){return this.renderJewelRisk();}else if(fa===n.PENDING_RECIPIENT_NUX){return this.renderJewelNUX();}else if(fa===n.PENDING_PUSH_FAIL)return this.renderJewelPushFail();},renderJewelRisk:function(){return (r.createElement("div",{className:"_3kxg",onClick:this.handleGoToConfirmClicked},r.createElement(h,null,r.createElement(ba,{className:"_3kxh"},r.createElement(g,{className:"_547r",height:28,src:z("/images/p2p/receiver-risk-notification.png"),width:28})),r.createElement(aa,{className:"_2pic"},r.createElement(u,{display:"block",shade:"medium",weight:"bold"},y._("Please Confirm Your Info")),r.createElement(u,{display:"block",shade:"medium"},y._("To accept the money {sender_name} sent you, please confirm your information.",[y.param("sender_name",this.state.transfer.sender.name)])),r.createElement(u,{className:"_3kxj",display:"block"},y._("Confirm Info"))))));},renderJewelPushFail:function(){return (r.createElement("div",{className:"_3kxg"},r.createElement(h,null,r.createElement(ba,{className:"_3kxh"},r.createElement(g,{className:"_547r",height:28,src:z("/images/p2p/receiver-risk-notification.png"),width:28})),r.createElement(aa,{className:"_2pic"},r.createElement(u,{display:"block",shade:"medium",weight:"bold"},y._("Update Your Card")),r.createElement(u,{display:"block",shade:"medium"},y._("It looks like your card is expired or invalid. Please update it to get {currency}{amount} from {sender_name}.",[y.param("currency",this.state.transfer.currency),y.param("amount",this.state.transfer.amount),y.param("sender_name",this.state.transfer.sender.name)])),r.createElement(i,{href:l.settingsWWWURI,target:"_blank"},r.createElement(u,{className:"_3kxj",display:"block"},y._("Update Card")))))));},renderJewelNUX:function(){return (r.createElement("div",{className:"_3kxg",onClick:this.handleGetStartedClick},r.createElement(h,null,r.createElement(ba,{className:"_3kxh"},r.createElement(g,{className:"_547r",height:28,src:z("/images/p2p/receiver-nux-notification.png"),width:28})),r.createElement(aa,{className:"_2pic"},r.createElement(u,{display:"block",shade:"medium",weight:"bold"},y._("Accept {currency}{amount} from {sender_name}",[y.param("currency",this.state.transfer.currency),y.param("amount",this.state.transfer.amount),y.param("sender_name",this.state.transfer.sender.name)])),r.createElement(u,{display:"block",shade:"medium"},this.getTimeBasedNUXMessageBody()),r.createElement(u,{className:"_3kxj",display:"block"},y._("Add Debit Card"))))));},renderSettingsReceiverRisk:function(){return (r.createElement("div",{className:"_cu8"},r.createElement(v,{use:"warn"},r.createElement(u,{className:"_3-95",display:"block",shade:"medium"},y._("To accept the money {sender_name} sent you, please confirm your information.",[y.param("sender_name",this.state.transfer.sender.name)])),r.createElement(t,{label:y._("Confirm Info"),onClick:this.handleGoToConfirmClicked}))));},renderSettingsPushFail:function(){return (r.createElement("div",{className:"_cu8"},r.createElement(v,{use:"warn"},r.createElement(u,{className:"_3-95",display:"block",shade:"medium"},y._("It looks like your card is expired or invalid. Please update it to get {currency}{amount} from {sender_name}.",[y.param("currency",this.state.transfer.currency),y.param("amount",this.state.transfer.amount),y.param("sender_name",this.state.transfer.sender.name)])))));},renderSettingsNUX:function(){return (r.createElement("div",{className:"_4z2g"},r.createElement("div",{className:"_4z2h"},r.createElement(u,{className:"_3-95 _2pi7",display:"block",shade:"light"},r.createElement("div",{className:"_3-94"},y._("{sender_name} sent you {currency}{amount}.",[y.param("sender_name",this.state.transfer.sender.name),y.param("currency",this.state.transfer.currency),y.param("amount",this.state.transfer.amount)])),r.createElement("div",{className:"_3-95"},this.getTimeBasedNUXMessageBody())),r.createElement(t,{label:y._("Add Debit Card"),onClick:this.handleGetStartedClick,use:"confirm"}))));},getTimeBasedNUXMessageBody:function(){var fa=this.state.transfer.creationTime*1000,ga=(1000*60*60*24),ha=Date.now(),ia=(ha-fa)/ga,ja=Math.max(14-Math.floor(ia),1);if(ia<=5){if(this.props.type==='settingsNUX'){return (y._("Add a debit card to accept it."));}else return (y._("Add a debit card and it'll go straight to your bank."));}else if(ia<=11){return (y._("This money will be sent back in {days left} days. Add a debit card to accept it.",[y.param("days left",ja)]));}else return (y._({"day":"You have {days left} day to add a debit card before the money is sent back to {sender_name}.","days":"You have {days left} days to add a debit card before the money is sent back to {sender_name}."},[y.param("days left",ja),y['enum'](ja===1?'day':'days',{day:"day",days:"days"}),y.param("sender_name",this.state.transfer.sender.name)]));},renderLayers:function(){var fa={};if(this.state.acceptMoneyDialogShown)fa.acceptDialog=r.createElement(j,{asyncRequestState:this.state.creditCardAsyncRequestState,creditCards:this.state.creditCards,onClose:this.handleAcceptMoneyDialogClose,transfer:this.state.transfer});return fa;}});e.exports=ea;},null);
__d("MercuryThreadlistContainer.react",["Bootloader","immutable","MercuryAPIArgsSource","MercuryThreadlistConstants","P2PNUXRenderer.react","React","SubscriptionsHandler"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=l,o=n.PropTypes,p='search',q=l.createClass({displayName:"MercuryThreadlistContainer",propTypes:{ChildClass:o.func.isRequired,viewer:o.string.isRequired,folder:o.string.isRequired},getInitialState:function(){return {isLoading:true,isSearching:false,threads:h.Map()};},componentDidMount:function(){g.loadModules(["MercuryOrderedThreadlist","MercuryThreadInformer","MercuryThreads"],function(r,s,t){this._threadlist=r.getForFBID(this.props.viewer);this._threads=t.getForFBID(this.props.viewer);this._informer=s.getForFBID(this.props.viewer);this._subscriptions=new m();this._subscriptions.addSubscriptions(this._informer.subscribe('threadlist-updated',function(u,v){this._updateThreads(this.props.folder);}.bind(this)));this._handleFolderChange(this.props.folder);}.bind(this));},componentWillReceiveProps:function(r){if(r.folder!==this.props.folder)this._handleFolderChange(r.folder);},componentWillUnmount:function(){this._cancelThreadsCallback();this._cancelThreadlistCallback();this._subscriptions&&this._subscriptions.release();},render:function(){var r=this.props,s=r.ChildClass,t=r.folder,u=(function(w,x){var y={},z=Object.prototype.hasOwnProperty;if(w==null)throw new TypeError();for(var aa in w)if(z.call(w,aa)&&!z.call(x,aa))y[aa]=w[aa];return y;})(r,{ChildClass:1,folder:1}),v=this.state.isSearching?this.state.threads.get(p)||[]:this.state.threads.get(t)||[];return (l.createElement(s,l.__spread({},u,{isLoaded:!!this._threadlist&&this._threadlist.hasLoadedThreadlist(t),isLoading:this.state.isLoading,isSearching:this.state.isSearching,onLoadMoreRequest:this._loadMoreThreads,onQuery:this._handleQuery,onSearchResults:this._handleSearchResults,p2pNUX:this._renderP2PNUX(),threads:v})));},_renderP2PNUX:function(){return (l.createElement(k,{type:"jewel"}));},_handleFolderChange:function(r){if(!this._hasInitialThreads(r)){this._loadThreads(r,j.JEWEL_THREAD_COUNT+1);}else if(this.state.isLoading){this.setState({isLoading:false},function(){this._updateThreads(r);}.bind(this));}else this._updateThreads(r);},_loadMoreThreads:function(){if(!this.state.isSearching&&!this.state.isLoading&&!this._threadlist.hasLoadedThreadlist(this.props.folder))this._loadThreads(this.props.folder,this._getThreadCount(this.props.folder)+j.JEWEL_MORE_COUNT+1);},_loadThreads:function(r,s){if(!this._threadlist)return;this._cancelThreadlistCallback();this.setState({isLoading:true},function(){var t=this._threadlist.getThreadlist(j.RECENT_THREAD_OFFSET,s,r,function(u){return this.setState({isLoading:false});}.bind(this),true,i.JEWEL);this._threadlistSub={subscriberID:t,folder:r};}.bind(this));},_updateThreads:function(r,s){if(!this._threadlist||!this._threads)return;this._cancelThreadsCallback();var t=s||this._threadlist.getAvailableThreadlistNow(r);this._threadsSub=this._threads.getMultiThreadMeta(t,function(u){this.setState({threads:this.state.threads.set(r,t.map(function(v){return u[v];}))});}.bind(this));},_hasInitialThreads:function(r){return !!(this._threadlist&&(this._threadlist.getThreadCount(r)>=j.JEWEL_THREAD_COUNT+1||this._threadlist.hasLoadedThreadlist(r)));},_getThreadCount:function(r){var s=this.state.threads.get(r);return s?s.length:0;},_cancelThreadsCallback:function(){this._threads&&this._threadsSub&&this._threads.unsubscribe(this._threadsSub);},_cancelThreadlistCallback:function(){this._threadlist&&this._threadlistSub&&this._threadlist.unsubscribe(this._threadlistSub.subscriberID,this._threadlistSub.folder);},_handleSearchResults:function(r,s){this.setState({isLoading:s,searchThreads:[]},function(){return this._updateThreads(p,r);}.bind(this));},_handleQuery:function(r){this.setState({isSearching:!!r});}});e.exports=q;},null);
__d("MercuryThreadlistRowContainer.react",["immutable","ImmutableObject","MercuryParticipants","React","StoreAndPropBasedStateMixin","shallowEqual"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=j,n=m.PropTypes,o=j.createClass({displayName:"MercuryThreadlistRowContainer",mixins:[k(i)],propTypes:{ChildClass:n.func.isRequired,thread:n.instanceOf(h).isRequired,viewer:n.string.isRequired},statics:{calculateState:function(p){return {participants:g.Map(g.Seq(p.thread.participants).map(function(q){return [q,i.getOrFetch(q)];}))};}},shouldComponentUpdate:function(p,q){return (!l(p,this.props)||!g.is(q.participants,this.state.participants));},render:function(){var p=this.props,q=p.ChildClass,r=(function(s,t){var u={},v=Object.prototype.hasOwnProperty;if(s==null)throw new TypeError();for(var w in s)if(v.call(s,w)&&!v.call(t,w))u[w]=s[w];return u;})(p,{ChildClass:1});return (j.createElement(q,j.__spread({},r,{participants:this.state.participants})));}});e.exports=o;},null);
__d("MercuryPresenceIndicator.react",["Arbiter","AvailableListConstants","MercuryIDs","PresenceStatus","ReactComponentWithPureRenderMixin","React","SubscriptionsHandler","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=l,q=p.PropTypes,r=l.createClass({displayName:"MercuryPresenceIndicator",mixins:[k],propTypes:{threadID:q.string.isRequired},componentDidMount:function(){this._subscriptions=new m();this._subscriptions.addSubscriptions(g.subscribe(h.ON_AVAILABILITY_CHANGED,function(){return this.forceUpdate();}.bind(this)));},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release();},render:function(){var s=this._getPresence();return (l.createElement("span",{className:this._getClasses(s)},l.createElement("span",{className:"accessible_elem"},this._getLabel(s))));},_getPresence:function(){if(!i.isCanonical(this.props.threadID)){return null;}else{var s=i.getUserIDFromThreadID(this.props.threadID);return j.get(s);}},_getClasses:function(s){return (("presenceIndicator")+(i.isMultichat(this.props.threadID)?' '+"groupThread":'')+(s==h.ACTIVE?' '+"presenceActive":'')+(s==h.MOBILE?' '+"presenceMobile":''));},_getLabel:function(s){switch(s){case h.ACTIVE:return (o._("Active"));case h.MOBILE:return (o._("Mobile"));default:return null;}}});e.exports=r;},null);
__d("MercurySeenIndicator.react",["MercuryDelayedRoger","MercuryIDs","React","SubscriptionsHandler","cx"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=i,m=l.PropTypes,n=i.createClass({displayName:"MercurySeenIndicator",propTypes:{thread:m.object.isRequired,viewer:m.string.isRequired},componentDidMount:function(){this._subscriptions=new j();this._subscriptions.addSubscriptions(g.subscribe('state-changed',function(o,p){p[this.props.thread.thread_id]&&this.forceUpdate();}.bind(this)));},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release();},render:function(){var o=this._separateParticipants(),p=o.viewer,q=o.others,r=this._viewerLastToReply(p),s=this._seenByAll(q);return (i.createElement("span",{className:(("MercuryRepliedIndicator")+(r?' '+"repliedLast":'')+(r&&s?' '+"seenByAll":''))}));},_separateParticipants:function(){var o=h.getParticipantIDFromUserID(this.props.viewer),p=this.props.thread.participants.filter(function(q){return q!==o;});return {viewer:o,others:p};},_viewerLastToReply:function(o){var p=this.props.thread.participants;return p.length>0&&p[0]===o;},_seenByAll:function(o){var p=this.props.thread.thread_id;return g.getSeenBy(p).length===o.length;}});e.exports=n;},null);
__d("MercuryThreadPermalink.react",["HighlanderFinchGating","Link.react","PagesMessengerThreadDialogLink.react","ReactComponentWithPureRenderMixin","React","WebMessengerThreadPermalinks"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=k,n=m.PropTypes,o=k.createClass({displayName:"MercuryThreadPermalink",mixins:[j],propTypes:{threadID:n.string.isRequired,viewer:n.string.isRequired,folder:n.string,onClick:n.func},getInitialState:function(){return {permalinkURI:'#'};},componentDidMount:function(){this._getPermalinkURI(this.props);},componentWillReceiveProps:function(p){if(p.threadID!==this.props.threadID||p.folder!==this.props.folder)this._getPermalinkURI(p);},render:function(){if(g.HIGHLANDER_FINCH_GATING)return (k.createElement(i,{className:this.props.className,threadID:this.props.threadID,viewer:this.props.viewer,folder:this.props.folder},this.props.children));return (k.createElement(h,{className:this.props.className,href:this.state.permalinkURI,onClick:this.props.onClick,role:"button"},this.props.children));},_getPermalinkURI:function(p){if(g.HIGHLANDER_FINCH_GATING)return;this.setState(this.getInitialState());l.getThreadURI(p.threadID,function(q){return this.isMounted()&&this.setState({permalinkURI:q});}.bind(this),p.folder);}});e.exports=o;},null);
__d("MercuryThreadReadToggle.react",["MercuryThreadActions","ReactComponentWithPureRenderMixin","React","ReadToggle.react","fbt","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=i,n=m.PropTypes,o=i.createClass({displayName:"MercuryThreadReadToggle",mixins:[h],propTypes:{threadID:n.string.isRequired,viewer:n.string.isRequired,unreadCount:n.number.isRequired},render:function(){l(this.props.unreadCount>=0);return (i.createElement(j,{isRead:this.props.unreadCount===0,onClick:this._handleClick,readLabel:k._("Mark as Unread"),unreadLabel:k._("Mark as Read")}));},_handleClick:function(p){p.preventDefault();p.stopPropagation();var q=g.getForFBID(this.props.viewer);this.props.unreadCount>0?q.markRead(this.props.threadID):q.markUnread(this.props.threadID);}});e.exports=o;},null);
__d("MercuryThreadSnippet.react",["immutable","MercuryAttachmentSnippet.react","MercuryIDs","React","TextWithEmoticons.react","fbt","shallowEqual"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=j,o=n.PropTypes,p=j.createClass({displayName:"MercuryThreadSnippet",propTypes:{participants:o.instanceOf(g.Map).isRequired,shouldRenderYou:o.bool,thread:o.object.isRequired,viewer:o.string.isRequired},shouldComponentUpdate:function(s,t){return (!m(s,this.props)||!g.is(s.participants,this.props.participants));},render:function(){return (j.createElement("span",{className:this.props.className},this._renderAttachmentIndicator(),this._renderSnippet()));},_renderAttachmentIndicator:function(){if(!this.props.thread.snippet||!q(this.props.thread))return null;return j.createElement("span",{className:"MercuryAttachmentIndicator"});},_renderSnippet:function(){var s=this.props.thread,t=i.getParticipantIDFromUserID(this.props.viewer),u=this._renderInnerSnippet(),v=s.participants.length;if(s.is_subscribed)v--;if(r(s)||!s.snippet_sender)return u;if(s.snippet_sender===t){if(!this.props.shouldRenderYou)return u;return (l._("You: {conversation_snippet}",[l.param("conversation_snippet",u)]));}if(v<=1)return u;var w=this.props.participants.get(s.snippet_sender);if(!w||!w.short_name)return u;return (l._("{name}: {conversation_snippet}",[l.param("name",w.short_name),l.param("conversation_snippet",u)]));},_renderInnerSnippet:function(){var s=this.props.thread,t=s.snippet;if(t&&t.startsWith('?OTR'))return (l._("[encrypted message]"));if(t)return (j.createElement(k,{renderEmoticons:true,renderEmoji:true,text:t.replace(/\r\n|[\r\n]/g,' ')}));if(q(s))return (j.createElement(h,{thread:s,viewer:this.props.viewer}));return null;}});function q(s){return (s.snippet_has_attachment&&s.snippet_attachments&&s.snippet_attachments.length>0);}function r(s){return !s.snippet&&q(s);}e.exports=p;},null);
__d("MercuryThreadTimestamp.react",["ReactComponentWithPureRenderMixin","React","formatDate","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=h,l=k.PropTypes,m=h.createClass({displayName:"MercuryThreadTimestamp",mixins:[g],propTypes:{time:l.number,title:l.string,text:l.string},render:function(){var n=this.props.time;if(!n)return h.createElement("abbr",null);return (h.createElement("abbr",{className:j(this.props.className,'timestamp'),title:this.props.title||(new Date(n)).toLocaleDateString(),"data-utime":n/1000},this.props.text||i(new Date(n),'g:ia')));}});e.exports=m;},null);
__d("MessagesJewelInlineThumbnail.react",["MercuryAttachmentType","React","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=h,k=j.PropTypes,l=h.createClass({displayName:"MessagesJewelInlineThumbnail",propTypes:{thread:k.object.isRequired},render:function(){var m=this._getPhotoAttachments();if(m.length===0)return h.createElement("span",null);var n=m[0].thumbnail_url;if(!n)return h.createElement("span",null);var o=h.createElement("span",{className:"_56hv"},h.createElement("i",{style:{backgroundImage:("url("+n+")")}}));if(m.length>1)o=h.createElement("span",null,h.createElement("span",{className:"_56hy"}),o);return o;},_getPhotoAttachments:function(){var m=this.props.thread;if(!m.snippet_attachments)return [];return m.snippet_attachments.filter(function(n){return n.attach_type===g.PHOTO;});}});e.exports=l;},null);
__d("MessagesJewelThreadListRow.react",["ImageBlock.react","immutable","ImmutableObject","MercuryPresenceIndicator.react","MercurySeenIndicator.react","MercuryThreadImage.react","MercuryThreadPermalink.react","MercuryThreadReadToggle.react","MercuryThreadSnippet.react","MercuryThreadTimestamp.react","MercuryThreadTitle.react","MessagesJewelInlineThumbnail.react","ReactComponentWithPureRenderMixin","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();'use strict';var v=t,w=v.PropTypes,x=t.createClass({displayName:"MessagesJewelThreadListRow",mixins:[s],propTypes:{onClick:w.func,participants:w.instanceOf(h.Map).isRequired,showPresence:w.bool,thread:w.instanceOf(i).isRequired,viewer:w.string.isRequired,wasSeenByAll:w.bool},render:function(){return (t.createElement("li",{className:((this.props.thread.unread_count>0?"jewelItemNew":''))},t.createElement(m,{className:"messagesContent",threadID:this.props.thread.thread_id,viewer:this.props.viewer,folder:this.props.thread.folder,onClick:this.props.onClick},t.createElement(g,{spacing:"medium"},t.createElement("div",{className:"MercuryThreadImage"},t.createElement(l,{thread:this.props.thread,viewer:this.props.viewer})),t.createElement("div",{className:"content"},t.createElement("div",{className:"author"},t.createElement("strong",null,t.createElement(q,{thread:this.props.thread,viewer:this.props.viewer,showUnreadCount:true})),this._renderPresenceIndicator()),t.createElement("div",{className:"snippet preview"},t.createElement(k,{thread:this.props.thread,viewer:this.props.viewer}),t.createElement(o,{participants:this.props.participants,thread:this.props.thread,viewer:this.props.viewer})),t.createElement("div",{className:"time"},t.createElement(p,{time:this.props.thread.timestamp,title:this.props.thread.timestamp_absolute,text:this.props.thread.timestamp_relative}))),t.createElement("div",null,t.createElement(r,{thread:this.props.thread}),t.createElement("div",{className:"x_div"},t.createElement(n,{threadID:this.props.thread.thread_id,viewer:this.props.viewer,unreadCount:this.props.thread.unread_count})))))));},_renderPresenceIndicator:function(){if(!this.props.showPresence)return null;return (t.createElement(j,{threadID:this.props.thread.thread_id}));}});e.exports=x;},null);
__d("MessagesJewelThreadlistRowContainer.react",["ImmutableObject","MercuryDelayedRoger","MercuryThreadlistRowContainer.react","MessagesJewelThreadListRow.react","ReactComponentWithPureRenderMixin","React","StoreAndPropBasedStateMixin","requireWeak"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=l,p=o.PropTypes,q;n(['ChatOpenTab'],function(s){q=s;});var r=l.createClass({displayName:"MessagesJewelThreadlistRowContainer",mixins:[k,m(h)],propTypes:{thread:p.instanceOf(g).isRequired,viewer:p.string.isRequired},statics:{calculateState:function(s){return {wasSeenByAll:h.wasSeenByAll(s.thread.thread_id)};}},componentDidMount:function(){if(!q)n(['ChatOpenTab'],function(s){this.forceUpdate();}.bind(this));},render:function(){return (l.createElement(i,{ChildClass:j,onClick:this._handleClick,showPresence:q&&q.canOpenTab(),thread:this.props.thread,viewer:this.props.viewer,wasSeenByAll:this.state.wasSeenByAll}));},_handleClick:function(s){if(s.button===1||s.altKey||s.ctrlKey||s.metaKey||s.shiftKey)return;if(q&&q.canOpenTab()){s.preventDefault();q.openThread(this.props.thread.thread_id,'jewel');}}});e.exports=r;},null);
__d("MessagesJewelThreadList.react",["ImmutableObject","ScrollableArea.react","Link.react","MessagesJewelThreadlistRowContainer.react","React","XUISpinner.react","cx","fbt","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=k,q=p.PropTypes,r=k.createClass({displayName:"MessagesJewelThreadList",propTypes:{isLoaded:q.bool,isLoading:q.bool,onLoadMoreRequest:q.func,p2pNUX:q.element,threads:q.arrayOf(q.instanceOf(g)).isRequired,viewer:q.string.isRequired},render:function(){return (k.createElement(h,{onScroll:o(this._handleScroll,50),ref:"scrollable"},k.createElement("ul",{className:"jewelContent"},this.props.p2pNUX?k.createElement("li",null,this.props.p2pNUX):null,this.props.threads.map(function(s){return k.createElement(j,{key:s.thread_id,thread:s,viewer:this.props.viewer});}.bind(this))),this._renderLoadMoreLink()));},_renderLoadMoreLink:function(){if(this.props.isLoaded)return null;if(this.props.isLoading)return (k.createElement("div",{className:"_v8y"},k.createElement(l,null)));return (k.createElement("div",{className:"_v8y"},k.createElement(i,{href:"#",onClick:this._handleLoadMoreClick},n._("Show Older"))));},_handleScroll:function(){if(this.props.isLoaded)return;var s=this.refs.scrollable.getArea();if(s.getScrollTop()+s.getClientHeight()>=s.getScrollHeight()-1)this.props.onLoadMoreRequest&&this.props.onLoadMoreRequest();},_handleLoadMoreClick:function(s){s.preventDefault();this.props.onLoadMoreRequest&&this.props.onLoadMoreRequest();}});e.exports=r;},null);
__d("MercuryJewelThreadlistControl",["ArbiterMixin","CurrentUser","CSS","DOM","Event","JSLogger","MercuryThreadlistConstants","MercuryThreadlistContainer.react","MessagesJewelThreadList.react","MessagingTag","React","copyProperties","csx","cx","fbt","MercuryThreadInformer","MercuryUnreadState"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();var v=b('MercuryThreadInformer').get(),w=b('MercuryUnreadState').get(),x=l.create('mercury_jewel');function y(ca){this._threadlistContainer=j.find(ca,"._3v_l");this._currentFolder=p.INBOX;this._jewelFolderLinks={};this._jewelFolderLinks[p.INBOX]=j.find(ca,"._1sde");this._jewelFolderLinks[p.OTHER]=j.find(ca,"._1sdf");this._jewelFolderCounts={};this._jewelFolderCounts[p.INBOX]=j.find(ca,"._1sdg");this._jewelFolderCounts[p.OTHER]=j.find(ca,"._1sdh");aa.bind(this)();this._markAllReadLink=j.find(ca,"._1c1m");k.listen(this._jewelFolderLinks[p.INBOX],'click',z.bind(this,p.INBOX));k.listen(this._jewelFolderLinks[p.OTHER],'click',z.bind(this,p.OTHER));k.listen(this._markAllReadLink,'click',function(da){w.markFolderAsRead(this._currentFolder);da.kill();}.bind(this));v.subscribe('unread-updated',aa.bind(this));this.render();x.bump('opened_threadlist_'+this._currentFolder);}r(y.prototype,g);r(y.prototype,{render:function(){q.render(q.createElement(n,{ChildClass:o,viewer:h.getID(),folder:this._currentFolder}),this._threadlistContainer);}});function z(ca){if(this._currentFolder!=ca){x.bump('opened_threadlist_'+ca);i.addClass(this._jewelFolderLinks[ca],"_1sdd");i.removeClass(this._jewelFolderLinks[this._currentFolder],"_1sdd");this._currentFolder=ca;this.render();}}function aa(){ba.bind(this)(p.INBOX);ba.bind(this)(p.OTHER);}function ba(ca){var da;if(w.exceedsMaxCount(ca)){da=m.MAX_UNREAD_COUNT;}else da=w.getUnreadCount(ca);var ea=this._jewelFolderCounts[ca];if(da>0){if(da==m.MAX_UNREAD_COUNT)da+='+';j.setContent(ea,u._("({unread_count})",[u.param("unread_count",da)]));}else j.setContent(ea,'');}e.exports=y;},null);
__d("MercuryJewel",["MercuryJewelCountControl","MercuryServerRequests","MercuryChannelHandler"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();b('MercuryChannelHandler').get().turnOn();var i=false;function j(k,l,m,n){"use strict";g.constructStores();h.get().handleUpdate(l);var o=k.getRoot(),p=k.getFlyout();this.$MercuryJewel0=new g(k);if(n&&m||(k.getRoot()&&k.isOpen())){this.$MercuryJewel1(p);}else{k.subscribeOnce('opened',this.$MercuryJewel1.bind(this,p));if(n)var q=k.subscribe('updated',function(r,s){if(s.count){this.$MercuryJewel1(p);k.unsubscribe(q);}}.bind(this));}}j.prototype.$MercuryJewel1=function(k){"use strict";if(!i){d(['MercuryJewelThreadlistControl'],function(l){this.$MercuryJewel3=new l(k);}.bind(this));i=true;}};e.exports=j;},null);
__d("RenderManager",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){"use strict";this._isDirty=false;this._obj=h;}g.prototype.dirty=function(){"use strict";if(!this._isDirty){this._isDirty=true;setTimeout(this._doPaint.bind(this),0);}};g.prototype._doPaint=function(){"use strict";this._isDirty=false;this._obj.paint();};e.exports=g;},null);
__d("CounterDisplay",["Arbiter","CSS","DOM","RenderManager","Run","$","copyProperties","removeFromArray"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();function o(p,q,r,s,t,u){m(this,{_name:p,_valueNode:l(q),_wrapperNode:l(r)||null,_statusClass:t,_rm:new j(this),_arbiterSubscription:null,_count:0});var v=this._valueNode.firstChild;if(v){var w=parseInt(v.nodeValue,10);if(!isNaN(w))this._count=w;}this._statusNode=s?l(s):null;this._subscribeAll();o.instances.push(this);if(!u)k.onLeave(this._destroy.bind(this),true);}m(o,{EVENT_TYPE_ADJUST:'CounterDisplay/adjust',EVENT_TYPE_UPDATE:'CounterDisplay/update',instances:[],adjustCount:function(p,q){g.inform(o.EVENT_TYPE_ADJUST+'/'+p,q);},setCount:function(p,q){g.inform(o.EVENT_TYPE_UPDATE+'/'+p,q);}});m(o.prototype,{_destroy:function(){delete this._valueNode;delete this._wrapperNode;if(this._arbiterSubscription){this._arbiterSubscription.unsubscribe();delete this._arbiterSubscription;}n(o.instances,this);},adjustCount:function(p){this._count=Math.max(0,this._count+p);this._rm.dirty();return this;},setCount:function(p){this._count=Math.max(0,p);this._rm.dirty();return this;},paint:function(){i.setContent(this._valueNode,this._count);this._toggleNodes();},_toggleNodes:function(){if(this._wrapperNode)h.conditionClass(this._wrapperNode,'hidden_elem',this._count<=0);if(this._statusClass&&this._statusNode)h.conditionClass(this._statusNode,this._statusClass,this._count>0);},_subscribeAll:function(){var p=[o.EVENT_TYPE_ADJUST+'/'+this._name,o.EVENT_TYPE_UPDATE+'/'+this._name];this._arbiterSubscription=g.subscribe(p,this._onInform.bind(this),g.SUBSCRIBE_NEW);},_onInform:function(p,q){q=parseInt(q);if(isNaN(q))return;if(p.indexOf(o.EVENT_TYPE_ADJUST)!=-1){this.adjustCount(q);}else if(p.indexOf(o.EVENT_TYPE_UPDATE)!=-1){this.setCount(q);}else return;return;}});e.exports=o;},null);
__d("MessagingEvents",["Arbiter","ChannelConstants","arrayContains","copyProperties","isEmpty"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={},m=new g();function n(o){if(!k(l))return;for(var p in o)m.inform('count/'+p,o[p]);}m.subscribe('mark-as-read',function(o,p){(p.tids||p.chat_ids||[]).forEach(function(q){q=''+q;if(!(q in l)){l[q]=true;var r=function(){m.unsubscribe(s);clearTimeout(t);delete l[q];},s=m.subscribe('read',function(u,v){if(i((v.tids||[]),q)||i((v.chat_ids||[]),q))r();}),t=setTimeout(r,60000);}});});g.subscribe(h.getArbiterType('messaging'),function(o,p){var q=j({},p.obj),event=q.event||'';delete q.type;delete q.event;m.inform(event,q);if('unread_counts' in q){var r=q.unread_counts;n({unread:r.inbox,other_unseen:r.other});}});g.subscribe(h.getArbiterType('inbox'),function(o,p){var q=j(p.obj);delete q.type;n(q);});a.MessagingEvents=e.exports=m;},3);
__d("TitanLeftNav",["CounterDisplay","MessagingEvents"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={initialize:function(){h.subscribe('count/other_unseen',function(j,k){g.setCount('other_unseen',k);});}};e.exports=i;},null);
__d("AccessibilityShortcut",["AccessibilityLogger","Event","Focus","ge","onEnclosingPageletDestroy","warning"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m={init:function(n,o){var p=h.listen(n,'click',function(q){q.preventDefault();var r=j(o);if(r){i.set(r);g.logSRKey();}else l(r,'Failed to set focus on element with ID: %s',o);});k(n,function(){return p.remove();});}};e.exports=m;},null);
__d("AccessibleMenu",["Event","CSS","DOM","Keys","TabbableElements","Toggler"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m,n,o;function p(){var x=i.scry(m,'a[rel="toggle"]')[0];x&&x.focus();l.getInstance(m).hide();}function q(x){if(!x)return false;h.removeClass(x,'selected');x.setAttribute('aria-selected','false');}function r(x){if(!x)return false;h.addClass(x,'selected');x.setAttribute('aria-selected','true');var y=k.find(x);if(y[0])y[0].focus();}function s(x){var y=i.scry(m,'.selected')[0],z=n.indexOf(y)+x,aa=n[z];if(!aa)return false;q(y);r(aa);}function t(x){if(!l.isShown()||l.getActive()!==m||h.hasClass(m,w.MENU_HIDDEN))return true;var y=g.getKeyCode(x);switch(y){case j.TAB:s(x.shiftKey?-1:1);g.prevent(x);break;case j.ESC:p();g.prevent(x);break;case j.UP:case j.DOWN:s(y===j.UP?-1:1);g.prevent(x);break;}}function u(x,y){m=y.getActive();n=i.scry(m,'[role="menuitem"]');if(!o)o=g.listen(document.documentElement,'keydown',t);}function v(){if(l.getActive()==m)q(i.scry(m,'.selected')[0]);}var w={init:function(x){l.listen('show',x,u);l.listen('hide',x,v);},MENU_HIDDEN:'menu_hidden'};e.exports=w;},null);
__d("NotificationJewelReminder",["Arbiter","ContextualDialog","ContextualDialogXUITheme","DOM","Event","ImageBlock.react","LayerFadeOnHide","LayerFadeOnShow","NotificationConstants","NotificationStore","NotificationUpdates","React","SubscriptionsHandler","Toggler","$","cx","fbt","intlList"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){b.__markCompiled&&b.__markCompiled();var y=2;z.init=function(aa){"use strict";new z(aa);};function z(aa){"use strict";this.$NotificationJewelReminder0=aa;if(p.getCount()){this.$NotificationJewelReminder1();return;}q.subscribeOnce('update-notifications',function(ba,ca){if(ca.payloadsource===o.PayloadSourceType.INITIAL_LOAD)this.$NotificationJewelReminder1();}.bind(this));}z.prototype.$NotificationJewelReminder1=function(){"use strict";p.getNotifications(p.getCount(),this.$NotificationJewelReminder3.bind(this));};z.prototype.$NotificationJewelReminder3=function(aa){"use strict";var ba=t.getInstance(u('fbNotificationsJewel'));if(ba&&ba.isShown())return;var ca=[],da,ea=Object.keys(aa);for(var fa=0;fa<ea.length;fa++){if(!aa[ea[fa]].showBeep)continue;var ga=aa[ea[fa]].actors;if(ga.length===0)continue;for(var ha=0;ha<ga.length;ha++){da=da||ga[ha].profile_picture.uri;if(ca.length<y&&ga[ha].name&&ca.indexOf(ga[ha].name)===-1)ca.push(ga[ha].name);}if(ca.length===y)break;}if(ca.length===0||!da)return;var ia=r.createElement("div",{className:"_5bov"},r.createElement(l,null,r.createElement("img",{className:"_5bow",src:da}),r.createElement("div",null,this.$NotificationJewelReminder4(ea.length,ca)))),ja=j.create('div');r.render(ia,ja);var ka=new h({alignment:'right',contextSelector:'#fbNotificationsJewel',offsetY:-10,position:'below',theme:i,width:210},ja);ka.enableBehaviors([n,m]);this.$NotificationJewelReminder5(ka);};z.prototype.$NotificationJewelReminder4=function(aa,ba){"use strict";ba=ba.map(function(ca){return r.createElement("b",null,ca);});return (w._({"*":{"notifications":"{number} notifications from {notification senders}","notification":"{number} notification from {notification senders}"}},[w.param("number",aa,[0]),w['enum'](aa>1?'notifications':'notification',{notifications:"notifications",notification:"notification"}),w.param("notification senders",x(ba))]));};z.prototype.$NotificationJewelReminder5=function(aa){"use strict";aa.show();this.$NotificationJewelReminder6=aa;var ba=aa.getRoot();this.$NotificationJewelReminder7=setTimeout(this.$NotificationJewelReminder8.bind(this),this.$NotificationJewelReminder0.show_time);this.$NotificationJewelReminder9=new s();this.$NotificationJewelReminder9.addSubscriptions(g.subscribe('layer_shown',function(ca,da){if(da&&da.type==='Jewel')this.$NotificationJewelReminder8();}.bind(this)),k.listen(ba,'mouseenter',function(){clearTimeout(this.$NotificationJewelReminder7);}.bind(this)),k.listen(ba,'mouseleave',this.$NotificationJewelReminder8.bind(this)),k.listen(ba,'click',function(){this.$NotificationJewelReminder8();t.show(u('fbNotificationsJewel'));}.bind(this)));};z.prototype.$NotificationJewelReminder8=function(){"use strict";clearTimeout(this.$NotificationJewelReminder7);this.$NotificationJewelReminder6.hide();this.$NotificationJewelReminder9.release();};e.exports=z;},null);
__d("PagesVoiceBar",["$","Arbiter","AsyncRequest","ChannelConstants","DOM","URI","ViewportBounds","csx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o='PagesVoiceBar/initialized',p='PagesVoiceBar/switchVoice',q='page_transition',r='pages_voice_bar_sync',s=null,t=null,u=null,v=false,w=m.addTop(0);function x(da,ea){new i('/ajax/pages/switch_voice.php').setData(ea).setHandler(function(fa){ba();}).send();}function y(){s=null;}function z(da,ea){if(ea.obj.profile_id&&ea.obj.profile_id===s)ba();}function aa(da){h.subscribe(o,da);}function ba(){l.getNextURI().go();}var ca={initVoiceBar:function(){if(v)return;t=g('pagesVoiceBarContent');h.subscribe(p,x);h.subscribe(q,y);h.subscribe(j.getArbiterType(r),z);v=true;u=k.scry(t,"^div._4f7n")[0];h.inform(o,null,h.BEHAVIOR_STATE);},update:function(da,ea){aa(function(){s=ea;k.setContent(t,da);var fa=t.offsetHeight;if(!u&&w.getSize()!==fa){w.remove();w=m.addTop(m.getTop()+fa);}});}};e.exports=ca;},null);
__d("XPrivacyCheckupSpawnDialogController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/privacy\/checkup\/dialog\/show\/",{source:{type:"Enum",enumType:1}});},null);
__d("PrivacyLiteFlyout",["Animation","Arbiter","ArbiterMixin","AsyncDialog","AsyncRequest","Banzai","CSS","DOM","Ease","Event","Parent","PrivacyConst","Style","SubscriptionsHandler","Toggler","XPrivacyCheckupSpawnDialogController","XPrivacyRemindersDismissController","copyProperties","csx","cx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){b.__markCompiled&&b.__markCompiled();var ba='PrivacyLiteFlyout/expandingSection',ca={},da={};function ea(na,oa,pa){var qa=oa?0:na.offsetHeight;s.set(na,'height',qa+'px');s.set(na,'overflow','hidden');m.show(na);var ra=oa?na.scrollHeight:0,sa=n.getID(na);ca[sa]&&ca[sa].stop();ca[sa]=new g(na).to('height',ra).ondone(function(){ca[sa]=null;s.set(na,'height','');s.set(na,'overflow','');ra||m.hide(na);pa();}).duration(Math.abs(ra-qa)*1.5).ease(o.sineOut).go();}function fa(na){return new k().setURI(na).send();}function ga(){return fa('/ajax/privacy/privacy_lite/increment_masher_tip_count');}function ha(){return fa('/ajax/privacy/privacy_lite/dismiss_masher_tip');}function ia(na){var event='other_section';switch(na){case 'who_can_see':case 'who_can_contact':case 'how_to_stop':event=na;break;}return event;}var ja=null,ka=false,la=false,ma=x({loadBody:function(){this._loadBody(false);},loadBodyFromMegaphone:function(){this._loadBody(true);},_loadBody:function(na){if(!ka&&aa('fbPrivacyLiteFlyoutLoading')){ka=true;new k('/ajax/privacy/privacy_lite/loader').setData({from_megaphone:na}).send();}},_addListener:function(na,event,oa){return p.listen(na,'click',function(){l.post('privacy_lite',{event:event,exit_point:oa});});},addLoggingElem:function(na,event,oa){var pa=this._loggingElements.length,qa={elem:na,event:event,exit:oa};this._loggingElements[pa]=qa;},registerSettingsAndBasicsLinkLogging:function(na,event,oa,pa){var qa=n.scry(na,"._5cw0")[0],ra=n.scry(na,"._3djx")[0];if(qa){this._settingsLinkListener&&this._settingsLinkListener.release();this._settingsLinkListener=this._addListener(qa,event,oa);}if(ra){this._privacyBasicsLinkListener&&this._privacyBasicsLinkListener.release();this._privacyBasicsLinkListener=this._addListener(ra,event,pa);}},_subscribeListeners:function(){this._loggingElements&&this._loggingElements.forEach(function(na){this._subscriptions&&this._subscriptions.addSubscriptions(this._addListener(na.elem,na.event,na.exit));},this);},renderBody:function(na,oa){var pa=aa('fbPrivacyLiteFlyoutLoading');if(pa){n.replace(pa,na);ma.registerCallback(function(){ma.inform('load',null,h.BEHAVIOR_STATE);},oa);}},hideCleanup:function(na){h.inform(ba);var oa=n.scry(na,"._2va0").forEach(function(pa){m.removeClass(pa,"_2va0");});},registerFlyoutToggler:function(na,oa,pa){this._loggingElements=[];ja=oa;var qa=u.createInstance(na);qa.setSticky(false);u.listen(['show','hide'],oa,function(ra){ma.inform(ra);la=ra==='show';if(!la){ma.hideCleanup(na);qa.hide();this._subscriptions&&this._subscriptions.release();this._subscriptions=null;h.inform('layer_hidden',{type:'PrivacyShortcutsFlyout'});}else{h.inform('layer_shown',{type:'PrivacyShortcutsFlyout'});if(pa){pa.start(this);pa=null;}h.subscribeOnce(ba,function(){this._subscriptions&&this._subscriptions.release();this._subscriptions=new t();this._subscribeListeners();}.bind(this));l.post('privacy_lite',{event:'show_flyout',exit_point:null});}}.bind(this));},isFlyoutVisible:function(){return ja&&u.getActive()===ja;},exists:function(){return !!n.scry(document.body,"._59fc")[0];},setFlyoutVisible:function(na){na?u.show(ja):u.hide(ja);},showSection:function(na){var oa=da[na];if(!oa)return;if(!oa.sublist_container){ma.inform('expanded',na,h.BEHAVIOR_STATE);return;}var pa=oa.chevron,qa=oa.sublist_container;h.inform(ba,pa);if(ma.inform('expand',na)!==false){m.removeClass(pa,"_9or");m.addClass(pa,"_9os");ea(qa,true,function(){ma.inform('expanded',na);});}},hideSection:function(na,oa,pa){var qa=da[na],ra=qa.chevron,sa=qa.sublist_container;if(pa===ra)return;if(ma.inform('collapse',na)!==false){m.addClass(ra,"_9or");m.removeClass(ra,"_9os");ea(sa,false,function(){ma.inform('collapsed',na);});}},toggleSection:function(na){var oa=da[na].chevron;u.getInstance(oa).hide();if(m.hasClass(oa,"_9or")){ma.showSection(na);l.post('privacy_lite',{event:ia(na)+'_expand',exit_point:null});new k('/ajax/privacy/privacy_lite/log_section_expand').setData({section:na}).send();}else{ma.hideSection(na);l.post('privacy_lite',{event:ia(na)+'_collapse',exit_point:null});}},registerSection:function(na,oa){da[na]=oa;if(oa.sublist_container){h.subscribe(ba,ma.hideSection.bind(null,na));p.listen(oa.section_block,'click',ma.toggleSection.bind(null,na));}ma.inform(na);},registerInlineHelpOnAudienceChangeNewSelector:function(na,oa,pa,qa){na=na.getInstance();na.subscribe('changed',function(ra){this._registerInlineHelpOnAudienceChange(oa,pa,qa,na.getSelectedBaseValue());}.bind(this));},registerSelectorLogging:function(na,oa,pa,qa){na=na.getInstance();na.subscribe('open',function(){l.post('privacy_lite',{event:oa,exit_point:null});});na.subscribe('close',function(){l.post('privacy_lite',{event:pa,exit_point:null});});na.subscribe('changed',function(){l.post('privacy_lite',{event:qa,exit_point:null});});},_registerInlineHelpOnAudienceChange:function(na,oa,pa,qa){var ra=n.find(na,"._9o_"),sa=n.find(na,"._2v9_");if(pa){var ta=n.find(na,"._5n9w"),ua=(qa==r.BaseValue.EVERYONE);m.conditionShow(ta,ua);m.conditionShow(ra,!ua);if(ta&&ua){var va=(w.getURIBuilder()).setString('type','delta_everyone').setBool('log_plite',true).getURI();new k(va).send();}}else m.show(ra);m.hide(sa);if(oa)new k('/ajax/privacy/privacy_lite/kill_intro').send();},registerInlineHelpXOutOnClick:function(na,oa,pa){p.listen(na,'click',function(){m.addClass(oa,"_9p0");});},registerBlockUnhideOnFocus:function(na,oa){p.listen(na,'focus',function(pa){m.show(pa);l.post('privacy_lite',{event:'block_user_input_click',exit_point:null});}.bind(this,oa));},registerMessageFilterSettingOnClick:function(na,oa){var pa=n.find(na,"._fv0");p.listen(na,'click',function(){if(pa.checked){new k('/ajax/mercury/change_filtering_type.php').setData({filtering_type:oa,source:'privacy_lite'}).send();}else{var event='basic_filtering';if(oa==='strict')event='strict_filtering';l.post('privacy_lite',{event:event,exit_point:null});}});},registerMasher:function(na,oa){var pa=false;h.subscribe(ba,function(qa,ra){var sa=true;if(ra)sa=!!n.scry(q.byTag(ra,'li'),"._571t").length;if(pa||!sa)return;pa=!!(ga());});p.listen(oa,'click',function(){n.remove(na);ha();});},registerPrivacyCheckupListener:function(na){p.listen(na,'click',function(){this.setFlyoutVisible(false);j.send(new k((v.getURIBuilder()).setEnum('source','plite').getURI()));l.post('privacy_lite',{event:'exit_flyout',exit_point:'privacy_checkup'});}.bind(this));},displayPrivacyCheckup:function(na){na.show();}},i);e.exports=ma;},null);
__d("PrivacyLiteFlyoutHelp",["Event","Arbiter","AsyncRequest","Banzai","ContextualHelpSearchController","CSS","DOM","Parent","copyProperties","csx","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r,s;function t(u,v,w,x,y){this._width=315;s=m.find(v,'input');var z=m.create('div');this.init(u,s,z,w,x,{focusSearchBox:false});r=n.byClass(v,"_8-a");g.listen(y,'click',function(){this._hideSearch(this);j.post('privacy_lite',{event:'plite_search_collapse',exit_point:null});}.bind(this));h.subscribe('PrivacyLiteFlyout/expandingSection',this._hideSearch.bind(this));var aa=m.scry(r,"._d1r")[0];aa&&g.listen(aa,'click',function(){l.addClass(r,"_aw6");s.focus();j.post('privacy_lite',{event:'plite_search_expand',exit_point:null});if(!this.suggestedResults)new i('/ajax/privacy/privacy_lite/help_suggestions').setHandler(function(ba){var ca=ba.getPayload().searchSuggestions,da=m.find(r,"._4_8m");m.setContent(da,ca);l.addClass(r,"_4_8l");}.bind(this)).send();}.bind(this));}o(t.prototype,new k(),{source:'privacy_shortcuts',_hideSearch:function(){this.clearResults();l.removeClass(r,"_aw6");},show:function(u){if(u===this.topics_area){l.removeClass(r,"_aw7");return;}else if(u===this.loader){l.addClass(r,"_aw7");l.hide(this.results_area);}else l.hide(this.loader);l.show(u);}});e.exports=t;},null);
__d("ViewasChromeBar",["Event","Arbiter","AsyncRequest","CSS","DOM","Focus","ModalMask","PageTransitions","Parent","cx","csx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r='ViewasChromeBar/initialized',s=null,t=false;function u(x){h.subscribe(r,x);}function v(x){j.addClass(x,"_7g7");var y=k.find(x,"._7g0");l.set(k.find(y,'.textInput'));}var w={initChromeBar:function(x){if(t)return;s=x;t=true;h.inform(r,null,h.BEHAVIOR_STATE);},update:function(x,y){u(function(){k.setContent(s,x);if(y)new i('/ajax/privacy/glasgow/viewas_bar_flyout_open').send();});},registerSpecificModeOnClick:function(x){g.listen(x,'click',v.bind(null,o.byClass(x,"_7f-")));},registerFlyoutModalMask:function(){m.show();n.registerHandler(m.hide,10);}};e.exports=w;},null);
__d("XFacebarBootloadController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/typeahead\/search\/facebar\/bootload\/",{placeholder_id:{type:"String"}});},null);
__d("FacebarTypeaheadShortcut",["FacebarTypeaheadShortcutConfig","KeyEventController","Run"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(k){"use strict";this._input=k.core.input;this._view=k.view;this._listener=null;}j.prototype.enable=function(){"use strict";this._registerListener();};j.prototype.disable=function(){"use strict";};j.prototype._registerListener=function(){"use strict";this._listener=h.registerKey('SLASH',this._handleKeydown.bind(this));i.onLeave(function(){setTimeout(this._registerListener.bind(this),0);}.bind(this));};j.prototype._handleKeydown=function(k){"use strict";var l=k.getModifiers().shift;if(l&&!g.gkWebShortcut)return;this._selectInput(l);return false;};j.prototype._selectInput=function(k){"use strict";this._view.setAutoSelect(true);this._input.focus();this._input.selectInput();this._input.inform('shortcut',{shift:k});};e.exports=j;},null);
__d("FacebarPlaceholderShortcut",["FacebarTypeaheadShortcut"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(k){"use strict";this._input=k;}j.prototype.disable=function(){"use strict";this._listener&&this._listener.remove();this._listener=null;};j.prototype._selectInput=function(){"use strict";this._input.focus();};e.exports=j;},null);
__d("FacebarBootloader",["AsyncRequest","CSS","Event","$","Run","BanzaiODS","SubscriptionsHandler","getActiveElement","XFacebarBootloadController","FacebarPlaceholderShortcut","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r='facebar_bootloader',s=r+'_',t={placeholderID:null,subscriptions:null,searchInput:null,isRequested:false,isFocused:false,init:function(u,v,w,x){l.bumpEntityKey(r,s+'bootloader_init');this.reset();this.subscriptions=new m();this.placeholderID=w;this.searchInput=u;this.shortcutHandler=new p(u);this.loadingIndicator=v;this.shortcutHandler.enable();this.subscriptions.addSubscriptions(i.listen(u,'focus',(function(){this.requestSearch();q(this.showLoadingIndicator.bind(this),x);}.bind(this)).bind(this)),i.listen(j(w),'mouseover',this.requestSearch.bind(this)));k.onUnload(this.reset.bind(this));if(u.value||n()==u){l.bumpEntityKey(r,s+'request_on_value');this.requestSearch();this.showLoadingIndicator();}},showLoadingIndicator:function(){if(this.loadingIndicator)h.show(this.loadingIndicator);},reset:function(){this.subscriptions&&this.subscriptions.release();this.shortcutHandler&&this.shortcutHandler.disable();this.searchInput=this.subscriptions=this.shortcutHandler=null;this.loadingIndicator=null;this.isRequested=this.isFocused=false;},requestSearch:function(){this.isFocused=n()==this.searchInput;if(this.isRequested)return;l.bumpEntityKey(r,s+'request_func_called');this.isRequested=true;var u=(o.getURIBuilder()).setString('placeholder_id',this.placeholderID).getURI(),v=new g();v.setURI(u).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setHandler(function(w){l.bumpEntityKey(r,s+'request_done');}).setErrorHandler(function(w){l.bumpEntityKey(r,s+'request_failed');if(w&&w.errorSummary){l.bumpEntityKey(r,s+'request_failed_'+w.errorSummary);}else l.bumpEntityKey(r,s+'request_failed_no_error_summary');this.isRequested=false;}).send();},setFocus:function(u,v,w){if(!this.searchInput)return;l.bumpEntityKey(r,s+'response_arrived');if(this.searchInput.value||this.isFocused){u.getCore().isFocused=true;u.getCore().input.setValue(w.fromString(this.searchInput.value),true);v.focus();v.setSelection({length:this.searchInput.selectionEnd-this.searchInput.selectionStart,offset:this.searchInput.selectionStart});v.togglePlaceholder();}this.reset();}};e.exports=t;},null);