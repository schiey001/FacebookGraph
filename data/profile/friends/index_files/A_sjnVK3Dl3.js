/*!CK:1346761910!*//*1431324306,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["tB4iZ"]); }

__d("GroupMemberSelector",["Event","copyProperties","DOM","Form","SelectorDeprecated","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();function m(n,o,p,q,r,s){this._form=n;this._search=i.scry(o,'input')[0];this._viewFilter=p;this._groupURI=r;this._orderField=q;this._litestandClassicGroups=s;if(this._litestandClassicGroups){this._viewFilter.subscribe('change',this.onFilter.bind(this));}else k.listen(p,'change',this.onFilter.bind(this));g.listen(n,'submit',this.onSubmit.bind(this));if(this._search)this._search.removeAttribute('disabled');}h(m.prototype,{onFilter:function(){this.onSubmit();},onSubmit:function(){var n;if(this._litestandClassicGroups){n=this._viewFilter.getValue()||'';}else n=k.getValue(this._viewFilter)||'';var o=n.split('-'),p=o[0]||'members';this._orderField.value=o[1]||null;this._form.action=this._groupURI+p+'/';this._form.view.disabled=true;if(this._search&&this._search.value==this._search.placeholder)this._form.member_query.disabled=true;new l(this._form.action).setQueryData(j.serialize(this._form)).go();return false;}});e.exports=m;},null);
__d("legacy:async",["AsyncRequest","AsyncResponse"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();a.AsyncRequest=b('AsyncRequest');a.AsyncResponse=b('AsyncResponse');},3);
__d("ProfileBrowser",["ArbiterMixin","AsyncRequest","CSS","Input","URI","$","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=m(g);for(var o in n)if(n.hasOwnProperty(o))q[o]=n[o];var p=n===null?null:n.prototype;q.prototype=Object.create(p);q.prototype.constructor=q;q.__superConstructor__=n;function q(r,s){"use strict";this.selectionLimit=s.selectionLimit;this.hubBehaviors=s.hubBehaviors;this.hubsData=s.hubsData;this.listView=r.listView;this.selector=r.selector;this.typeahead=r.typeahead;this.hubs=r.hubsTypeahead;this.target=this.listView.getActiveList();this.subscribeListView();this.selector&&this.subscribeSelector();this.typeahead&&this.subscribeTypeahead();this.hubs&&this.subscribeHubs();}q.prototype.subscribeListView=function(){"use strict";this.listView.subscribe('clickedCheckable',function(r,s){this.listView.toggleCheckableItem(s.item,!i.hasClass(s.item,'selectedCheckable'));}.bind(this));};q.prototype.subscribeSelector=function(){"use strict";var r=this.typeahead&&this.typeahead.getCore();this.selector.subscribe('changeTarget',function(s,t){if(r){i.conditionShow(this.typeahead.getElement(),t.showtypeahead);r.getValue()&&r.reset();t.showtypeahead&&r.getElement().focus();}this.target=l(t.target);t.isprimer&&this.listView.setLoadingState(true);this.listView.swapList(this.target);this.hubs&&i.conditionShow(this.hubs.getElement(),t.hubs);}.bind(this));this.selector.subscribe('changeHub',function(s,t){var u=this.hubs.getCore(),v=u.getElement();this.hubs.init(this.hubBehaviors);this.hubs.swapData(this.hubsData[t.value]);u.reset();j.setPlaceholder(v,t.placeholder);v.focus();this.hubendpoint=new k(t.endpoint);}.bind(this));};q.prototype.subscribeTypeahead=function(){"use strict";this.typeahead.subscribe('render',function(){var r=this.typeahead.getCore().getValue()?this.typeahead.getView().element:this.target;this.listView.swapList(r);}.bind(this));this.typeahead.subscribe('reset',function(){this.listView.swapList(this.target);}.bind(this));this.typeahead.subscribe('loading',function(r,s){i.conditionClass(this.typeahead.getElement(),'loading',s.loading);}.bind(this));};q.prototype.subscribeHubs=function(){"use strict";this.hubs.subscribe('select',function(r,s){this.hubendpoint.addQueryData({node:s.selected.uid,pagetext:s.selected.text,offset:0,target:this.target.id});i.addClass(this.hubs.getElement(),'hubsLoading');new h(this.hubendpoint).setReadOnly(true).setMethod('POST').setRelativeTo(this.selector.getSelectedAnchor()).setHandler(function(){i.removeClass(this.hubs.getElement(),'hubsLoading');}.bind(this)).send();}.bind(this));};q.prototype.getSelectionLimit=function(){"use strict";return this.selectionLimit;};e.exports=q;},null);
__d("ProfileBrowserListView",["ArbiterMixin","CSS","DOM","Event","Parent","Scroll","Vector","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=800,p=n(g);for(var q in p)if(p.hasOwnProperty(q))s[q]=p[q];var r=p===null?null:p.prototype;s.prototype=Object.create(r);s.prototype.constructor=s;s.__superConstructor__=p;function s(t,u,v){"use strict";this._root=t;this._activeList=u;this._windowTrigger=v;j.listen(t,'click',this._handleClick.bind(this));}s.prototype.resetScroll=function(){"use strict";this._scroll&&this._scroll.remove();this._listenForScroll();};s.prototype.toggleCheckableItem=function(t,u){"use strict";var v=i.find(t,'input.checkbox');v.checked=u;h.conditionClass(t,'selectedCheckable',u);var w=t.nextSibling||t.previousSibling;w&&h.addClass(w,'sib')&&h.removeClass(w,'sib');};s.prototype.setLoadingState=function(t){"use strict";h.conditionClass(this._root,'showListviewLoading',t);};s.prototype.swapList=function(t){"use strict";h.addClass(this._activeList,'hiddenList');this._activeList=t;h.show(this._activeList);h.removeClass(this._activeList,'hiddenList');};s.prototype.getRoot=function(){"use strict";return this._root;};s.prototype.getActiveList=function(){"use strict";return this._activeList;};s.prototype.setActiveList=function(t){"use strict";this._activeList=t;return this;};s.prototype._handleClick=function(event){"use strict";var t=event.getTarget(),u=k.byClass(t,'checkableListItem');if(!u)return;var v=k.byClass(t,'anchor');if(!v&&k.byTag(t,'a')){this.inform('clickedProfile',{item:u});return;}if(!h.hasClass(u,'disabledCheckable')){v&&event.prevent();this.inform('clickedCheckable',{item:u});event.stop();}};s.prototype._listenForScroll=function(){"use strict";if(this._windowTrigger){this._rootHeight=m.getElementDimensions(this._root).y;if(this._rootHeight)this._scroll=j.listen(window,'scroll',this._handleWindowScroll.bind(this));}else this._scroll=j.listen(this._activeList,'scroll',this._handleListScroll.bind(this));};s.prototype._handleWindowScroll=function(t){"use strict";var u=this._rootHeight-m.getScrollPosition().y;if(u<=o)this.inform('scrollTrigger');};s.prototype._handleListScroll=function(t){"use strict";var u=t.getTarget(),v=u.scrollHeight-l.getTop(u);if(o>v)this.inform('scrollTrigger');};e.exports=s;},null);
__d("ProfileBrowserSelector",["ArbiterMixin","Button","DOM","mixin"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=j(g);for(var l in k)if(k.hasOwnProperty(l))n[l]=k[l];var m=k===null?null:k.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=k;function n(o,p){"use strict";this._buttonElem=o;this._menu=p;p.forEachItem((function(q){if(q.isSelected&&q.isSelected())this._selectedItem=q;}).bind(this));this._menu.subscribe('change',function(q,r){this.handle(r);}.bind(this));}n.prototype.handle=function(o){"use strict";this._selectedItem=o.item;h.setLabel(this._buttonElem,o.item.getLabel());var p=o.item.getRoot(),q=p.getAttribute('data-selectendpoint'),r=p.getAttribute('data-target');if(r)this.inform('changeTarget',{target:r,value:o.value,isprimer:i.find(p,'a').getAttribute('rel')=='async',showtypeahead:p.getAttribute('data-typeahead'),hubs:!!q});if(q)this.inform('changeHub',{value:o.value,placeholder:p.getAttribute('data-placeholder'),endpoint:q});};n.prototype.getSelectedValue=function(){"use strict";return this._selectedItem.getValue();};n.prototype.getSelectedAnchor=function(){"use strict";return i.find(this._selectedItem.getRoot(),'a');};n.prototype.setSelectedValue=function(o){"use strict";this._menu.setValue(o);};e.exports=n;},null);