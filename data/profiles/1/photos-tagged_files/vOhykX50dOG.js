/*!CK:1142682243!*//*1425999889,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["UnND7"]); }

__d("BrowsePhotoActions",["Event","Arbiter","AsyncRequest","DOMQuery","CSS","Parent","SelectorDeprecated","copyProperties","cx","requestAnimationFrame"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();function q(r,s){this.element=r;this.target=s;this.init();}n(q.prototype,{init:function(){if(this.element){g.listen(this.element,'click',this.handleClick.bind(this));var r=j.scry(this.element,'.uiSelector')[0];if(r)this.initDeprecatedSelector(r);}h.subscribe(['UFI/CommentAddedActive','UFI/CommentDeletedActive','UFI/LikeActive'],this.handleUFIActions.bind(this));},initDeprecatedSelector:function(r){m.listen(r,['open','close'],function(s){var t=k.toggleClass.bind(null,l.byClass(r,"_4313"),"_424_",s==='open');if(s==='open'){t();}else p(t);});},handleClick:function(event){var r=event.getTarget();if(l.byClass(r,"_ai7"))return this.handleLike(event);},handleLike:function(event,r){k.toggleClass(this.element,"_ai5");var s=j.scry(this.element,"_53z").length>0;new i().setURI('/ajax/browse/photo_actions.php').setData({fbid:this.element.getAttribute('data-fbid'),action:'like',noupdate:!s}).setRelativeTo(this.element).setErrorHandler(function(){k.toggleClass(this.element,"_ai5");}.bind(this)).send();},handleUFIActions:function(r,s){if(parseInt(this.element.getAttribute('data-fbid'),10)!==s)return;if(r==='UFI/LikeActive')k.toggleClass(this.element,"_ai5");new i().setURI('/ajax/browse/photo_actions.php').setData({fbid:this.element.getAttribute('data-fbid'),action:'comment'}).setRelativeTo(this.element).send();}});e.exports=q;},null);
__d("BrowseSlidePhoto",["ArbiterMixin","BrowseMouse","Style","Vector","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(m,n,o,p){this._root=m;this._bio=n;this._contents=o;this._hovercardOn=false;this.target=p&&p.target;this.initEvents();this.expand();}k(l.prototype,g,{initEvents:function(){h.onMouseOver(this._root,this.mouseenter.bind(this));if(this.target){this.target.subscribe('showhovercard',this.showhovercard.bind(this));this.target.subscribe('hidehovercard',this.hidehovercard.bind(this));}},expand:function(){var m=j.getElementDimensions(this._contents).y;i.set(this._bio,'height',(m-1)+'px');i.set(this._contents,'opacity',1);},collapse:function(){i.set(this._bio,'height',0);i.set(this._contents,'opacity',0);},mouseenter:function(){if(!this._hovercardOn)clearTimeout(this._hovercardTimeout);},showhovercard:function(){this._hovercardOn=true;i.set(this._contents,'opacity',1);},hidehovercard:function(){this._hovercardOn=false;}});e.exports=l;},null);