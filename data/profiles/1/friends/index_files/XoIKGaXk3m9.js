/*!CK:3759422264!*//*1432613677,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["xnHpd"]); }

__d("FriendsCenterStickyController",["StickyController"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(k,l,m,n){"use strict";g.call(this,k,l,m,n);this.$FriendsCenterStickyController0=l;this.$FriendsCenterStickyController1=n||k.parentNode;var o=k.getBoundingClientRect();this.$FriendsCenterStickyController2=o.bottom-o.top;this.$FriendsCenterStickyController3=true;}j.prototype.unstick=function(){"use strict";this.$FriendsCenterStickyController3=false;this.handleScroll();};j.prototype.restick=function(){"use strict";this.$FriendsCenterStickyController3=true;this.handleScroll();};j.prototype.shouldFix=function(){"use strict";if(!this.$FriendsCenterStickyController3)return false;var k=this.$FriendsCenterStickyController1.getBoundingClientRect();return this.$FriendsCenterStickyController0>=k.top&&this.$FriendsCenterStickyController0+this.$FriendsCenterStickyController2<k.bottom;};e.exports=j;},null);
__d("FriendsCenterStickyHeader",["CSS","DOM","FriendsCenterStickyController","Style","Vector","csx","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=[];function o(p){"use strict";var q=h.scry(document,"div._4f7n")[0];if(!q)return;var r=j.isFixed(q)?k.getElementDimensions(q).y:0,s=this.getPlaceholder(p.getBoundingClientRect());h.insertAfter(p,s);g.addClass(p,"_5m65");var t=new i(p,r,function(u){g.conditionShow(s,u);g.conditionClass(p,'stuck',u);}.bind(this));t.start();n[p.id]=t;}o.prototype.getPlaceholder=function(p){"use strict";var q=h.create('div');g.hide(q);j.set(q,'height',(p.bottom-p.top)+'px');j.set(q,'width',(p.right-p.left)+'px');return q;};o.stopSticky=function(p){"use strict";p&&(p.id in n)&&n[p.id].unstick();};o.startSticky=function(p){"use strict";p&&(p.id in n)&&n[p.id].restick();};e.exports=o;},null);
__d("FriendBrowserCheckboxController",["Arbiter","AsyncRequest","CSS","DOM","Event","Form","FriendsCenterStickyHeader","OnVisible","$","bind","copyProperties","csx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t='friend_browser_list';function u(){}q(u,{instances:{},getInstance:function(v){return this.instances[v];}});q(u.prototype,{init:function(v,w,x,y){u.instances[v]=this;this._id=v;this._simplified=x;this._infiniteScroll=y;this._form=w;this._contentGrid=j.find(w,'.friendBrowserCheckboxContentGrid');this._loadingIndicator=j.find(w,'.friendBrowsingCheckboxContentLoadingIndicator');this._checkboxResults=j.find(w,'.friendBrowserCheckboxResults');this._contentPager=j.find(w,'.friendBrowserCheckboxContentPager');this._standaloneFilters=null;this._searchStarted=false;this._stickyHeader=null;g.subscribe('friend-browser/name-change',this.getNew.bind(this,false));this.numGetNewRequests=0;this.queuedRequests={};k.listen(this._form,'submit',this.onFormSubmit.bind(this));},addTypeahead:function(v,w){v.subscribe('select',this.onHubSelect.bind(this,v,w));if(this._simplified)v.subscribe('unselect',this.onHubSelect.bind(this,v,w));},setStandaloneFilters:function(v){if(v){this._standaloneFilters=j.scry(document.body,'.friendBrowserCheckboxFilters')[0];this._stickyHeader=j.scry(o('fbSearchResultsBox'),"._5m65")[0];var w=o('doneSearchButton');w.onclick=function(){this._searchStarted=false;j.scry(document.body,"._5n-u").forEach(function(x){i.show(x);});i.hide(w);window.scrollTo(0,0);m.startSticky(this._stickyHeader);}.bind(this);}return this;},onFormSubmit:function(){this.getNew(true);return false;},addSelector:function(v){v.subscribe('change',this.getNew.bind(this,false));},onHubSelect:function(v,w,event,x){if(this._simplified){this.getNew(true);return;}if(!((event=='select')&&x.selected))return;var y=this.buildNewCheckbox(w,x.selected.text,x.selected.uid),z=j.find(this._standaloneFilters||this._form,'.checkboxes_'+w);j.appendContent(z.firstChild,y);var aa=j.scry(v.getElement(),'input[type="button"]');if(aa&&aa[0])aa[0].click();this.getNew(true);},buildNewCheckbox:function(v,w,x){var y=v+'_ids_'+x,z=v+'_ids[]',aa=j.create('input',{id:y,type:'checkbox',value:x,name:z,checked:true});k.listen(aa,'click',p(this,'getNew',false));var ba=j.create('td',null,aa);i.addClass(ba,'vTop');i.addClass(ba,'hLeft');var ca=j.create('label',null,w),da=j.create('td',null,ca);i.addClass(da,'vMid');i.addClass(da,'hLeft');var ea=j.create('tr');ea.appendChild(ba);ea.appendChild(da);return ea;},showMore:function(){var v=j.scry(this._contentPager,'.friendBrowserMorePager')[0];if(!v)return false;if(i.hasClass(v,'async_saving'))return false;var w=this.numGetNewRequests,x=this.getFormData();x.show_more=true;if(this._searchStarted)x.page=t;new h().setURI('/ajax/growth/friend_browser/checkbox.php').setData(x).setHandler(p(this,function(y){this.showMoreHandler(y,w);})).setStatusElement(v).send();},showMoreHandler:function(v,w){if(w==this.numGetNewRequests){var x=v.payload;j.appendContent(this._contentGrid,x.results);this.updatePagerAndExtraData(x.pager,x.extra_data);}},getFormData:function(){var v=l.serialize(this._form);if(this._standaloneFilters){var w=l.serialize(this._standaloneFilters);for(var x in w)v[x]=w[x];}return v;},getNew:function(v){this.numGetNewRequests++;var w=this.numGetNewRequests;i.addClass(this._checkboxResults,'friendBrowserCheckboxContentOnload');if(s('friendBrowserCI'))i.addClass(o('friendBrowserCI'),'friendBrowserCheckboxContentOnload');this.startStandaloneSearch();i.show(this._loadingIndicator);var x=this.getFormData();x.used_typeahead=v;if(this._searchStarted)x.page=t;new h().setURI('/ajax/growth/friend_browser/checkbox.php').setData(x).setHandler(p(this,function(y){this.getNewHandler(y,w);})).send();},getNewHandler:function(v,w){if(w==this.numGetNewRequests){var x=v.payload;j.setContent(this._contentGrid,x.results);i.removeClass(this._checkboxResults,'friendBrowserCheckboxContentOnload');if(s('friendBrowserCI'))i.hide(o('friendBrowserCI'));i.hide(this._loadingIndicator);this.updatePagerAndExtraData(x.pager,x.extra_data);}},startStandaloneSearch:function(){if(!this._standaloneFilters)return;window.scrollTo(0,0);if(this._searchStarted)return;this._searchStarted=true;i.show(o('fbSearchResultsBox'));j.scry(document.body,"._5n-u").forEach(function(v){i.hide(v);});i.show(o('doneSearchButton'));m.stopSticky(this._stickyHeader);},updatePagerAndExtraData:function(v,w){j.setContent(this._contentPager,v);if(this._infiniteScroll)this.setupOnVisible();j.replace(this._form.elements.extra_data,w);},setupOnVisible:function(){var v=j.scry(this._contentPager,'.friendBrowserMorePager')[0];if(v&&this._id!='jewel'){this._onVisible&&this._onVisible.remove();this._onVisible=new n(v,p(this,'showMore'),false,1000);}}});e.exports=u;},null);
__d("legacy:friend-browser-checkbox-js",["FriendBrowserCheckboxController"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();a.FriendBrowserCheckboxController=b('FriendBrowserCheckboxController');},3);
__d("XFriendJewelNotifsController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/friendjewel\/friendconfirmednotifications\/",{alert_ids:{type:"IntVector",required:true},action:{type:"String",required:true}});},null);
__d("FriendConfirmedNotifs",["Event","shield","CSS","DOM","ge","Arbiter","AsyncRequest","Parent","XFriendJewelNotifsController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();function p(q){"use strict";g.listen(q.close,'click',this.$FriendConfirmedNotifs0.bind(this));this.$FriendConfirmedNotifs1=q.unread_notifs;this.$FriendConfirmedNotifs2=q.unit;if(this.$FriendConfirmedNotifs1.length)this.$FriendConfirmedNotifs3=g.listen(this.$FriendConfirmedNotifs2,'click',this.$FriendConfirmedNotifs4.bind(this));if(this.$FriendConfirmedNotifs1.length)l.subscribeOnce('requestsJewel/closed',h(this.$FriendConfirmedNotifs5,this));if(q.read_notifs_to_set.length)this.$FriendConfirmedNotifs6(q.read_notifs_to_set,'set_time');this.$FriendConfirmedNotifs7=q.notifids;}p.prototype.$FriendConfirmedNotifs8=function(q){"use strict";var r=false,s=k('fbRequestsFlyout'),t=j.find(s,'.requestsUnitTitle'),u=j.scry(q,'.friendConfirmedNotifsUnitTitle')[0];if(!u){r=true;u=j.find(s,'.friendConfirmedNotifsUnitTitle');}if(r){i.show(j.find(t,'.requestsJewelLinks'));j.replace(u,t);}else i.hide(u);};p.prototype.$FriendConfirmedNotifs0=function(event){"use strict";var q=event.getTarget(),r=n.byClass(q,'friendConfirmedNotifsUnitAggregated'),s=r.parentElement;i.hide(r);this.$FriendConfirmedNotifs8(s);this.$FriendConfirmedNotifs6(this.$FriendConfirmedNotifs7,'xout');};p.prototype.$FriendConfirmedNotifs6=function(q,r){"use strict";var s=o.getURIBuilder().setIntVector('alert_ids',q).setString('action',r).getURI();new m().setURI(s).send();};p.prototype.$FriendConfirmedNotifs5=function(){"use strict";if(!this.$FriendConfirmedNotifs1.length)return;this.$FriendConfirmedNotifs6(this.$FriendConfirmedNotifs1,'mark_read');i.removeClass(this.$FriendConfirmedNotifs2.childNodes[0],'friendConfirmedNotifsUnread');this.$FriendConfirmedNotifs1=[];};p.prototype.$FriendConfirmedNotifs4=function(event){"use strict";this.$FriendConfirmedNotifs3.remove();this.$FriendConfirmedNotifs5();};f.init=function(q){new p(q);};},null);
__d("FriendConfirmedNotifsClickLogging",["Event","AsyncSignal"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={addClickLoggingListener:function(j,k){g.listen(j,'click',function(){new h(k).send();});}};e.exports=i;},null);
__d("legacy:onvisible",["OnVisible"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();a.OnVisible=b('OnVisible');},3);
__d("InnerStickyArea",["ContextualLayer","CSS","DataStore","DOM","Event","LayerHideOnTransition","Locale","Parent","Scroll","Style","Vector","cx","removeFromArray"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();function t(w){var x=n.byClass(w,'scrollable')||p.getScrollParent(w.parentNode);return x;}function u(w){"use strict";var x=t(w);this.node=w;this._extracted=false;this._placeholder=j.create('div',{className:"_ptr"});v.getInstance(x).register(this);}u.prototype.update=function(){"use strict";if(this._extracted){q.getElementDimensions(this._placeholder).setElementWidth(this.node);q.getElementDimensions(this.node).setElementHeight(this._placeholder);}else q.getElementDimensions(this.node).setElementWidth(this.node).setElementHeight(this._placeholder);return this;};u.prototype.setExtracted=function(w){"use strict";if(w===this._extracted)return this;if(w){this.update();j.replace(this.node,this._placeholder);}else{p.set(this.node,'height',null);p.set(this.node,'width',null);if(this._placeholder.parentNode){j.replace(this._placeholder,this.node);}else j.remove(this.node);}this._extracted=w;return this;};u.prototype.getInlineNode=function(){"use strict";return this._extracted?this._placeholder:this.node;};u.prototype.isDisplayed=function(){"use strict";var w=this.getInlineNode();return w.offsetWidth>0&&w.offsetHeight>0;};u.prototype.getStickyContainer=function(){"use strict";return this._stickyContainer;};u.prototype.updateContainer=function(){"use strict";var w=t(this.node);v.getInstance(w).register(this);};u.prototype.destroy=function(){"use strict";this.getStickyContainer().unregister(this);};u.getStickyContainer=function(w){"use strict";return v.getInstance(t(w));};function v(w){"use strict";this.node=w;this._areas=[];this._fixTarget=null;this._fixedArea=null;this._initialized=false;this._layer=new g({permanent:true},j.create('div')).setInsertParent(this.node.parentNode).disableBehavior(l);this._listener=k.listen(w,'scroll',this.update.bind(this));h.addClass(w,"_pts");i.set(w,'StickyContainer',this);}v.prototype.isDisplayed=function(){"use strict";return this.node.offsetWidth>0&&this.node.offsetHeight>0;};v.prototype.register=function(w){"use strict";if(w.getStickyContainer())w.getStickyContainer().unregister(w);w._stickyContainer=this;this._areas.push(w);this.update();return this;};v.prototype.unregister=function(w){"use strict";s(this._areas,w);this.update();};v.prototype.update=function(){"use strict";if(!this.isDisplayed())return this;var w=null,x=this,y=o.getTop(this.node),z;for(var aa=0;aa<this._areas.length;aa++){var ba=this._areas[aa],ca=ba.getInlineNode();if(!ba.isDisplayed())continue;if(!j.contains(this.node.parentNode,ca))continue;var da=ca.offsetTop;if(da<=y){if(z===(void 0)||da>z){w=ba;z=da;}}else if(w){var ea=q.getElementDimensions(w.node).y;if(da-ea<y)x=ba;break;}}if(this._fixedArea===w&&this._fixTarget===x){this._fixedArea&&this._fixedArea.update();}else{if(this._fixedArea&&this._fixedArea!==w)this._unfixArea(this._fixedArea);if(w)this._fixAreaTo(w,x);this._fixedArea=w;this._fixTarget=x;}return this;};v.prototype.destroy=function(){"use strict";this._listener&&this._listener.remove();this._listener=null;};v.prototype._fixAreaTo=function(w,x){"use strict";this._layer.hide();w.setExtracted(true);if(x instanceof v){this._layer.setInsertParent(this.node.parentNode).setAlignment(m.isRTL()?'right':'left').setContext(this.node);}else this._layer.setInsertParent(this.node).setContext(x.node);this._layer.setContent(w.node).show();h.addClass(w.node,"_57kj");};v.prototype._unfixArea=function(w){"use strict";this._layer.hide();w.setExtracted(false);h.removeClass(w.node,"_57kj");};v.getInstance=function(w){"use strict";var x=i.get(w,'StickyContainer');return x||new v(w);};e.exports=u;},null);