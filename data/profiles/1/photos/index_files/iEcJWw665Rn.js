/*!CK:946181721!*//*1432609177,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["JKh5x"]); }

__d("ComposerTargetType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={SELF_USER:"feed",OTHER_USER:"wall",GROUP:"group",PAGE:"page",EVENT:"event",EXAMPLE:"example"};},null);
__d("ComposerType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={INLINE:"inline",ADVANCED:"advanced",NORMAL:"normal"};},null);
__d("ComposerWaterfallEvent",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={COMPOSER_CANCEL:"composer_cancel",COMPOSER_CANCEL_INTENT:"intent_composer_cancel",COMPOSER_ENTRY:"composer_entry",COMPOSER_NOT_RENDERED:"composer_not_renderer",COMPOSER_POST:"composer_post",COMPOSER_POST_CANCEL:"composer_post_cancel",COMPOSER_POST_FAILURE:"composer_post_failure",COMPOSER_POST_FAILURE_FATAL:"composer_post_fatal_failure",COMPOSER_POST_FAILURE_GIVEUP:"composer_post_giveup_failure",COMPOSER_POST_SUCCESS:"composer_post_success",COMPOSER_POST_COMPLETED:"composer_post_completed",COMPOSER_WRITTEN:"composer_written",ALBUM_ADD:"add_album",ALBUM_CANCEL:"cancel_album",ALBUM_INTENT:"intent_album",ALBUM_REMOVE:"remove_album",FRIEND_TAG_ADD:"add_friend_tag",FRIEND_TAG_CANCEL:"cancel_friend_tag",FRIEND_TAG_INTENT:"intent_friend_tag",FRIEND_TAG_REMOVE:"remove_friend_tag",FRIEND_TAG_SEARCH:"search_friend_tag",FRIEND_SHOW_MORE:"show_more_friend_tag",LOCATION_ADD:"add_location",LOCATION_CANCEL:"cancel_location",LOCATION_INTENT:"intent_location",LOCATION_REMOVE:"remove_location",LOCATION_SCROLL:"scroll_location",LOCATION_SEARCH:"search_location",MINUTIAE_ADD:"add_minutiae",MINUTIAE_CANCEL:"cancel_minutiae",MINUTIAE_CHANGE_ICON:"change_icon_minutiae",MINUTIAE_CHANGE_ICON_CANCEL:"change_icon_cancel_minutiae",MINUTIAE_CHANGE_ICON_INTENT:"change_icon_intent_minutiae",MINUTIAE_INTENT:"intent_minutiae",MINUTIAE_REMOVE:"remove_minutiae",MINUTIAE_SCROLL:"scroll_minutiae",MINUTIAE_SEARCH:"search_minutiae",MINUTIAE_TYPE_CLICK:"type_click_minutiae",MINUTIAE_SEE_MORE:"see_more_minutiae",MINUTIAE_CHAIN_SKIP:"skip_chain_minutiae",MINUTIAE_CHAIN_SUGGEST:"suggest_chain_minutiae",MINUTIAE_ICONPICKER_QUERY:"minutiae_iconpicker_query",MINUTIAE_ICONPICKER_BOOTSTRAP:"minutiae_iconpicker_bootstrap",MINUTIAE_ICONPICKER_SELECT:"minutiae_iconpicker_select",MEDIA_INTENT:"intent_media",MEDIA_CANCEL:"cancel_media",PHOTO_ADD:"add_photo",PHOTO_ADD_FAILURE:"add_photo_failure",PHOTO_ADD_SUCCESS:"add_photo_success",PHOTO_REMOVE:"remove_photo",PRIVACY_ADD:"add_privacy",PRIVACY_CANCEL:"cancel_privacy",PRIVACY_INTENT:"intent_privacy",PRIVACY_SCROLL:"scroll_privacy",PRIVACY_SEE_ALL_LISTS:"see_all_lists_privacy",SELECT_FRIEND_TIMELINE_INTENT:"intent_select_friend_timeline",SELECT_FRIEND_TIMELINE_ADD:"add_select_friend_timeline",SELECT_FRIEND_TIMELINE_CANCEL:"cancel_select_friend_timeline",SERVER_POST_BEGIN:"server_composer_post_begin",SERVER_POST_FAILURE:"server_composer_post_failure",SERVER_POST_SUCCESS:"server_composer_post_succeeded",POST_POST_WITH_TAG_BEGIN:"post_post_with_tag_begin",POST_POST_WITH_TAG_FAILURE:"post_post_with_tag_failure",POST_POST_WITH_TAG_SUCCESS:"post_post_with_tag_success",TARGET_SELECTOR_INTENT:"intent_target_selector",TARGET_SELECTOR_CANCEL:"cancel_target_selector",VIDEO_ADD:"add_video",VIDEO_ADD_FAILURE:"add_video_failure",VIDEO_ADD_SUCCESS:"add_video_success",VIDEO_REMOVE:"remove_video"};},null);
__d("ComposerXAjaxEndpoint",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={ADS_MEDIA_UPLOAD:"\/ajax\/ads\/create\/composerx\/attachment\/media\/upload\/",ADS_ATTACHMENT_STATUS:"\/ajax\/ads\/create\/composerx\/attachment\/status\/",MEDIA_UPLOAD:"\/ajax\/composerx\/attachment\/media\/upload\/"};},null);
__d("ComposerXContextConfig",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={propertyNames:{actorID:"ACTOR_ID",postID:"POST_ID",bootloadAttachmentsImmediately:"BOOTLOAD_ATTACHMENTS_IMMEDIATELY"},propertyValues:{ACTOR_ID:"actorID",POST_ID:"postID",BOOTLOAD_ATTACHMENTS_IMMEDIATELY:"bootloadAttachmentsImmediately"}};},null);
__d("PUWMethods",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={DRAGDROP:"dragdrop",FILE_SELECTOR:"file_selector",VAULT:"vault",RECENT_PHOTOS:"recent_photos",PHOTOS_OF_YOU:"photos_of_you",METHOD_EDITOR:"editor",SUGGESTIONS:"suggestions",CAMERA:"camera",COPYPASTE:"copypaste"};},null);
__d("ComposerXAttachmentBootstrap",["CSS","Form","Parent","URI","cx"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=[],m={bootstrap:function(n){m.load(i.byTag(n,'form'),n.getAttribute('data-endpoint'));},load:function(n,o,p){var q=new j(o).addQueryData({composerurihash:m.getURIHash(o)});g.conditionClass(n,"_fu",p);var r=i.byClass(n,"_2_4");g.removeClass(r,'async_saving');h.setDisabled(n,false);n.action=q.toString();h.bootstrap(n);},getURIHash:function(n){if(n==='initial')return 'initial';var o=l.indexOf(n);if(o!==-1){return o+'';}else{o=l.length;l[o]=n;return o+'';}}};e.exports=m;},null);
__d("ComposerXContext",["ComposerXContextConfig","invariant"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=function(k){return g.propertyNames[k];};function j(k){"use strict";this.$ComposerXContext0={};for(var l in k)this.setProperty(l,k[l]);}j.prototype.getProperty=function(k){"use strict";h(i(k));return this.$ComposerXContext0[k];};j.prototype.setProperty=function(k,l){"use strict";h(i(k));this.$ComposerXContext0[k]=l;return this;};j.PROPERTIES=g.propertyValues;e.exports=j;},null);
__d("ComposerXSessionIDs",["DOM","cx"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(){return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(l){var m=Math.random()*16|0,n=l=='x'?m:(m&3|8);return n.toString(16);});}var j={},k={getSessionID:function(l){return j[l];},resetSessionID:function(l){j[l]=i();},createSessionIDInput:function(l){return g.create('input',{type:'hidden',name:'composer_session_id',className:"_5r_b",value:l});}};e.exports=k;},null);
__d("ShareModeConst",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={SELF_PAGE:'selfpage',PAGE:'page',SELF_POST:'self',FRIEND:'friend',GROUP:'group',ALBUM:'album',MESSAGE:'message'};e.exports=g;},null);
__d("ComposerXMarauderLogger",["Event","ComposerTargetType","ComposerType","ComposerWaterfallEvent","ComposerXSessionIDs","MarauderLogger","ShareModeConst"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n={},o=i.NORMAL,p={logEvent:function(q,r,s){if(!s)s={};var t=n[r],u=k.getSessionID(r);if(!t||!u)return;if(s.logOncePerSession){if(!t.loggedEventTypes[u])t.loggedEventTypes[u]={};if(t.loggedEventTypes[u][q])return;t.loggedEventTypes[u][q]=true;}var v=Object.assign({},s.extraData,{composer_type:o,composer_version:t.composerVersion,target_type:t.targetType,target_id:t.targetID,ref:t.entryPointRef});if(s.logDetails){v.has_photo=t.hasPhoto;v.has_video=t.hasVideo;v.xy_tag_count=t.numXYTags;v.with_tag_count=t.numWithTags;v.tags_user=t.numUserTags;}l.log(q,'composer',v,(void 0),(void 0),u);},registerComposer:function(q,r,s,t,u){n[q.id]={targetID:u,targetType:r,entryPointRef:s,composerVersion:t,loggedEventTypes:{},hasPhoto:false,hasVideo:false,numWithTags:0,numXYTags:0,numUserTags:0};},updateHasPhoto:function(q,r){if(!n[q])return;n[q].hasPhoto=r;},updateHasVideo:function(q,r){if(!n[q])return;n[q].hasVideo=r;},updateNumWithTags:function(q,r){if(!n[q])return;n[q].numWithTags=r;},updateNumXYTags:function(q,r){if(!n[q])return;n[q].numXYTags=r;n[q].numWithTags=n[q].numWithTags-r;},updateNumUserTags:function(q,r){if(!n[q])return;n[q].numUserTags=r;},listenForPostEvents:function(q,r){if(!r)return [];return [g.listen(r,'submit',function(){p.logPost(q);}),g.listen(r,'success',function(){p.logPostSuccess(q);}),g.listen(r,'error',function(event){p.logPostFailure(q,{error_info:{error_code:event.data.response.error,error_description:event.data.response.errorDescription,error_summary:event.data.response.errorSummary}});})];},setShareMode:function(q,r){var s=n[q];if(!s)return;switch(r){case m.SELF_POST:s.targetType=h.SELF_USER;break;case m.FRIEND:s.targetType=h.OTHER_USER;break;case m.PAGE:case m.SELF_PAGE:s.targetType=h.PAGE;break;case m.GROUP:s.targetType=h.GROUP;break;default:s.targetType=h.OTHER;}},logEntry:function(q,r){if(typeof r==='string')return;p.logEvent(j.COMPOSER_ENTRY,q,{logOncePerSession:true,extraData:r});},logCompleted:function(q,r){p.logEvent(j.COMPOSER_POST_COMPLETED,q,{extraData:r});},logPost:function(q,r){p.logEvent(j.COMPOSER_POST,q,{extraData:r});},logPostSuccess:function(q,r){p.logEvent(j.COMPOSER_POST_SUCCESS,q,{extraData:r});},logPostFailure:function(q,r){p.logEvent(j.COMPOSER_POST_FAILURE,q,{extraData:r});}};e.exports=p;},null);
__d("ComposerXSessionIDInserter",["ComposerXSessionIDs","DOM","DOMQuery","Event","Parent","csx","cx","onEnclosingPageletDestroy"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o={init:function(p){var q=j.listen(p,'submit',o._onSubmit);n(p,function(){q.remove();});},_onSubmit:function(p){o.insertSessionInput(p.getTarget());},insertSessionInput:function(p){var q=k.byClass(p,"_119");if(!q)return;var r=g.getSessionID(q.id);if(!r)return;var s=i.scry(p,"._5r_b")[0];if(!s){h.prependContent(p,g.createSessionIDInput(r));}else s.value=r;}};e.exports=o;},null);
__d("ComposerXStore",["Arbiter","ge"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={};function j(l,m){return 'ComposerX/'+l+'/'+m;}var k={set:function(l,m,n){if(!i[l])i[l]={};i[l][m]=n;g.inform(j(l,m),{},g.BEHAVIOR_STATE);},get:function(l,m){if(i[l])return i[l][m];return null;},getAllForComposer:function(l){return i[l]||{};},waitForComponents:function(l,m,n){g.registerCallback(n,m.map(j.bind(null,l)));}};g.subscribe('page_transition',function(){for(var l in i)if(!h(l))delete i[l];});e.exports=k;},null);
__d("AudienceSelectorTags",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={},h={hasTags:function(i){return g.hasOwnProperty(i);},setHasTags:function(i){if(i)g[i]=true;}};e.exports=h;},null);
__d("DynamicIconSelector",["Button","CSS","DOM","SelectorDeprecated"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={swapIcon:function(l){var m=j.getSelectedOptions(l)[0],n=m&&i.scry(m,'.itemIcon')[0],o=j.getSelectorButton(l);if(n){g.setIcon(o,n.cloneNode(true));}else{var p=i.scry(o,'.img')[0];p&&i.remove(p);}h.conditionClass(o,'uiSelectorChevronOnly',!n);}};j.subscribe('change',function(l,m){var n=m.selector;if(h.hasClass(n,'dynamicIconSelector'))k.swapIcon(n);});e.exports=k;},null);
__d("PrivacySelectorOption",["Arbiter","AudienceSelectorTags","CSS","CurrentUser","DOM","DynamicIconSelector","Parent","PrivacyConst","SelectorDeprecated","copyProperties","csx","fbt","intlList"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();function t(u,v){if(!u)throw new Error("there's no DOM option. Config data: ",v);this._elem=u;this._selector=m.byClass(this._elem,'audienceSelector');if(!this._selector)return;this._priv_base_val=v.priv_base_val;this._audienceCount=v.audience_count||"";this._hasRestricted=v.has_restricted||false;this._isCustom=v.is_custom||false;this._includedAudience=v.included||"";this._excludedAudience=v.excluded||{};this._excludedTaggees={};this._tagExpansionBehavior=v.tag_expansion_behavior||n.TagExpansion.NONE;this._plusLabel=k.scry(u,'.plusLabel')[0];this._audienceCountLabel=k.scry(u,'.audienceCountLabel')[0];this._taggedIDs=[];this._tags=[];this._recalculateTooltipAndLabel();this._updateOptionCountLabel();this._updateSelector();g.subscribe('Composer/changedtags',function(w,x){var y=i.hasClass(this._selector,'composerAudienceSelector');if(!this._getChangedData()||!y)return;this._tags=[];this._taggedIDs=[];for(var z=0;z<x.withTags.length;z++){var aa=x.withTags[z].info;if(aa.uid!=j.getID()){this._tags.push(aa.text);this._taggedIDs.push(aa.uid);}}for(z in x.mention)if(x.mention[z].type=='user'&&x.mention[z].uid!=j.getID()){this._tags.push(x.mention[z].text);this._taggedIDs.push(x.mention[z].uid);}var ba=k.scry(document.body,"._5l7q")[0];ba&&!!this._taggedIDs.length&&i.hide(ba);this._updateOptionCountLabel();var ca=this._recalculateTooltipAndLabel();if(ca&&o.isOptionSelected(this._elem)){this._updateSelector();g.inform('SelectedPrivacyOption/changed',this._getChangedData());}}.bind(this));o.listen(this._selector,'change',this._updateSelector.bind(this));}p(t.prototype,{updateOption:function(u,v,w,x,y){this._priv_base_val=u;this._includedAudience=v;this._excludedAudience=w;this._tagExpansionBehavior=x;this._audienceCount=y;this._recalculateTooltipAndLabel();this._updateOptionCountLabel();return {label:this._label,tooltip:this._tooltip};},_recalculateTooltipAndLabel:function(){var u=this._label;this._label=this._getNewSelectorLabel();var v=this._tooltip;this._tooltip=this._getNewTooltip();return (v!=this._tooltip)||(u!=this._label);},_getNewTooltip:function(){if(this._isCustom)return this._recalcCustomTooltip();switch(this._priv_base_val){case n.FriendsValue.ALL_FRIENDS:return this._recalcFriendsTooltip();case n.FriendsValue.FRIENDS_MINUS_ACQUAINTANCES:return this._recalcFriendsMinusTooltip();case n.FriendsValue.SELF:var u=this._getTagExpansionText();return u?u:this._getIncludedAudience();default:return this._recalcCustomTooltip();}},_getNewSelectorLabel:function(){var u=this._elem.getAttribute('data-label').replace(/\(.*\)/,"");if(this._showAudienceCount()){var v=' ('+this._audienceCount+')';u+=v;}if(this._isTagExpanded())u+=' (+)';return u;},_updateOptionCountLabel:function(){if(this._audienceCountLabel){if(this._showAudienceCount()){var u=' ('+this._audienceCount+')';k.setContent(this._audienceCountLabel,u);}i.conditionShow(this._audienceCountLabel,this._showAudienceCount());}this._plusLabel&&i.conditionShow(this._plusLabel,this._isTagExpanded());},_getChangedData:function(){return {tags:this._taggedIDs,privacy:this._priv_base_val};},_showAudienceCount:function(){return (this._audienceCountLabel&&this._audienceCount&&this._audienceCount.length>0);},_isTagExpanded:function(){var u=this._getTagExpansionBehavior(),v=!!this._taggedIDs.length||this._alreadyHasTags();return (v&&u!=n.TagExpansion.NONE);},_alreadyHasTags:function(){var u=k.scry(this._selector,'*[data-oid]')[0];u=u&&u.getAttribute('data-oid');return u&&h.hasTags(u);},_updateSelector:function(){if(!this._isSharedAlbum()&&o.isOptionSelected(this._elem)){var u=i.hasClass(this._selector,'composerAudienceSelector');u&&o.setButtonLabel(this._selector,this._label);o.setButtonTooltip(this._selector,this._tooltip);l.swapIcon(this._selector);return false;}return true;},_isSharedAlbum:function(){var u=k.scry(this._selector,'*[data-shared-album]')[0];return u&&u.getAttribute('data-shared-album');},_getTagExpansionBehavior:function(){if(this._tagExpansionBehavior)return this._tagExpansionBehavior;var u=this._priv_base_val===n.FriendsValue.SELF,v=this._priv_base_val===n.FriendsValue.EVERYONE;if((u&&this._isSharedAlbum())||v){return n.TagExpansion.NONE;}else if(this._priv_base_val<n.FriendsValue.ALL_FRIENDS)return n.TagExpansion.TAGGEES;return n.TagExpansion.FRIENDS_OF_TAGGEES;},_getTagExpansionText:function(){var u=this._getTagExpansionBehavior();if(!!this._taggedIDs.length||this._alreadyHasTags()){if(u==n.TagExpansion.FRIENDS_OF_TAGGEES){return r._("friends of anyone tagged");}else if(u==n.TagExpansion.TAGGEES)return r._("Anyone tagged");return '';}return '';},_getIncludedAudience:function(){if(this._includedAudience)return this._includedAudience;var u=this._priv_base_val===n.FriendsValue.SELF;if(u&&!this._isSharedAlbum())return r._("Only Me");return this._elem.getAttribute('data-label');},_getCombinedSentence:function(u,v){if(!v)return u;return r._("{list of people who can see this}; Except: {list of people who cannot see this}",[r.param("list of people who can see this",u),r.param("list of people who cannot see this",v)]);},_recalcFriendsTooltip:function(){var u=this._tags.length;if(u>2){return this._hasRestricted?r._("Your friends and friends of anyone tagged; Except: Restricted"):r._("Your friends and friends of anyone tagged");}else if(u==2){if(this._hasRestricted){return r._("Your friends, {user}'s friends and {user2}'s friends; Except: Restricted",[r.param("user",this._tags[0]),r.param("user2",this._tags[1])]);}else return r._("Your friends, {user}'s friends and {user2}'s friends",[r.param("user",this._tags[0]),r.param("user2",this._tags[1])]);}else if(u==1){if(this._hasRestricted){return r._("Your friends and {user}'s friends; Except: Restricted",[r.param("user",this._tags[0])]);}else return r._("Your friends and {user}'s friends",[r.param("user",this._tags[0])]);}else return this._hasRestricted?r._("Your friends; Except: Restricted"):r._("Your friends");},_recalcFriendsMinusTooltip:function(){var u=this._tags.length;if(u>0||this._alreadyHasTags()){var v=r._("friends of anyone tagged"),w=r._("{people who can see this}, {list of more people who can see this}",[r.param("people who can see this",r._("Your friends")),r.param("list of more people who can see this",v)]),x=r._("Acquaintances");if(this._hasRestricted)x=r._("{Name of Acquaintances friend list}, {restricted}",[r.param("Name of Acquaintances friend list",x),r.param("restricted",r._("Restricted"))]);return this._getCombinedSentence(w,x);}else{if(this._hasRestricted)return r._("Friends; Except: Acquaintances, Restricted");return r._("Friends except Acquaintances");}},_recalcCustomTooltip:function(){var u=this._getIncludedAudience(),v=this._getTagExpansionText();if(v)u=r._("{list of people who can see this}, {list of additional people who can see this}",[r.param("list of people who can see this",u),r.param("list of additional people who can see this",v)]);for(var w=0;w<this._taggedIDs.length;w++){x=this._taggedIDs[w];if(x in this._excludedAudience){delete this._excludedAudience[x];this._excludedTaggees[x]=this._tags[w];break;}}for(var x in this._excludedTaggees)if(this._excludedTaggees.hasOwnProperty(x))if(this._taggedIDs.indexOf(x)===-1){this._excludedAudience[x]=this._excludedTaggees[x];delete this._excludedTaggees[x];break;}var y=[];for(w in this._excludedAudience)if(this._excludedAudience.hasOwnProperty(w))y.push(this._excludedAudience[w]);return this._getCombinedSentence(u,s(y));}});e.exports=t;},null);
__d("XPrivacyCustomDialogController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/privacy\/custom_dialog\/",{id:{type:"String",required:true},option_id:{type:"String",required:true},autosave:{type:"Bool",defaultValue:false},explain_tags:{type:"Bool",defaultValue:false},limit_community:{type:"Bool",defaultValue:false},limit_facebook:{type:"Bool",defaultValue:false},limit_fof:{type:"Bool",defaultValue:false},limit_tagexpand:{type:"Bool",defaultValue:false},is_new_privacy_selector:{type:"Bool",defaultValue:false},render_location:{type:"Int"},content_type:{type:"String"},post_param:{type:"String"},privacy_data:{type:"String"},source:{type:"String"},tags:{type:"IntVector"},tag_expansion_button:{type:"String"},__asyncDialog:{type:"Int"}});},null);
__d("CustomPrivacyOptionController",["Arbiter","AsyncDialog","AsyncRequest","DOM","Event","Form","Parent","PrivacyConst","PrivacySelectorOption","SelectorDeprecated","XPrivacyCustomDialogController","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();function s(t,u){if(!t)return;setTimeout((function(){this._selector=m.byClass(t,'audienceSelector');if(!this._selector)return;this.initCustomState(t,u.option_id,u.id);var v={priv_base_val:u.base_audience_value,audience_count:u.audience_count,is_custom:true,included:u.included_audience,excluded:u.excluded_audience,tag_expansion_behavior:u.tag_expansion_behavior};this._optionJSInstance=new o(t,v);k.listen(t,'click',function(event){this.openCustomDialog(event,u.option_id,u.explain_tags,u.autosave,u.limit_community,u.limit_facebook,u.limit_fof,u.limit_tagexpand,u.source);}.bind(this));p.listen(this._selector,'select',function(w){if(w.option._id!=this._id)this.clearCustomState();}.bind(this));}).bind(this),0);}r(s,{_instances:{},update:function(t,u,v,w,x,y,z,aa,ba){var ca=s._instances[t];ca._update(u,v)._updateOption(v,x,y,z,aa,ba);g.inform('Form/change',{node:ca._container});},getData:function(t){var u=s._instances[t];return u&&u._privacyData;},setPrivacyData:function(t,u,v){s._instances[t]._update(u,v);}});r(s.prototype,{_updateOption:function(t,u,v,w,x,y){var z=p.getOption(this._selector,t)||p.getOption(this._selector,n.BaseValue.CUSTOM+''),aa=this._optionJSInstance.updateOption(u,v,w,x,y);g.inform('CustomPrivacyOptionController/update',{selector:this._selector,option:z,tooltip:aa.tooltip,label:aa.label});return this;},_update:function(t,u){var v=u==n.BaseValue.CUSTOM||!p.getOption(this._selector,u),w=this._selector.getAttribute('data-name');this.updateCustomState(t,v,w);return this;},initCustomState:function(t,u,v){s._instances[u]=this;this._container=j.find(t,'.customPrivacyInputs');this._id=v;this._privacyData={};var w=l.serialize(this._container);if(w.audience)this._privacyData=w.audience[v];return t;},openCustomDialog:function(event,t,u,v,w,x,y,z,aa){var ba=q.getURIBuilder().setString('option_id',t).setString('id',this._id).setString('privacy_data',JSON.stringify(this._privacyData)).setBool('explain_tags',u).setBool('autosave',v).setBool('limit_community',w).setBool('limit_facebook',x).setBool('limit_fof',y).setBool('limit_tagexpand',z).setBool('is_new_privacy_selector',false).setString('source',aa).getURI(),ca=new i(ba);ca.setRelativeTo(event.getTarget());h.send(ca,function(da){da.subscribe('cancel',function(){g.inform('CustomPrivacyOptionController/cancel',{selector:this._selector});}.bind(this));}.bind(this));},updateCustomState:function(t,u,v){this.clearCustomState();this._privacyData=r({},t);if(u)if(v){v=v.slice(0,-'[value]'.length);var w={};w[v]=t;l.createHiddenInputs(w,this._container,null,true);}},clearCustomState:function(){this._privacyData={};j.empty(this._container);}});e.exports=s;},null);
__d("AudienceSelector",["Arbiter","AsyncRequest","AudienceSelectorTags","CSS","CustomPrivacyOptionController","DOM","DynamicIconSelector","PrivacyConst","SelectorDeprecated"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p={};o.subscribe('select',function(r,s){if(!j.hasClass(s.selector,'audienceSelector'))return;var t=o.getOptionValue(s.option);s.value=t;g.inform('AudienceSelector/changed',s);if(t==n.BaseValue.CUSTOM&&!j.hasClass(s.option,'noDialog')){o.toggle(s.selector);return false;}g.inform('AudienceSelector/changedNonCustomDialogButton',s);if(j.hasClass(s.selector,'dataTooltip')){var u=l.find(s.option,'.itemAnchor').getAttribute('data-tooltip');o.setButtonTooltip(s.selector,u||null);}if(!j.hasClass(s.option,'specialOption'))return;var v=l.find(s.option,'a').getAttribute('data-type');if(j.hasClass(s.option,'moreOption')){j.addClass(s.selector,v);j.addClass(s.selector,'showSecondaryOptions');return false;}else if(j.hasClass(s.option,'returnOption')){j.removeClass(s.selector,'showSecondaryOptions');j.removeClass(s.selector,'friendList');return false;}});var q={keepSynchronized:function(r,s){p[r]||(p[r]={});p[r][s.id]=s;},setHasTags:function(r){i.setHasTags(r);},getComposerInstance:function(){var r=p['PrivacyLiteNav/audience'];if(r){var s;for(var t in r){s=r[t];return s;}}return null;},forceAndKeepSynchronized:function(r,s){q.keepSynchronized(r,s);g.inform('AudienceSelector/update',{option:o.getSelectedOptions(s)[0],selector:s});},get:function(r){if(j.hasClass(r,'audienceSelector'))return r;var s=l.scry(r,'div.audienceSelector');if(s.length!=1)return;return s[0];},setAudience:function(r,s){var t=q.get(r);o.loadMenu(t,function(u){o.setSelected(t,s.toString());m.swapIcon(t);var v=o.getSelectedOptions(t),w=v[0]&&l.find(v[0],'a');if(w&&w.getAttribute('ajaxify'))h.bootstrap(w.getAttribute('ajaxify'),w,true);g.inform('AudienceSelector/changed',{option:v[0],selector:t});});}};g.subscribe('CustomPrivacyOptionController/update',function(r,s){if(!j.hasClass(s.selector,'audienceSelector'))return;o.setSelected(s.selector,o.getOptionValue(s.option));m.swapIcon(s.selector);var t=j.hasClass(s.selector,'composerAudienceSelector'),u=j.hasClass(s.selector,'inlineAudienceWidget');if(t||u)o.setButtonLabel(s.selector,s.label);o.setButtonTooltip(s.selector,s.tooltip);g.inform('AudienceSelector/update',s);});g.subscribe(['AudienceSelector/changed','AudienceSelector/update'],function(event,r){var s=o.getOptionValue(r.option),t={};if(s==n.BaseValue.CUSTOM){if(event=='AudienceSelector/changed')return;t=k.getData(r.option.id);if(!t)return;}else if(j.hasClass(r.selector,'inlineAudienceWidget'))o.setButtonLabel(r.selector,r.option.innerText);for(var u in p){var v=p[u];if(v[r.selector.id]){g.inform('AudienceSelector/syncNonSelectorIcon',{category:u});for(var w in v){var x=v[w];if(!x||r.selector===x)continue;if(o.getValue(x)!==s){o.setSelected(x,s);m.swapIcon(x);}if(s==n.BaseValue.CUSTOM){var y=o.getOption(x,n.BaseValue.CUSTOM+'');if(y){k.setPrivacyData(y.id,t,s);o.setButtonTooltip(x,r.tooltip);}}}}}});e.exports=q;},null);
__d("PrivacySelectorNewDispatcher",["Dispatcher","copyProperties","merge"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j='selector',k=h(new g(),{handleUpdateFromSelector:function(l){this.dispatch(i({payloadSource:j},l));}});e.exports=k;},null);
__d("XStickyComposerChangeController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/privacy\/sticky_composer\/change\/",{privacyx:{type:"String"},logging_source:{type:"String"}});},null);
__d("PrivacySelector",["Arbiter","ArbiterMixin","AsyncRequest","AudienceSelector","CSS","DOM","PrivacyConst","DataStore","PrivacySelectorNewDispatcher","Run","SelectorDeprecated","SubscriptionsHandler","XStickyComposerChangeController","cx","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();var v=u(h);for(var w in v)if(v.hasOwnProperty(w))y[w]=v[w];var x=v===null?null:v.prototype;y.prototype=Object.create(x);y.prototype.constructor=y;y.__superConstructor__=v;function y(z,aa){"use strict";this.$PrivacySelector0=aa;if(aa){this.$PrivacySelector1=z;}else this.$PrivacySelector2=z;this.$PrivacySelector3=null;this.$PrivacySelector4=new r();this.$PrivacySelector5=new r();if(this.$PrivacySelector0){this.$PrivacySelector6();}else this.$PrivacySelector7();p.onLeave(this.cleanup.bind(this));}y.prototype.select=function(z,aa,ba){"use strict";if(!z||!aa)throw new Error('PrivacySelector.select: you must pass in privacyParam '+'and privacyBase');if(this.$PrivacySelector0){if(ba)this.$PrivacySelector4.addSubscriptions(this.$PrivacySelector1.subscribeOnce('changed',function(ca,da){ba('changed',{post_param:da.post_param});}));this.$PrivacySelector1.selectOption(z);}else{if(ba)this.$PrivacySelector5.addSubscriptions(g.subscribe('AudienceSelector/changed',function(ca,da){if(this.$PrivacySelector8(da.selector)){var ea=q.getOptionValue(da.option);ba('changed',{privacy_base:ea});}}.bind(this)));j.setAudience(this.$PrivacySelector2,aa);}};y.prototype.expandFull=function(z){"use strict";if(this.$PrivacySelector0){this.$PrivacySelector1.openSelectorExpanded(z);}else this.expand(z);};y.prototype.expandFullAndShowFlyout=function(z){"use strict";this.expandFull(this.showFlyoutOnMenu.bind(this,z));};y.prototype.expand=function(z){"use strict";if(this.$PrivacySelector0){this.$PrivacySelector1.openSelector(z);}else{var aa=q.getSelectorMenu(this.$PrivacySelector2);if(!aa){q.loadMenu(this.$PrivacySelector2,function(){z&&z();});}else this.$PrivacySelector5.addSubscriptions(q.listen(this.$PrivacySelector2,'open',function(){z&&z();this.$PrivacySelector8(this.$PrivacySelector2);}.bind(this)));q.toggle(this.$PrivacySelector2,z);}};y.prototype.showFlyoutOnMenu=function(z){"use strict";this.$PrivacySelector9&&this.$PrivacySelector9.hide();this.$PrivacySelector9=z;var aa;if(this.$PrivacySelector0){aa=this.$PrivacySelector1.getMenuElement();z.setOffsetY(85);}else{aa=l.scry(this.$PrivacySelector2,'div.uiSelectorMenuWrapper')[0];z.setOffsetY(13);}z.setContext(aa);z.show();};y.prototype.setOnClose=function(z){"use strict";this.$PrivacySelector3=z;};y.prototype.cleanup=function(){"use strict";this.$PrivacySelector4.release();this.$PrivacySelector4=new r();this.$PrivacySelector5.release();this.$PrivacySelector5=new r();this.$PrivacySelector9&&this.$PrivacySelector9.hide();this.$PrivacySelector9=null;this.$PrivacySelector3=null;};y.get=function(z){"use strict";if(!z)return;var aa=n.get(z,'selector');if(!aa){z=y.getDOMFromStory(z);if(!z)return;aa=n.get(z,'selector');}if(aa)return new y(aa,true);return new y(z,false);};y.getAdamaSelectorInstance=function(z){"use strict";if(!z)return;var aa=n.get(z,'selector');if(!aa){z=y.getDOMFromStory(z);if(!z)return;aa=n.get(z,'selector');}return aa;};y.getDOMFromStory=function(z){"use strict";if(!z)return;var aa=l.scry(z,"._43_1")[0];if(aa)return aa;return j.get(z);};y.getIconFromSelectorDOM=function(z){"use strict";return l.scry(z,'i.img')[0];};y.setComposerPrivacy=function(z,aa,ba){"use strict";var ca=s.getURIBuilder().setString('privacyx',z);ba&&ca.setString('logging_source',ba);new i(ca.getURI()).send();o.handleUpdateFromSelector({selector_type:m.PrivacyField.CURRENT_COMPOSER,post_param:z,unique_value:'_updateStickyComposerPrivacy'});var da=j.getComposerInstance(aa);if(da)j.setAudience(da,aa);};y.prototype.$PrivacySelector6=function(){"use strict";this.$PrivacySelector4.addSubscriptions(this.$PrivacySelector1.subscribe('changed',function(z,aa){this.inform('changed',{post_param:aa.post_param});}.bind(this)),this.$PrivacySelector1.subscribe('selectorFinished',function(){this.$PrivacySelector3&&this.$PrivacySelector3();}.bind(this)));};y.prototype.$PrivacySelector7=function(){"use strict";this.$PrivacySelector4.addSubscriptions(g.subscribe('AudienceSelector/update',function(z,aa){if(this.$PrivacySelector2!==aa.selector)return;var ba=q.getOptionValue(aa.option);this.inform('changed',{privacy_base:ba});}.bind(this)),g.subscribe('AudienceSelector/changed',function(z,aa){if(this.$PrivacySelector2!==aa.selector)return;if(k.hasClass(aa.option,'moreOption')||k.hasClass(aa.option,'returnOption'))return;if(aa.value!=m.BaseValue.CUSTOM){this.inform('changed',{privacy_base:aa.value});}else if(aa.value==m.BaseValue.CUSTOM)this.$PrivacySelectora=true;}.bind(this)),q.listen(this.$PrivacySelector2,'close',function(){if(this.$PrivacySelectora){this.$PrivacySelectora=false;return;}this.$PrivacySelector3&&this.$PrivacySelector3();}.bind(this)),g.subscribe('CustomPrivacyOptionController/cancel',function(z,aa){if(this.$PrivacySelector2!==aa.selector)return;this.$PrivacySelector3&&this.$PrivacySelector3();}.bind(this)));};y.prototype.$PrivacySelector8=function(z){"use strict";if(z!=this.$PrivacySelector2)return false;this.$PrivacySelector5.release();this.$PrivacySelector5=new r();return true;};e.exports=y;},null);
__d("ComposerX",["ActorURI","Arbiter","ComposerXAttachmentBootstrap","ComposerXContext","ComposerXMarauderLogger","ComposerXSessionIDs","ComposerXSessionIDInserter","ComposerXStore","CSS","DOM","DOMQuery","PrivacyConst","PrivacySelector","PrivacySelectorNewDispatcher","URI","SubscriptionsHandler","arrayContains","copyProperties","csx","cx","getObjectValues","removeFromArray"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba){b.__markCompiled&&b.__markCompiled();var ca='any';function da(ea){"use strict";this._root=ea;this._composerID=ea.id;this._attachments={};this._context=new j({});l.resetSessionID(this._composerID);m.init(this._root);this._subscriptionsHandler=new v();this._subscriptionsHandler.addSubscriptions(h.subscribe(['composer/publish','composer/close'],function(fa,ga){if(ga.composer_id===this._composerID)this.reset();}.bind(this)));this._subscriptionsHandler.addSubscriptions.apply(this._subscriptionsHandler,k.listenForPostEvents(this._composerID,this._getContent()));this._attachmentFetchForm=q.find(ea,"._2_4");}da.prototype.getAttachment=function(ea,fa,ga){"use strict";ea=this._augmentURI(ea);var ha=i.getURIHash(ea);this._endpointHashToShow=ha;var ia=this._attachments[ha];if(ia){this._showAttachmentAfterComponentsLoaded(ha,ga);}else this.fetchAttachmentData(ea,fa);};da.prototype.fetchAttachmentData=function(ea,fa){"use strict";ea=this._augmentURI(ea);var ga=i.getURIHash(ea);if(this._attachments[ga])return;if(!w(this._currentFetchEndpoints,ga)){i.load(this._attachmentFetchForm,ea,fa);this._currentFetchEndpoints.push(ga);}};da.prototype.setAttachment=function(ea,fa,ga,ha){"use strict";ba(this._currentFetchEndpoints,ea);this._setupAttachment(ea,fa,ga,ha);this._showAttachmentAfterComponentsLoaded(ea,false);};da.prototype.setInitialAttachment=function(ea,fa,ga,ha,ia){"use strict";if(ia)this._context=ia;ea=this._augmentURI(ea);var ja=i.getURIHash(ea);this._setupAttachment(ja,fa,ga,ha);this._initialAttachmentEndpoint=ea;if(!this._currentInstance)this._showAttachmentAfterComponentsLoaded(ja,true);};da.prototype.setComponent=function(ea,fa){"use strict";if(!n.get(this._composerID,ea)){n.set(this._composerID,ea,fa);p.appendContent(this._attachmentFetchForm,p.create('input',{type:'hidden',name:'loaded_components[]',value:ea}));}};da.prototype.reset=function(){"use strict";if(this._currentInstance){this._currentInstance.cleanup();this._currentInstance=null;}l.resetSessionID(this._composerID);for(var ea in this._attachments)this._attachments[ea].instance.reset();var fa=n.getAllForComposer(this._composerID);aa(fa).forEach(function(ja){if(ja.reset)ja.reset(ja);});var ga=s.getAdamaSelectorInstance(p.scry(this._root,"div._1lo2")[0]),ha=n.get(this._composerID,'mainprivacywidget'),ia=ha&&ha.instance&&ha.instance.getInstance();if(ga){ia.setInstance(ga);}else ga=ia&&ia.getInstance();if(ga&&ga.shouldReplaceOnPost())if(ga.isComposerWithDefault()){ga.selectDefaultOption();t.handleUpdateFromSelector({selector_type:r.PrivacyField.DEFAULT_COMPOSER.toString(),post_param:'',unique_id:'_reloadDefaultSelectors',reload:true});}else t.handleUpdateFromSelector({selector_type:r.PrivacyField.CURRENT_COMPOSER.toString(),post_param:'',unique_id:'_reloadStickySelectors',reload:true});this.getAttachment(this._initialAttachmentEndpoint,false,true);h.inform('composer/reset');};da.prototype.destroy=function(){"use strict";this._subscriptionsHandler.release();};da.prototype.addPlaceholders=function(ea,fa){"use strict";var ga;for(var ha in this._attachments){ga=this._attachments[ha];if(ga.instance===ea){fa.forEach(function(ia){ga.placeholders.push(ia);ga.required_components.push(ia.component_name);});break;}}if(this._currentInstance===ea)this._fillPlaceholders(fa);};da.prototype.hasAttachmentWithClassName=function(ea){"use strict";return q.scry(this._root,'.'+ea).length>0;};da.prototype.showAttachmentThrobber=function(){"use strict";o.addClass(this._attachmentFetchForm,'async_saving');};da.prototype.hideAttachmentThrobber=function(){"use strict";o.removeClass(this._attachmentFetchForm,'async_saving');};da.prototype.getContext=function(){"use strict";return this._context;};da.prototype.getID=function(){"use strict";return this._composerID;};da.prototype._setupAttachment=function(ea,fa,ga,ha){"use strict";fa.setComposerID(this._composerID);this._attachments[ea]={instance:fa,placeholders:ga,required_components:ha};var ia=this._getContent(),ja=fa.getRoot();if(ja.parentNode!==ia){o.hide(ja);p.appendContent(ia,ja);}};da.prototype._getContent=function(){"use strict";return q.find(this._root,"div._55d0");};da.prototype._showAttachment=function(ea,fa,ga,ha){"use strict";if(this._currentInstance===ea)return;if(this._endpointHashToShow===ca){this._endpointHashToShow=null;}else if(this._endpointHashToShow!==fa)return;if(this._currentInstance){if(!this._currentInstance.canSwitchAway())return;this._currentInstance.cleanup();}this._currentInstance=ea;var ia=this._getContent().childNodes,ja=ea.getRoot();for(var ka=0;ka<ia.length;ka++)if(ia[ka]!==ja)o.hide(ia[ka]);o.show(ja);this._fillPlaceholders(ga);ea.initWithComponents(ha);if(this._context.getProperty(j.PROPERTIES.BOOTLOAD_ATTACHMENTS_IMMEDIATELY))if(typeof ea.bootloadAttachments==='function')ea.bootloadAttachments();this._setAttachmentSelectedClass(ea.attachmentClassName);h.inform('composer/initializedAttachment',{composerRoot:this._root,isInitial:ha});};da.prototype._showAttachmentAfterComponentsLoaded=function(ea,fa){"use strict";var ga=this._attachments[ea];n.waitForComponents(this._composerID,ga.required_components,this._showAttachment.bind(this,ga.instance,ea,ga.placeholders,fa));};da.prototype._fillPlaceholders=function(ea){"use strict";ea.forEach(function(fa){var ga=n.get(this._composerID,fa.component_name);if(ga.element&&fa.element!==ga.element.parentNode)p.setContent(fa.element,ga.element);}.bind(this));};da.prototype._setAttachmentSelectedClass=function(ea){"use strict";var fa=q.scry(this._root,"._519b")[0],ga;if(fa){o.removeClass(fa,"_519b");ga=q.scry(fa,'*[aria-pressed="true"]')[0];if(ga)ga.setAttribute('aria-pressed','false');}if(ea){var ha=q.scry(this._root,'.'+ea)[0];if(ha){o.addClass(ha,"_519b");ga=q.scry(ha,'*[aria-pressed="false"]')[0];if(ga)ga.setAttribute('aria-pressed','true');}}};da.prototype._augmentURI=function(ea){"use strict";var fa=this._context.getProperty(j.PROPERTIES.ACTOR_ID),ga=(fa)?g.create(ea,fa):new u(ea),ha=this._context.getProperty(j.PROPERTIES.POST_ID);if(ha)ga.addQueryData('post_id',ha);return ga.toString();};x(da.prototype,{_endpointHashToShow:ca,_currentFetchEndpoints:[],_initialAttachmentEndpoint:''});e.exports=da;},null);
__d("ComposerXAttachment",["ComposerXStore","copyProperties"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(){"use strict";}i.prototype.getRoot=function(){"use strict";};i.prototype.initWithComponents=function(j){"use strict";};i.prototype.cleanup=function(){"use strict";};i.prototype.reset=function(){"use strict";};i.prototype.getComponent=function(j){"use strict";return g.get(this._composerID,j);};i.prototype.getComponentInstance=function(j){"use strict";var k=g.get(this._composerID,j);return k&&k.instance;};i.prototype.canSwitchAway=function(){"use strict";return true;};i.prototype.setComposerID=function(j){"use strict";this._composerID=j;};i.prototype.getComposerID=function(){"use strict";return this._composerID;};i.prototype.allowOGTagPreview=function(){"use strict";return false;};h(i.prototype,{attachmentClassName:''});e.exports=i;},null);
__d("registerForLeaveWarning",["PageTransitions","Run","URI","createCancelableFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(n){var o=i.getNextURI(),p=j(n);h.onBeforeUnload(function(){return m(p,o);});return p;}function m(n,o){var p=g.getMostRecentURI(),q=i.getNextURI(),r=p.getQueryData().hasOwnProperty('theater')&&o.path===q.path,s=q.getQueryData().hasOwnProperty('theater'),t=a.DialogNavigationStack&&a.DialogNavigationStack.isActiveURI(q);if(r||s||t){h.onAfterLoad(function(){h.onBeforeUnload(function(){return m(n,o);});});return;}if(a.Dialog&&a.Dialog.getCurrent())return;if(n())return k._("You haven't finished your post yet. Do you want to leave without finishing?");}e.exports=l;},null);
__d("ComposerXController",["ActorURI","Arbiter","ComposerX","ComposerXMarauderLogger","ComposerXAttachmentBootstrap","ComposerXContext","Event","Parent","$","cx","emptyFunction","ge","invariant","registerForLeaveWarning"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u={},v={},w={};function x(ba){var ca=r(ba);if(!ca)return null;var da=n.byClass(o(ba),"_119"),ea=da.id;if(!w[ea])w[ea]=new i(da);return w[ea];}function y(ba){var ca=x(ba);s(ca!==null);return ca;}function z(ba){if(!v[ba])return;v[ba].forEach(function(ca){return ca.cancel();});delete v[ba];}var aa={registerConditionForComposerCancel:function(ba,ca){var da=y(ba).getID();if(!(da in u))u[da]=[];u[da].push(ca);if(!(da in v))v[da]=[];v[da].push(t(ca));},hasChanges:function(ba){var ca=u[ba];if(!ca)return false;return ca.some(function(da){return da();});},getAttachment:function(ba,ca,da){var ea=y(ba);ea.getAttachment(ca,da);},fetchAttachmentData:function(ba,ca,da){y(ba).fetchAttachmentData(ca,da);},setAttachment:function(ba,ca,da,ea,fa){var ga=x(ba);if(ga)ga.setAttachment(ca,da,ea,fa);},setInitialAttachment:function(ba,ca,da,ea,fa,ga){var ha=y(ba);ha.setInitialAttachment(ca,da,ea,fa,ga);},setComponent:function(ba,ca,da){var ea=x(ba);if(ea)ea.setComponent(ca,da);},reset:function(ba){var ca=y(ba);ca.reset();},holdTheMarkup:q,getEndpoint:function(ba,ca,da){var ea=y(ba),fa=ea.getContext();ca=g.create(ca,fa.getProperty(l.PROPERTIES.ACTOR_ID)).toString();k.load(ea._attachmentFetchForm,ca,da);},addPlaceholders:function(ba,ca,da){var ea=y(ba);ea.addPlaceholders(ca,da);},hasAttachmentWithClassName:function(ba,ca){var da=y(ba);return da.hasAttachmentWithClassName(ca);},showAttachmentThrobber:function(ba){var ca=y(ba);ca.showAttachmentThrobber();},hideAttachmentThrobber:function(ba){var ca=y(ba);ca.hideAttachmentThrobber();},logEventForElement:function(ba,ca){m.listen(ba,'click',function(){var da=aa.getComposerID(ba);j.logEvent(ca,da);});},getComposerID:function(ba){return y(ba).getID();},destroyComposer:function(ba){if(!(ba in w))return;w[ba].destroy();delete w[ba];delete u[ba];z(ba);}};k.bootstrap=function(ba){aa.getAttachment(ba,ba.getAttribute('data-endpoint'));};h.subscribe('page_transition',function(){for(var ba in w)if(!r(ba))aa.destroyComposer(ba);});e.exports=aa;},null);
__d("ComposerXDragDrop",["Arbiter","ClipboardPhotoUploader","ComposerXAjaxEndpoint","ComposerXController","ComposerXDragDropConfig","CSS","DOMQuery","DragDropTarget","Event","Parent","PUWMethods","URI","csx","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u=i.MEDIA_UPLOAD,v='/ajax/composerx/attachment/link/scraper/',w=function(y){y();};function x(y,z,aa,ba){"use strict";this._root=y;this._composerID=z;this._targetID=aa;ba=ba||w;this._activatePasteHandler();this._dragdrop=new n(y).setOnFilesDropCallback(function(ca){ba(this._uploadFiles.bind(this,ca,q.DRAGDROP));}.bind(this)).setFileFilter(x.filterImages).enable();x.handleDragEnterAndLeave(y);g.subscribe('composer/deactivateDragdrop',function(){this.deactivate();}.bind(this));g.subscribe('composer/reactivateDragdrop',function(){this.reactivate();}.bind(this));}x.prototype.enableURLDropping=function(){"use strict";this._dragdrop.setOnURLDropCallback(this._onURLDrop.bind(this));};x.prototype.deactivate=function(){"use strict";this._dragdrop.disable();this._deactivatePasteHandler();};x.prototype.reactivate=function(){"use strict";this._activatePasteHandler();this._dragdrop.enable();};x.prototype._activatePasteHandler=function(){"use strict";if(!k.canPaste||this._pasteHandler)return;this._pasteHandler=o.listen(this._root,'paste',function(event){var y=h.getImages(event);if(!y.length)return;this._uploadFiles(y,q.COPYPASTE);}.bind(this));};x.prototype._deactivatePasteHandler=function(){"use strict";if(!this._pasteHandler)return;this._pasteHandler.remove();delete this._pasteHandler;};x.prototype._uploadFiles=function(y,z){"use strict";j.getAttachment(this._root,u);g.inform('ComposerXFilesStore/filesDropped/'+this._composerID+'/mediaupload',{files:y,method:z},g.BEHAVIOR_PERSISTENT);};x.prototype._onURLDrop=function(y){"use strict";var z=new r(v);z.addQueryData({scrape_url:encodeURIComponent(y)});j.getAttachment(this._root,z.toString());};x.handleDragEnterAndLeave=function(y){"use strict";var z=m.scry(p.byClass(y,"_119"),"._2wr");g.subscribe('dragenter',function(aa,ba){if(y==ba.element)z.forEach(l.hide);});g.subscribe('dragleave',function(aa,ba){if(y==ba.element)z.forEach(l.show);});};x.filterImages=function(y){"use strict";var z=[];for(var aa=0;aa<y.length;aa++)if(y[aa].type.match('image/*'))z.push(y[aa]);return z;};e.exports=x;},null);
__d("legacy:AudienceSelector",["AudienceSelector"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();b('AudienceSelector');},3);